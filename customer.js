(()=>{const{useState:P,useEffect:K,useRef:ee,useMemo:J,useLayoutEffect:ze}=React,He="Odil Accessories",Ye="Simple wholesale catalogue with WhatsApp ordering.",_e="GBP";const pe="992935563306",we="nova_wholesale_cart_v1",se="nova_owner_products_v1",de=document.body.dataset.layout==="owner",be=de||document.body.dataset.ownerMode!=="disabled",Ee=be&&!de,Qe=de||document.body.dataset.defaultOwner==="true",Ve="/.netlify/functions/catalogue",H="__base__",V=(a={})=>{const r=Object.entries(a||{}).filter(([t,o])=>o!=null&&String(o).trim()!=="");return r.length?r.sort(([t],[o])=>t.localeCompare(o)).map(([t,o])=>`${t}:${o}`).join("|"):H},oe=a=>{if(!a||typeof a!="object")return{};const r={};return Object.entries(a).forEach(([t,o])=>{const s=Number(o);Number.isFinite(s)&&s>=0&&(r[t&&t.trim()||H]=s)}),r},We=window.SUPABASE_PUBLIC_CONFIG||{},fe=We.url||"",Le=We.anonKey||"",Je=!!(fe&&Le);let X=null;try{window.supabase&&Je?(X=window.supabase.createClient(fe,Le),console.log("\u2705 Supabase client initialized successfully"),console.log("\u{1F4CD} Supabase URL:",fe),setTimeout(async()=>{try{console.log("\u{1F504} Testing database connection...");const{data:r,error:t}=await X.from("products").select("count").limit(1);t?(console.error("\u274C Database test failed:",t),t.message.includes("permission denied")&&console.error("\u{1F6AB} RLS Policy Issue: Run the SQL script to fix permissions"),t.message.includes('relation "products" does not exist')&&console.error("\u{1F3D7}\uFE0F Table Missing: Run the SQL script to create the products table")):console.log("\u2705 Database connection successful"),console.log("\u{1F504} Testing realtime connection...");const o=X.channel("test-channel");o.subscribe(s=>{s==="SUBSCRIBED"?(console.log("\u2705 Realtime connection successful"),o.unsubscribe()):s==="CHANNEL_ERROR"&&console.error("\u274C Realtime connection failed")})}catch(r){console.error("\u274C Connection test failed:",r)}},1e3)):console.warn("\u26A0\uFE0F Supabase not initialized - supply SUPABASE_PUBLIC_CONFIG in supabase-config.js")}catch(a){console.error("\u274C Supabase initialization failed:",a)}const ye=async(a,r=3,t=1e3)=>{for(let o=1;o<=r;o++)try{return await a()}catch(s){if(console.warn(`\u26A0\uFE0F Attempt ${o}/${r} failed:`,s.message),o===r)throw s;await new Promise(c=>setTimeout(c,t*o))}},Ze=async()=>{var a;try{if(!X)return null;const{data:r}=await X.auth.getSession(),t=(a=r==null?void 0:r.session)==null?void 0:a.access_token;return t?`Bearer ${t}`:null}catch(r){return null}},me=async(a,r)=>{try{const t=await Ze(),o=await fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:t}:{}},body:JSON.stringify({action:a,data:r})});if(!o.ok){const c=await o.text().catch(()=>"");throw new Error(`Owner API ${a} failed: ${o.status} ${c}`)}const s=await o.json().catch(()=>({}));if(s!=null&&s.error){const c=new Error(s.error.message||s.error);throw c.details=s.error.details,c.hint=s.error.hint,c.code=s.error.code,c}return s}catch(t){throw console.error(`Owner API ${a} error`,t),t}},Q=a=>{var _;if(!a)return null;const{sourceid:r,sourceId:t,images:o,image:s,specs:c,variants:m,inventory:x,price:S,hidden:b,...i}=a,n=(_=t!=null?t:r)!=null?_:null,d=B=>Array.isArray(B)?B:B==null?[]:typeof B=="string"&&B.trim().length?[B]:[],p=d(o),R=d(c),O=typeof m=="object"&&m!==null&&!Array.isArray(m)?m:{},U=oe(x),h=s||p[0]||void 0,L=p.length?p:h?[h]:[];return{...i,sourceId:n,images:L,specs:R,variants:O,inventory:U,price:typeof S=="number"?S:Number(S)||0,hidden:!!b,image:h}},Te=a=>{var s;const r={id:a.id,name:a.name,sku:a.sku,category:a.category,price:Number(a.price)||0,description:(s=a.description)!=null?s:""},t=Array.isArray(a.images)?a.images:a.image?[a.image]:[];t.length&&(r.images=t),Array.isArray(a.specs)&&a.specs.length&&(r.specs=a.specs),a.variants&&Object.keys(a.variants).length&&(r.variants=a.variants),a.sourceId&&(r.sourceid=a.sourceId),a.hidden&&(r.hidden=!0);const o=oe(a.inventory);return Object.keys(o).length&&(r.inventory=o),r},Ne=async()=>{if(!X)return console.warn("\u26A0\uFE0F Cannot load products: Supabase not initialized"),[];try{console.log("\u{1F504} Loading products from database...");const{data:a,error:r}=await X.from("products").select("*").order("created_at",{ascending:!1});if(r)throw console.error("\u274C Database error:",r),r;return console.log(`\u2705 Loaded ${(a==null?void 0:a.length)||0} products from database`),(a||[]).map(Q).filter(Boolean)}catch(a){return console.error("Failed to load products:",a),[]}},Xe=async a=>{try{const r=Te(a),{data:t}=await ye(()=>me("insert",r)),o=Q(t);return console.log("\u2705 Product saved successfully:",o),o}catch(r){return console.error("\u274C Failed to save product after retries:",r),null}},Re=async a=>{try{const r=Te(a),{data:t}=await ye(()=>me("upsert",r));return Q(t)}catch(r){return console.error("Failed to upsert product:",r),null}},et=async a=>{try{return await ye(()=>me("delete",{id:a})),!0}catch(r){return console.error("Failed to delete product:",r),!1}};const ge=["All","Phone Screens","Back Glass","Power Banks","Screen Protectors","Batteries","Mobile Phones","Tablets","Phone Cases","Cables","Chargers","Earphones","Charging Ports","Face ID"],ue=["iPhone 11","iPhone 12","iPhone 12 Pro","iPhone 13","iPhone 13 Pro","iPhone 14","iPhone 14 Pro","iPhone 15","iPhone 15 Plus","iPhone 15 Pro","iPhone 15 Pro Max","iPhone 16","iPhone 16 Pro","iPhone 16 Pro Max"],je=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],Gt=[...ue,...je],Ue=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],De=["Galaxy A14","Galaxy A24","Galaxy A34","Galaxy A54","Galaxy A55","Galaxy A15"],tt=["iPhone","Samsung S","Samsung A"],at={iPhone:ue,"Samsung S":Ue,"Samsung A":De},ke=["Original","OEM","AAA","Aftermarket","Refurb"],rt=["TPU","Silicone","PC","Leather"],ne=["Black","White","Navy","Clear","Red","Lavender","Stone","Midnight","Starlight","Blue","Green","Gold"],xe={Black:"#111827",White:"#ffffff",Navy:"#1e3a8a",Clear:"#ffffff",Red:"#ef4444",Lavender:"#b57edc",Stone:"#a8a29e",Midnight:"#0f172a",Starlight:"#f8fafc",Blue:"#3b82f6",Green:"#10b981",Gold:"#f59e0b"};function le({name:a}){const r=xe[a],t=r?{backgroundColor:r,border:"1px solid rgba(0,0,0,.15)"}:{backgroundImage:"linear-gradient(45deg,#e5e7eb 25%,transparent 25%),linear-gradient(-45deg,#e5e7eb 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#e5e7eb 75%),linear-gradient(-45deg,transparent 75%,#e5e7eb 75%)",backgroundSize:"8px 8px",border:"1px solid rgba(0,0,0,.15)"};return React.createElement("span",{"aria-hidden":"true",className:"inline-block h-3 w-3 rounded-full align-[-2px]",style:t})}const st=["Tempered","Hydrogel"],nt=["Clear","Matte","Privacy"],ot=["1-Pack","2-Pack"],lt=["Edge-to-edge","Full glue"],Ae=["USB-C \u2194 USB-C","USB-C \u2194 Lightning","USB-A \u2194 Micro-USB"],$e=["0.5m","1m","2m"],ct=["27W","60W","100W"],it=["MFi","USB-IF"],dt=["Standard","Braided",">10k bends"],mt=["20W","30W","45W","65W"],Se=["1\xD7USB-C","1\xD7USB-A","1\xD7USB-C + 1\xD7USB-A","2\xD7USB-C"],re=["PD 3.0","PPS","QC 3.0","QC 4+"];const ut=["UK 3-pin","EU","US"],Ce=["New","Refurb","Used A","Used B"],pt=["Unlocked","Locked","Dual-SIM Yes","Dual-SIM No"],bt=["5G","4G"],ft=["Wi-Fi","Wi-Fi + Cellular"],Pe=["32GB","64GB","128GB","256GB","512GB","1TB"],Be=["3GB","4GB","6GB","8GB","12GB","16GB"];const gt=$e;const ht=["10,000 mAh","20,000 mAh"],Me=[{id:"sp-iph-13-tmp-2pk",name:"Tempered Glass \u2013 iPhone 13 (2\u2011Pack)",sku:"SP-IP13-TG2",category:"Screen Protectors",price:3.2,specs:["2\u2011Pack","Tempered","9H","Oleophobic"],description:"Clear tempered glass for iPhone 13.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.07_b6d5696d.jpg",variants:{Model:["iPhone 13"],Material:["Tempered"],Pack:["2\u2011Pack"]}},{id:"sp-iph-14-hg-1pk",name:"Hydrogel Protector \u2013 iPhone 14",sku:"SP-IP14-HG1",category:"Screen Protectors",price:2.6,specs:["Hydrogel","Self\u2011healing","Case\u2011friendly"],description:"Flexible hydrogel film.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.08_46a12f36.jpg",variants:{Model:["iPhone 14"],Material:["Hydrogel"],Pack:["1\u2011Pack","2\u2011Pack"]}},{id:"case-slim-tpu-iph-11-16",name:"Slim TPU Case \u2013 iPhone Series",sku:"CA-IP-TPU",category:"Phone Cases",price:3.9,specs:["TPU","Slim","Matte"],description:"Slim matte TPU case.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.09_811264ed.jpg",variants:{Color:["Black","Navy","Clear","Red"],Material:["TPU"],Model:ue}},{id:"case-silicone-sg-s20-s25",name:"Soft Silicone Case \u2013 Galaxy Series",sku:"CA-SG-SIL",category:"Phone Cases",price:4.1,specs:["Silicone","Microfiber"],description:"Soft\u2011touch silicone for Galaxy.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.10_3d78676b.jpg",variants:{Color:["Midnight","Stone","Lavender"],Material:["Silicone"],Model:je}},{id:"chg-65w-gan-dual",name:"65W GaN Charger \u2013 Dual Port",sku:"CH-65W-GAN",category:"Chargers",price:12.5,specs:["65W","USB\u2011C + USB\u2011A","PD/QC"],description:"Compact GaN charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_89070b32.jpg",variants:{Wattage:["65W"],Ports:["USB\u2011C + USB\u2011A"],Standard:re}},{id:"chg-20w-usbc",name:"20W USB\u2011C Wall Charger",sku:"CH-20W-USBC",category:"Chargers",price:6,specs:["20W","USB\u2011C","PD"],description:"USB\u2011C PD charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_9ebc1ea2.jpg",variants:{Wattage:["20W"],Ports:["USB\u2011C"],Standard:["PD 3.0"]}},{id:"cbl-usbc-60w-1m-2m",name:"USB\u2011C Cable 60W",sku:"CB-UC-60",category:"Cables",price:2.2,specs:["USB\u2011C","60W","Nylon"],description:"Braided 60W cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.12_628fcab2.jpg",variants:{Connector:["USB\u2011C \u2194 USB\u2011C"],Length:gt,Rating:["60W"]}},{id:"cbl-lightning-mfi",name:"Lightning Cable (MFi)",sku:"CB-LT-MFI",category:"Cables",price:3.5,specs:["Lightning","MFi","1m"],description:"MFi Lightning cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.13_22d8e7c9.jpg",variants:{Connector:["USB\u2011C \u2194 Lightning"],Length:["1m"],Rating:["27W"]}},{id:"ear-wired-classic",name:"Wired Earphones \u2013 Classic",sku:"EA-WI-CLS",category:"Earphones",price:4.2,specs:["3.5mm","In\u2011line mic"],description:"Wired earphones.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.14_4f407f9a.jpg",variants:{Connector:["3.5mm"],Color:["Black","White"]}},{id:"ear-tws-basic",name:"TWS Earbuds \u2013 Basic",sku:"EA-TWS-BSC",category:"Earphones",price:12.9,specs:["BT 5.3","20h"],description:"TWS earbuds.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.15_e7b8adc0.jpg",variants:{Color:["White","Black"],Standard:["BT 5.3"]}},{id:"pb-10000-compact",name:"Power Bank 10,000 mAh",sku:"PB-10K-CMP",category:"Power Banks",price:11,specs:["10,000 mAh","USB\u2011C","PD"],description:"Slim 10k power bank.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.17_01d0dcae.jpg",variants:{Capacity:["10,000 mAh"],Ports:["USB\u2011C","USB\u2011A"],Standard:re}},{id:"pb-20000-dual",name:"Power Bank 20,000 mAh \u2013 Dual",sku:"PB-20K-DUAL",category:"Power Banks",price:16.5,specs:["20,000 mAh","Dual","PD/QC"],description:"20k dual output.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.19_3b58c17b.jpg",variants:{Capacity:["20,000 mAh"],Ports:["USB\u2011C + USB\u2011A"],Standard:re}},{id:"img-001",name:"Accessory Photo A",sku:"IM-001",category:"Phone Cases",price:2.5,specs:["Assorted"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.33_5dd08e33.jpg"},{id:"img-002",name:"Accessory Photo B",sku:"IM-002",category:"Chargers",price:7.2,specs:["Fast"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_09a1e9d9.jpg"},{id:"img-003",name:"Accessory Photo C",sku:"IM-003",category:"Cables",price:1.8,specs:["1m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_f1935767.jpg"},{id:"img-004",name:"Accessory Photo D",sku:"IM-004",category:"Screen Protectors",price:2.9,specs:["Tempered"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.35_92866963.jpg"},{id:"img-005",name:"Accessory Photo E",sku:"IM-005",category:"Phone Cases",price:3.6,specs:["TPU"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.36_d9ee268e.jpg"},{id:"img-006",name:"Accessory Photo F",sku:"IM-006",category:"Back Glass",price:5.5,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.37_ef5ed98e.jpg"},{id:"img-007",name:"Accessory Photo G",sku:"IM-007",category:"Earphones",price:6,specs:["Wireless"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_b444897c.jpg"},{id:"img-008",name:"Accessory Photo H",sku:"IM-008",category:"Power Banks",price:9.9,specs:["10k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_f170faf6.jpg"},{id:"img-009",name:"Accessory Photo I",sku:"IM-009",category:"Cables",price:2,specs:["2m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.39_c37cddc9.jpg"},{id:"img-010",name:"Accessory Photo J",sku:"IM-010",category:"Chargers",price:11.5,specs:["65W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.40_7a858ba3.jpg"},{id:"img-011",name:"Accessory Photo K",sku:"IM-011",category:"Phone Cases",price:4.4,specs:["Silicone"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_80d08b54.jpg"},{id:"img-012",name:"Accessory Photo L",sku:"IM-012",category:"Screen Protectors",price:1.9,specs:["Hydrogel"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_a2efd2e1.jpg"},{id:"img-013",name:"Accessory Photo M",sku:"IM-013",category:"Back Glass",price:6.5,specs:["Back glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.42_63c16e8a.jpg"},{id:"img-014",name:"Accessory Photo N",sku:"IM-014",category:"Batteries",price:8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.43_06e00e31.jpg"},{id:"img-015",name:"Accessory Photo O",sku:"IM-015",category:"Phone Cases",price:3.2,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_de3a612b.jpg"},{id:"img-016",name:"Accessory Photo P",sku:"IM-016",category:"Cables",price:2.4,specs:["Nylon"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_fddf905d.jpg"},{id:"img-017",name:"Accessory Photo Q",sku:"IM-017",category:"Earphones",price:5,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.45_b1dd7f8a.jpg"},{id:"img-018",name:"Accessory Photo R",sku:"IM-018",category:"Chargers",price:9.5,specs:["30W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_30024620.jpg"},{id:"img-019",name:"Accessory Photo S",sku:"IM-019",category:"Power Banks",price:14,specs:["20k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_cb602f30.jpg"},{id:"img-020",name:"Accessory Photo T",sku:"IM-020",category:"Phone Cases",price:3.8,specs:["Leather"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_d9e5908c.jpg"},{id:"img-021",name:"Accessory Photo U",sku:"IM-021",category:"Screen Protectors",price:2.7,specs:["Matte"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.47_ac758901.jpg"},{id:"img-022",name:"Accessory Photo V",sku:"IM-022",category:"Cables",price:1.6,specs:["0.5m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_bc4af4ef.jpg"},{id:"img-023",name:"Accessory Photo W",sku:"IM-023",category:"Chargers",price:4.9,specs:["USB\u2011A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_f4496fba.jpg"},{id:"img-024",name:"Accessory Photo X",sku:"IM-024",category:"Earphones",price:13.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.49_ad6d3003.jpg"},{id:"img-025",name:"Accessory Photo Y",sku:"IM-025",category:"Phone Cases",price:2.9,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.50_b3694795.jpg"},{id:"img-026",name:"Accessory Photo Z",sku:"IM-026",category:"Back Glass",price:7,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.51_5e67178c.jpg"},{id:"img-027",name:"Accessory Photo AA",sku:"IM-027",category:"Batteries",price:6.9,specs:["Refurb"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.52_df23fdba.jpg"},{id:"img-028",name:"Accessory Photo AB",sku:"IM-028",category:"Chargers",price:8.5,specs:["PD"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.53_13d347f3.jpg"},{id:"img-029",name:"Accessory Photo AC",sku:"IM-029",category:"Cables",price:2.1,specs:["Braided"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_5c3d1851.jpg"},{id:"img-030",name:"Accessory Photo AD",sku:"IM-030",category:"Power Banks",price:12.2,specs:["Dual output"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_8f092381.jpg"},{id:"img-031",name:"Accessory Photo AE",sku:"IM-031",category:"Earphones",price:3.9,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.56_cbdfea17.jpg"},{id:"img-032",name:"Accessory Photo AF",sku:"IM-032",category:"Phone Cases",price:4.5,specs:["Patterned"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_61b6ae02.jpg"},{id:"img-033",name:"Accessory Photo AG",sku:"IM-033",category:"Screen Protectors",price:2.3,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_efd60a9b.jpg"},{id:"img-034",name:"Accessory Photo AH",sku:"IM-034",category:"Chargers",price:10,specs:["GaN"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.58_082b158d.jpg"},{id:"img-035",name:"Accessory Photo AI",sku:"IM-035",category:"Power Banks",price:15,specs:["High capacity"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.00_7e6451d4.jpg"},{id:"img-036",name:"Accessory Photo AJ",sku:"IM-036",category:"Cables",price:1.5,specs:["USB-C"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.01_bf466384.jpg"},{id:"img-037",name:"Accessory Photo AK",sku:"IM-037",category:"Earphones",price:7.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2920cb02.jpg"},{id:"img-038",name:"Accessory Photo AL",sku:"IM-038",category:"Phone Cases",price:3.1,specs:["Transparent"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2ae9f56f.jpg"},{id:"img-039",name:"Accessory Photo AM",sku:"IM-039",category:"Back Glass",price:6.8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_725a57bf.jpg"},{id:"img-040",name:"Accessory Photo AN",sku:"IM-040",category:"Chargers",price:5.5,specs:["USB-A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.04_faa6a5d9.jpg"}],Z=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:_e}).format(a),F=(...a)=>a.filter(Boolean).join(" ");function yt(){const[a,r]=P(!1);return K(()=>{var s;const t=window.matchMedia("(prefers-reduced-motion: reduce)");r(t.matches);const o=()=>r(t.matches);return(s=t.addEventListener)==null||s.call(t,"change",o),()=>{var c;return(c=t.removeEventListener)==null?void 0:c.call(t,"change",o)}},[]),a}function ae(a){const r=encodeURIComponent("#f3f4f6"),t=encodeURIComponent("#6b7280"),o=encodeURIComponent(a),s=`<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='600' role='img' aria-label='${o}'><rect width='100%' height='100%' fill='${r}'/><g fill='${t}' font-family='system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif'><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='24'>${o}</text></g></svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(s)}`}function ce(a,r){return a?a.startsWith("data:")||a.startsWith("http")?a:`/img/${a}`:ae(r)}function xt(a){const r=Array.isArray(a.images)&&a.images.length?a.images:a.image?[a.image]:[];return r.length?r:[ae(a.name)]}function Oe(a){const r=xt(a);return ce(r[0],a.name)}function ve(a,r,t){const o=ee(t);K(()=>{o.current=t},[t]),K(()=>{if(!a||!r.current)return;const s=r.current,c=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),m=document.activeElement,x=Array.from(s.querySelectorAll(c));if(!x.length)s.hasAttribute("tabindex")||s.setAttribute("tabindex","-1"),typeof s.focus=="function"&&s.focus({preventScroll:!0});else{const b=x[0];b&&typeof b.focus=="function"&&b.focus({preventScroll:!0})}const S=b=>{var i;if(b.key==="Escape"&&(b.stopPropagation(),(i=o.current)==null||i.call(o)),b.key==="Tab"&&x.length){const n=x[0],d=x[x.length-1];b.shiftKey&&document.activeElement===n?(b.preventDefault(),d.focus()):!b.shiftKey&&document.activeElement===d&&(b.preventDefault(),n.focus())}};return s.addEventListener("keydown",S),()=>{if(s.removeEventListener("keydown",S),m&&typeof m.focus=="function"&&document.contains(m))try{m.focus({preventScroll:!0})}catch(b){m.focus()}}},[a,r])}function vt(a,r){const t=ee(0),o=ee(null),s=J(()=>{if(typeof navigator=="undefined")return!1;const c=navigator.userAgent||"";if(!(navigator.maxTouchPoints>0))return!1;const x=/iP(ad|hone|od)/i.test(c),S=/CriOS/i.test(c),b=/FxiOS/i.test(c),i=/EdgiOS/i.test(c),n=/OPiOS/i.test(c);return x||S||b||i||n},[]);ze(()=>{if(typeof window=="undefined"||!a)return;const c=document.body,m=document.documentElement;if(!c||!m)return;const x=window.scrollY||window.pageYOffset||0,S=r&&Number.isFinite(r.current)?r.current:x;return t.current=S,o.current={strategy:s?"passive":"fixed",position:c.style.position,top:c.style.top,width:c.style.width,overflow:c.style.overflow,touchAction:c.style.touchAction,webkitOverflowScrolling:c.style.webkitOverflowScrolling,overscroll:c.style.overscrollBehavior,overscrollY:c.style.overscrollBehaviorY,htmlOverflow:m.style.overflow,htmlOverscroll:m.style.overscrollBehavior},s?(c.style.overflow="hidden",c.style.touchAction="pan-y",c.style.webkitOverflowScrolling="auto",c.style.overscrollBehavior="contain",c.style.overscrollBehaviorY="contain",m.style.overflow="hidden",m.style.overscrollBehavior="contain",()=>{const b=o.current||{};c.style.overflow=b.overflow||"",c.style.touchAction=b.touchAction||"",c.style.webkitOverflowScrolling=b.webkitOverflowScrolling||"",c.style.overscrollBehavior=b.overscroll||"",c.style.overscrollBehaviorY=b.overscrollY||"",m.style.overflow=b.htmlOverflow||"",m.style.overscrollBehavior=b.htmlOverscroll||"",window.scrollTo(0,t.current||0),o.current=null}):(c.style.position="fixed",c.style.top=`-${S}px`,c.style.width="100%",c.style.overflow="hidden",m.style.overflow="hidden",m.style.overscrollBehavior="none",()=>{const b=o.current||{};c.style.position=b.position||"",c.style.top=b.top||"",c.style.width=b.width||"",c.style.overflow=b.overflow||"",m.style.overflow=b.htmlOverflow||"",m.style.overscrollBehavior=b.htmlOverscroll||"",window.scrollTo(0,t.current||0),o.current=null})},[a,r,s])}function wt(){const a=i=>{if(!i)return null;const n=i.variants&&typeof i.variants=="object"&&!Array.isArray(i.variants)?i.variants:{},d=i.inventoryKey||V(n),p=Math.max(0,Number(i.qty)||0);return{...i,variants:n,inventoryKey:d,qty:p}},[r,t]=P([]),[o,s]=P("");K(()=>{try{const i=localStorage.getItem(we);if(i){const n=JSON.parse(i);Array.isArray(n.items)&&t(n.items.map(a).filter(Boolean)),typeof n.notes=="string"&&s(n.notes)}}catch(i){}},[]),K(()=>{try{localStorage.setItem(we,JSON.stringify({items:r,notes:o}))}catch(i){}},[r,o]);const c=i=>t(n=>{const d=a(i);if(!d)return n;const p=n.findIndex(R=>R.id===d.id&&JSON.stringify(R.variants||{})===JSON.stringify(d.variants||{})&&(R.inventoryKey||H)===(d.inventoryKey||H));if(p>=0){const R=[...n];return R[p]={...R[p],qty:Math.max(0,Number(R[p].qty||0)+d.qty)},R}return[...n,d]}),m=(i,n)=>t(d=>d.map((p,R)=>R===i?{...p,qty:Math.max(0,Number(n)||0)}:p)),x=i=>t(n=>n.filter((d,p)=>p!==i)),S=()=>t([]),b=r.reduce((i,n)=>i+n.price*n.qty,0);return{items:r,add:c,updateQty:m,removeIndex:x,clear:S,subtotal:b,notes:o,setNotes:s}}function Et(){const[a,r]=P([]),[t,o]=P(!0),[s,c]=P("connecting");K(()=>{(async()=>{try{c("connecting");const i=await Ne();r(i);try{localStorage.setItem(se,JSON.stringify(i))}catch(n){}c("connected")}catch(i){console.error("Failed to load products from database:",i),c("error");try{const n=localStorage.getItem(se);if(n){const d=JSON.parse(n);Array.isArray(d)&&r(d.map(Q).filter(Boolean))}}catch(n){}}finally{o(!1)}})()},[]),K(()=>{if(!X){console.warn("\u26A0\uFE0F Cannot setup realtime: Supabase not initialized");return}console.log("\u{1F504} Setting up realtime subscription...");const b=X.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},i=>{console.log("\u{1F534} Realtime event received:",i.eventType,i),r(n=>{if(i.eventType==="INSERT"){console.log("\u2795 Adding product via realtime:",i.new.name);const d=Q(i.new),p=n.findIndex(R=>R.id===d.id);if(p>=0){console.log("\u{1F504} Updating existing product instead of duplicating");const R=[...n];return R[p]=d,R}return[d,...n]}if(i.eventType==="UPDATE"){console.log("\u270F\uFE0F Updating product via realtime:",i.new.name);const d=Q(i.new);return n.map(p=>p.id===i.new.id?d:p)}return i.eventType==="DELETE"?(console.log("\u{1F5D1}\uFE0F Deleting product via realtime:",i.old.id),n.filter(d=>d.id!==i.old.id)):n})}).subscribe(i=>{console.log("\u{1F534} Realtime status:",i),i==="SUBSCRIBED"?(console.log("\u2705 Realtime subscription active!"),c("connected"),Ne().then(n=>{console.log("\u{1F504} Reloaded products after reconnection");const d=n.map(Q).filter(Boolean);r(d);try{localStorage.setItem(se,JSON.stringify(d))}catch(p){}}).catch(n=>{console.error("\u274C Failed to reload products after reconnection:",n)})):i==="CHANNEL_ERROR"||i==="CLOSED"?(console.error("\u274C Realtime subscription failed!"),c("error")):(console.log("\u{1F504} Realtime connecting..."),c("connecting"))});return()=>{console.log("\u{1F50C} Cleaning up realtime subscription"),b.unsubscribe()}},[]);const m=b=>{if(typeof b=="function")r(i=>{const n=b(i),d=(Array.isArray(n)?n:[]).map(Q).filter(Boolean);try{localStorage.setItem(se,JSON.stringify(d))}catch(p){}return d});else{const i=(Array.isArray(b)?b:[]).map(Q).filter(Boolean);r(i);try{localStorage.setItem(se,JSON.stringify(i))}catch(n){}}};return{ownerProducts:a,setOwnerProducts:m,addProduct:async b=>{const i=await Xe(b);if(i)return m(d=>[i,...d]),{product:i,persisted:!0};const n=Q(b);return m(d=>[n,...d]),{product:n,persisted:!1}},deleteProduct:async b=>{const i=await et(b);return i&&m(n=>n.filter(d=>d.id!==b)),i},loading:t,connectionStatus:s}}function Nt({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function he({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}function Rt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}function Ge({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}function kt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}function At({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.164a1.5 1.5 0 0 0-1.5 1.5v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}function Fe({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0 0 20.885 3.488"}))}function St(){return React.createElement("a",{href:"#main",className:"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 rounded-full border border-[var(--surface-border)] bg-white/90 px-3 py-2 text-sm font-semibold text-brand shadow-sm backdrop-blur"},"Skip to content")}function Ct({onOpenCart:a,search:r,setSearch:t,ownerMode:o,setOwnerMode:s,cartQty:c,connectionStatus:m,allowOwnerToggle:x}){const[S,b]=P(!1),i=ee(null);K(()=>{const d=()=>b(window.scrollY>4);return d(),window.addEventListener("scroll",d,{passive:!0}),()=>window.removeEventListener("scroll",d)},[]),K(()=>{const d=()=>{var R;const p=((R=i.current)==null?void 0:R.offsetHeight)||64;document.documentElement.style.setProperty("--header-offset",p+"px")};return d(),window.addEventListener("resize",d,{passive:!0}),()=>window.removeEventListener("resize",d)},[o,r]);const n=m==="connected"?{wrapper:"border border-emerald-200 bg-emerald-50/80 text-emerald-600",dot:"bg-emerald-500",label:"Online"}:m==="error"?{wrapper:"border border-rose-200 bg-rose-50/80 text-rose-600",dot:"bg-rose-500",label:"Offline"}:{wrapper:"border border-amber-200 bg-amber-50/80 text-amber-600",dot:"bg-amber-400 animate-pulse",label:"Connecting"};return React.createElement("header",{ref:i,className:F("sticky top-0 z-40 w-full border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-xl transition-shadow duration-300",S?"shadow-sm":"")},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex h-16 items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement(Nt,{className:"h-7 w-7 text-brand flex-shrink-0"}),React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("span",{className:"font-semibold text-slate-900 text-sm sm:text-base tracking-tight truncate"},He),React.createElement("div",{className:`hidden md:flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-medium ${n.wrapper}`,title:`Database ${m}`},React.createElement("span",{className:`inline-block h-2 w-2 rounded-full ${n.dot}`}),React.createElement("span",null,n.label)))),React.createElement("nav",{className:"flex items-center gap-1.5 sm:gap-2"},!o&&React.createElement("label",{className:"relative hidden sm:block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:d=>t(d.target.value),placeholder:"Search products\u2026",type:"search",className:"w-48 md:w-64 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(he,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),x&&React.createElement("button",{onClick:()=>s(!o),className:F("rounded-full border px-3 py-2 text-xs sm:text-sm font-medium transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",o?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/60 text-slate-700 hover:bg-white/80")},o?"Back":"Owner"),React.createElement("button",{onClick:a,className:"relative inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 sm:px-3.5 py-2 text-xs sm:text-sm font-medium text-slate-700 transition-colors hover:bg-white/80 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(Rt,{className:"h-4 w-4 text-brand"}),React.createElement("span",{className:"hidden sm:inline"},"Cart"),c>0&&React.createElement("span",{"aria-live":"polite",className:"absolute -top-1.5 -right-1.5 inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-1 text-[10px] font-semibold text-brand"},String(c))))),!o&&React.createElement("div",{className:"sm:hidden pb-0"},React.createElement("label",{className:"relative block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:d=>t(d.target.value),placeholder:"Search products\u2026",type:"search",className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-medium text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(he,{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})))))}function Pt(){const a=[{title:"1. Browse products",detail:"Search or tap a category to find what you need."},{title:"2. Open an item",detail:"Choose the variants and quantities, then add to cart."},{title:"3. Review the cart",detail:"Adjust quantities or notes before sending."},{title:"4. Send via WhatsApp",detail:"Use the cart button to submit the full list for confirmation."}];return React.createElement("section",{"aria-labelledby":"hero-title",className:"border-b border-[var(--surface-border)] bg-hero-gradient"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16"},React.createElement("div",{className:"grid gap-12 lg:grid-cols-[minmax(0,1fr)_420px] items-start"},React.createElement("div",{className:"space-y-6"},React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-1 text-[11px] font-medium uppercase tracking-[0.14em] text-slate-600"},"Odil Accessories"),React.createElement("h1",{id:"hero-title",className:"text-[clamp(30px,6vw,48px)] font-semibold leading-tight tracking-tight text-slate-900"},"Wholesale catalogue for partner shops"),React.createElement("p",{className:"max-w-2xl text-base sm:text-lg text-slate-600"},Ye),React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("a",{href:"#catalogue",className:"inline-flex items-center gap-2 rounded-full bg-brand px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Browse catalogue",React.createElement(kt,{className:"h-4 w-4"})),React.createElement("a",{href:`https://wa.me/${pe}`,target:"_blank",rel:"noreferrer noopener",className:"inline-flex items-center gap-2 rounded-full border border-[rgba(37,99,235,0.35)] bg-white/70 px-5 py-2.5 text-sm font-semibold text-slate-800 shadow-sm backdrop-blur transition hover:bg-white/90 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(Fe,{className:"h-4 w-4 text-emerald-500"}),"Chat on WhatsApp")),React.createElement("p",{className:"text-sm text-slate-500"},"Follow the steps on the right when you place an order.")),React.createElement("div",{className:"glass-card rounded-3xl p-8 soft-shadow"},React.createElement("div",{className:"space-y-5 text-sm text-slate-600"},React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Order steps"),React.createElement("ol",{className:"space-y-3 text-sm"},a.map(r=>React.createElement("li",{key:r.title,className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 px-4 py-3 backdrop-blur"},React.createElement("p",{className:"text-sm font-semibold text-slate-900"},r.title),React.createElement("p",{className:"text-xs text-slate-500 mt-1"},r.detail))))),React.createElement("div",{className:"mt-6 flex items-center justify-between rounded-2xl border border-[var(--surface-border)] bg-white/80 px-4 py-3 text-xs uppercase tracking-[0.18em] text-slate-500"},React.createElement("span",null,"Owner metrics snapshot"),React.createElement("span",{className:"font-semibold text-slate-800"},"Realtime"))))))}function Bt({active:a,setActive:r}){const t=ee(null),[o,s]=P({left:!1,right:!1});K(()=>{const m=()=>{const S=t.current;if(!S)return;const{scrollLeft:b,scrollWidth:i,clientWidth:n}=S,d=b>0,p=b+n<i-1;s(R=>R.left===d&&R.right===p?R:{left:d,right:p})};m();const x=t.current;if(x)return x.addEventListener("scroll",m,{passive:!0}),window.addEventListener("resize",m),()=>{x.removeEventListener("scroll",m),window.removeEventListener("resize",m)}},[]);const c=F("chip-scroll -mx-4",o.left&&"show-left",o.right&&"show-right");return React.createElement(React.Fragment,null,React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8","aria-label":"Categories"},React.createElement("div",{className:c},React.createElement("div",{ref:t,className:"chip-scroll-inner overflow-x-auto px-4"},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},ge.map(m=>React.createElement("button",{key:m,onClick:()=>r(m),"aria-pressed":a===m,className:F("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",a===m?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},m))))))))}function Mt({products:a,onOpen:r}){return React.createElement("section",{id:"catalogue","aria-labelledby":"catalogue-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("h2",{id:"catalogue-title",className:"sr-only"},"Catalogue"),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.map(t=>React.createElement(Ot,{key:t.id,product:t,onOpen:r}))))}function Ot({product:a,onOpen:r}){const[t,o]=P(Oe(a));return K(()=>{o(Oe(a))},[a.image,a.images,a.name]),React.createElement("article",{className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition duration-200 hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full overflow-hidden bg-slate-100"},React.createElement("img",{src:t,onError:()=>o(ae(a.name)),alt:a.name,className:"h-full w-full object-cover",loading:"lazy"})),React.createElement("div",{className:"flex flex-1 flex-col gap-4 p-5"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},a.name),React.createElement("p",{className:"mt-1 text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"},"SKU ",a.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-[11px]"},(a.specs||[]).slice(0,4).map(s=>React.createElement("span",{key:s,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},s))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},Z(a.price))),React.createElement("div",null,React.createElement("button",{type:"button",onClick:()=>r(a),className:"w-full rounded-full border border-[rgba(37,99,235,0.28)] bg-white/70 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand hover:text-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"View details"))))}function It({product:a,onClose:r,onAdd:t,cartItems:o}){const s=a&&a.__edit&&a.product?a.product:a;if(!s)return null;const c=Array.isArray(o)?o:[],m=J(()=>oe(s.inventory),[s.inventory]),x=J(()=>{const l={};return c.forEach(g=>{if(!g||g.id!==s.id)return;const w=g.inventoryKey||V(g.variants||{});l[w]=(l[w]||0)+Number(g.qty||0)}),l},[c,s.id]),S=ee(null);ve(!!s,S,r);const b=(()=>{const l=Array.isArray(s.images)&&s.images.length?s.images:s.image?[s.image]:[];return(l.length?l:[ae(s.name)]).map(g=>ce(g,s.name))})(),i=s.variants||{},n=Object.entries(i).filter(([,l])=>Array.isArray(l)&&l.length>0).map(([l])=>l),[d,p]=P({}),[R,O]=P({}),[U,h]=P({});K(()=>{if(!s)return;const l={};n.forEach(E=>{const k=i[E]||[];l[E]=k.length?[k[0]]:[]}),p(l);const g=(()=>{if(n.length===0)return[H];const E=[],k=(W,Y)=>{if(W===n.length){E.push(V(Y));return}const f=n[W];(l[f]||[]).forEach(e=>k(W+1,{...Y,[f]:e}))};return k(0,{}),E})(),w={};g.forEach(E=>{w[E]=0}),O(w)},[s]);const L=(l,g)=>p(w=>{const E=w[l]||[],k=E.includes(g)?E.filter(W=>W!==g):[...E,g];return{...w,[l]:k}}),_=l=>p(g=>({...g,[l]:[...i[l]||[]]})),B=l=>p(g=>({...g,[l]:[]})),D=(l,g)=>{const w=Math.max(0,Number(g)||0);h(E=>{const k=E[l];if(k===void 0)return E;if(w<k){const W={...E};return delete W[l],W}return E}),O(E=>({...E,[l]:w}))},C=J(()=>{if(n.length===0)return[{key:H,sel:{}}];if(n.some(w=>(d[w]||[]).length===0))return[];const l=[],g=(w,E)=>{if(w===n.length){l.push({key:V(E),sel:E});return}const k=n[w];(d[k]||[]).forEach(W=>g(w+1,{...E,[k]:W}))};return g(0,{}),l},[n,d]),z=()=>{let l=!1,g=!1;C.forEach(({key:w,sel:E})=>{const k=Number(R[w]||0);if(!(k>0))return;const W=m[w]!==void 0?m[w]:w===H?m[H]:void 0,Y=x[w]||0,f=typeof W=="number"?Math.max(W-Y,0):void 0,e=typeof f=="number"?Math.min(k,f):k;e>0?(t({id:s.id,name:s.name,sku:s.sku,price:s.price,qty:e,variants:E,inventoryKey:w}),l=!0,e<k&&(g=!0)):g=!0}),g&&alert("Some items were adjusted to match available stock."),l&&r()},$=J(()=>C.reduce((l,{key:g})=>{const w=Number(R[g]||0);if(!Number.isFinite(w)||w<=0)return l;const E=m[g]!==void 0?m[g]:g===H?m[H]:void 0,k=x[g]||0,W=typeof E=="number"?Math.max(E-k,0):void 0,Y=typeof W=="number"?Math.min(w,W):w;return Y>0?l+Y*s.price:l},0),[C,R,s.price,m,x]),I=C.every(({key:l})=>{const g=Number(R[l]||0);if(!(g>0))return!0;const w=m[l]!==void 0?m[l]:l===H?m[H]:void 0,E=x[l]||0,k=typeof w=="number"?Math.max(w-E,0):void 0;return!((typeof k=="number"?Math.min(g,k):g)>0)});return K(()=>{h(l=>{const g=new Set(C.map(({key:k})=>k));let w=!1;const E={};return Object.entries(l).forEach(([k,W])=>{g.has(k)?E[k]=W:w=!0}),w?E:l})},[C]),K(()=>{h({})},[s.id]),React.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":`product-title-${s.id}`,className:"fixed inset-0 z-50 flex items-stretch sm:items-center justify-center bg-black/40 p-0 sm:p-6",onClick:r,onTouchMove:l=>{l.target===l.currentTarget&&l.preventDefault()},onWheel:l=>{l.target===l.currentTarget&&l.preventDefault()}},React.createElement("div",{ref:S,tabIndex:-1,className:"w-full h-full sm:h-auto sm:max-w-3xl rounded-none sm:rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain overflow-y-auto max-h-none sm:max-h-[90vh]",style:{touchAction:"pan-y"},onClick:l=>l.stopPropagation()},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:`product-title-${s.id}`,className:"text-lg font-semibold text-slate-900"},s.name),React.createElement("button",{onClick:r,className:"rounded-full border border-transparent p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close"},React.createElement(Ge,{className:"h-5 w-5"}))),React.createElement("div",{className:"grid gap-6 p-5 lg:grid-cols-[minmax(0,1fr)_260px]"},React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl border border-[var(--surface-border)] bg-slate-100"},React.createElement("img",{src:b[0],onError:l=>{l.currentTarget.src=ae(s.name)},alt:`${s.name} \u2013 photo`,className:"h-full w-full object-cover"})),s.description&&React.createElement("p",{className:"text-sm text-slate-600"},s.description),n.map(l=>{const g=i[l]||[],w=d[l]||[],E=l.toLowerCase().includes("color")||l==="Color";return React.createElement("div",{key:l,className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},l),g.length?React.createElement("div",{className:"flex items-center gap-2 text-xs text-slate-500"},React.createElement("button",{type:"button",onClick:()=>_(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:()=>B(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"Clear")):null),React.createElement("div",{className:"max-h-32 overflow-auto rounded-xl border border-[var(--surface-border)] bg-white/70 p-2"},React.createElement("div",{className:"flex flex-wrap gap-2 text-xs"},g.length===0?React.createElement("p",{className:"text-slate-500"},"No options"):g.map(k=>{const W=w.includes(k);return React.createElement("button",{type:"button",key:k,onClick:()=>L(l,k),className:F("inline-flex items-center gap-1 rounded-full border px-3 py-1 font-medium transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",W?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},E?React.createElement(le,{name:k}):null,k)}))))}),React.createElement("div",{className:"space-y-3","aria-label":"Quantities"},C.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"Select at least one option."):C.map(({key:l,sel:g})=>{const w=m[l]!==void 0?m[l]:l===H?m[H]:void 0,E=x[l]||0,k=typeof w=="number"?Math.max(w-E,0):void 0,W=typeof k=="number"&&k<=0,Y=U[l];return React.createElement("div",{key:l,className:F("rounded-2xl border px-3 py-3 text-sm shadow-sm backdrop-blur sm:flex sm:items-center sm:justify-between",W?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/85 text-slate-700")},React.createElement("div",{className:"space-y-1 text-sm"},Object.entries(g).map(([f,e],v)=>React.createElement("span",{key:`${f}-${e}`},v>0?" \xB7 ":"",f==="Color"?React.createElement("span",{className:"inline-flex items-center gap-1"},React.createElement(le,{name:e}),e):React.createElement("span",{className:"font-medium text-slate-900"},e))),Object.keys(g).length===0&&React.createElement("span",{className:"font-medium text-slate-900"},"Quantity"),typeof w=="number"?React.createElement("p",{className:"text-xs text-slate-500"},`Remaining: ${Math.max(w-E,0)}${E>0?` (of ${w})`:""}`):React.createElement("p",{className:"text-xs text-slate-500"},"No stock limit")),React.createElement("div",{className:"mt-2 sm:mt-0"},React.createElement(Ke,{value:Number(R[l]||0),onChange:f=>D(l,f),min:0,max:typeof k=="number"?k:void 0,onLimit:f=>{typeof f=="number"&&Number.isFinite(f)&&h(e=>({...e,[l]:f}))}})),Y!==void 0?React.createElement("p",{className:"mt-2 text-xs font-medium text-rose-600 sm:ml-3 sm:mt-0 sm:text-right"},`Only ${Y} available for this selection.`):null)}))),React.createElement("aside",{className:"glass-card rounded-3xl space-y-5 p-5"},React.createElement("div",{className:"space-y-2 text-sm"},React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Unit price"),React.createElement("span",{className:"font-semibold text-slate-900"},Z(s.price))),React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Selections"),React.createElement("span",{className:"font-medium text-slate-800"},C.length))),React.createElement("div",{className:"flex items-center justify-between rounded-2xl border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-4 py-3 text-sm font-medium text-brand"},React.createElement("span",{className:"uppercase tracking-[0.18em]"},"Line total"),React.createElement("span",{className:"text-base font-semibold text-brand"},Z($))),React.createElement("p",{className:"text-xs text-slate-500"},"Add items to the cart and send the final list to WhatsApp when you are ready."),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{disabled:I,onClick:z,className:F("w-full rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",I?"pointer-events-none opacity-50":"hover:bg-brand-muted")},"Add to cart"),React.createElement("button",{onClick:r,className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Cancel"))))))}function Ke({id:a,value:r,onChange:t,min:o=0,max:s,onLimit:c}){const m=i=>{typeof s=="number"&&Number.isFinite(s)&&typeof c=="function"&&i>s&&c(s)},x=(i,n)=>{m(typeof n=="number"?n:i);let d=Math.max(o,i);return typeof s=="number"&&Number.isFinite(s)&&(d=Math.min(s,d)),d},S=Number(r)||0,b=typeof s=="number"&&Number.isFinite(s)&&S>=s;return React.createElement("div",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 shadow-sm backdrop-blur",role:"group","aria-label":"Quantity"},React.createElement("button",{onClick:()=>t(x((Number(r)||0)-1,(Number(r)||0)-1)),className:"rounded-l-full px-3 py-1.5 text-slate-700 transition hover:bg-brand-soft focus:outline-none focus-visible:outline-2 focus-visible:outline-brand touch-manipulation select-none","aria-label":"Decrease quantity"},"\u2212"),React.createElement("input",{id:a,inputMode:"numeric",pattern:"[0-9]*",value:String(r),onChange:i=>{const n=Number(i.target.value.replace(/[^0-9]/g,"")),d=Number.isFinite(n)?n:o;t(Number.isFinite(n)?x(d,d):o)},className:"w-14 appearance-none border-x border-[var(--surface-border)] bg-transparent px-2 py-1.5 text-center text-base sm:text-sm text-slate-900 focus:outline-none"}),React.createElement("button",{onClick:()=>t(x((Number(r)||0)+1,(Number(r)||0)+1)),className:F("rounded-r-full px-3 py-1.5 touch-manipulation select-none transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",b?"cursor-not-allowed text-slate-300":"text-slate-700 hover:bg-brand-soft"),"aria-label":"Increase quantity",disabled:b},"+"))}async function _t(a){var r;try{if((r=navigator.clipboard)!=null&&r.writeText)return await navigator.clipboard.writeText(a),!0}catch(t){}try{const t=document.createElement("textarea");return t.value=a,t.setAttribute("readonly",""),t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}catch(t){return!1}}function Wt({open:a,onClose:r,cart:t,productLookup:o}){const s=ee(null);ve(a,s,r);const c=yt(),m=J(()=>Lt(t.items,t.subtotal,t.notes),[t.items,t.subtotal,t.notes]),x=t.items.some(p=>Number(p.qty)>0),S=`https://wa.me/${pe}?text=${encodeURIComponent(m)}`,b=`whatsapp://send?phone=${pe}&text=${encodeURIComponent(m)}`,i=/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent),[n,d]=P({});return K(()=>{d(p=>{const R=new Set((t.items||[]).map(h=>{if(!h)return null;const L=h.inventoryKey||V(h.variants||{});return`${h.id||""}::${L}`}).filter(Boolean));let O=!1;const U={};return Object.entries(p).forEach(([h,L])=>{R.has(h)?U[h]=L:O=!0}),O?U:p})},[t.items]),React.createElement("div",{"aria-live":"polite"},React.createElement("div",{className:F("fixed inset-0 z-40 bg-black/40 transition-opacity",a?"opacity-100":"pointer-events-none opacity-0"),onClick:r,onTouchMove:p=>{p.preventDefault()},onTouchStart:p=>{p.preventDefault()},onWheel:p=>{p.preventDefault()},"aria-hidden":"true"}),React.createElement("aside",{role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",className:F("fixed right-0 top-0 z-50 h-full w-full max-w-md transform border-l border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain",c?"transition-none":"transition-transform duration-200 ease-out",a?"translate-x-0":"translate-x-full")},React.createElement("div",{ref:s,className:"flex h-full flex-col"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:"cart-title",className:"text-lg font-semibold text-slate-900"},"Your cart"),React.createElement("button",{onClick:r,className:"rounded-full p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close cart"},React.createElement(Ge,{className:"h-5 w-5"}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-4",style:{touchAction:"pan-y"}},t.items.length===0?React.createElement("p",{className:"text-sm text-slate-500"},"Your cart is empty."):React.createElement("ul",{className:"space-y-3"},t.items.map((p,R)=>{const O=o&&typeof o.get=="function"?o.get(p.id):void 0,U=O?oe(O.inventory):{},h=p.inventoryKey||V(p.variants||{}),L=U[h]!==void 0?U[h]:h===H?U[H]:void 0;let _=0;t.items.forEach((I,l)=>{if(l===R||!I||I.id!==p.id)return;(I.inventoryKey||V(I.variants||{}))===h&&(_+=Number(I.qty||0))});const B=typeof L=="number"?Math.max(L-_,0):void 0,D=typeof B=="number"&&p.qty>B,C=typeof B=="number"?`Available: ${B}`:null,z=`${p.id||""}::${h}`,$=n[z];return React.createElement("li",{key:R,className:F("rounded-2xl border p-3 shadow-sm backdrop-blur transition",D?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/80 text-slate-700")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"font-semibold text-slate-900"},p.name),React.createElement("p",{className:"text-xs text-slate-500"},"SKU: ",p.sku),p.variants&&Object.keys(p.variants).length>0&&React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},Object.entries(p.variants).map(([I,l])=>React.createElement("span",{key:I,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2 py-0.5 text-xs font-medium text-slate-600"},I==="Color"?React.createElement(React.Fragment,null,React.createElement(le,{name:l}),`${I}: ${l}`):`${I}: ${l}`))),C&&React.createElement("p",{className:"mt-1 text-xs text-slate-500"},C),$!==void 0?React.createElement("p",{className:"mt-1 text-xs font-medium text-rose-600"},`Only ${$} available for this selection.`):null),React.createElement("button",{onClick:()=>t.removeIndex(R),className:"rounded-full p-1.5 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":`Remove ${p.name}`},React.createElement(At,{className:"h-4 w-4 text-slate-500"}))),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement(Ke,{value:p.qty,onChange:I=>{const l=typeof B=="number"?Math.min(I,B):I;t.updateQty(R,l),d(g=>{const w=g[z];if(w===void 0)return g;if(l<w){const E={...g};return delete E[z],E}return g})},min:0,max:typeof B=="number"?B:void 0,onLimit:I=>{typeof I=="number"&&Number.isFinite(I)&&d(l=>({...l,[z]:I}))}}),React.createElement("div",{className:"text-sm text-slate-600"},Z(p.price)," \xD7 ",p.qty," = ",React.createElement("span",{className:"font-semibold text-slate-900"},Z(p.price*p.qty)))))}))),React.createElement("div",{className:"border-t border-[var(--surface-border)] bg-white/60 p-4 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between text-sm text-slate-600"},React.createElement("span",null,"Subtotal"),React.createElement("span",{className:"font-semibold text-slate-900"},Z(t.subtotal))),React.createElement("label",{className:"mt-3 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Notes"),React.createElement("textarea",{value:t.notes,onChange:p=>t.setNotes(p.target.value),rows:2,className:"w-full resize-none rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",placeholder:"Delivery preferences, color mix, etc."})),React.createElement("div",{className:"mt-3 flex gap-3"},React.createElement("button",{onClick:t.clear,className:"flex-1 rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Clear cart"),React.createElement("button",{type:"button",onClick:async()=>{if(!x){alert("Add at least one product before sending an order.");return}if(t.items.filter((h,L)=>{const _=o&&typeof o.get=="function"?o.get(h.id):void 0,B=_?oe(_.inventory):{},D=h.inventoryKey||V(h.variants||{}),C=B[D]!==void 0?B[D]:D===H?B[H]:void 0;if(typeof C!="number")return!1;let z=0;t.items.forEach((I,l)=>{if(l===L||!I||I.id!==h.id)return;(I.inventoryKey||V(I.variants||{}))===D&&(z+=Number(I.qty||0))});const $=Math.max(C-z,0);return h.qty>$}).length>0){alert("One or more items exceed available stock. Please adjust the quantities before sending the order.");return}try{await me("createOrder",{currency:_e,subtotal_cents:Math.round(t.subtotal*100),notes:t.notes||"",items:t.items.map((h,L)=>({product_id:h.id,sku:h.sku,name:h.name,quantity:Number(h.qty)||0,unit_price_cents:Math.round(Number(h.price||0)*100),subtotal_cents:Math.round(Number(h.price||0)*Number(h.qty||0)*100),variants:h.variants||{},inventory_key:h.inventoryKey||V(h.variants||{})}))})}catch(h){console.error("Failed to record order",h)}try{await _t(m),alert("\u2705 Your list is copied! If WhatsApp doesn't open, you can paste it manually.")}catch(h){alert("\u{1F4CB} Please copy your order manually if WhatsApp doesn't open automatically.")}let R=!1;const O=()=>{R||(R=!0,t.clear(),t.setNotes(""))},U=()=>O();if(window.addEventListener("pagehide",U,{once:!0}),document.addEventListener("visibilitychange",function h(){document.hidden&&(O(),document.removeEventListener("visibilitychange",h))},{once:!0}),i)O(),window.location.href=b,setTimeout(()=>{try{window.open(S,"_blank","noopener,noreferrer")}catch(h){}},800);else{const h=window.open(S,"_blank","noopener,noreferrer");setTimeout(O,500)}},className:F("flex-1 inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",x?"bg-brand hover:bg-brand-muted":"pointer-events-none bg-[rgba(37,99,235,0.28)] text-white/70")},"Send via WhatsApp",React.createElement(Fe,{className:"h-4 w-4 text-white"})))))))}function Lt(a,r,t){const o=(a||[]).filter(c=>Number(c.qty)>0);let s=`\u{1F6D2} *Order Request*

`;return o.forEach(c=>{s+=`\u2022 ${c.name} (SKU: ${c.sku})
`,c.variants&&Object.keys(c.variants).length>0&&(s+=`  Variants: ${Object.entries(c.variants).map(([m,x])=>`${m}: ${x}`).join(", ")}
`),s+=`  Qty: ${c.qty} \xD7 ${Z(c.price)} = ${Z(c.price*c.qty)}

`}),s+=`*Subtotal: ${Z(r)}*

`,(t||"").trim()&&(s+=`*Notes:* ${t.trim()}

`),s+="Please confirm availability and pricing. Thank you!",s}function Tt({addProduct:a,products:r,removeProduct:t,onNotify:o}){const[s,c]=P("Phone Screens"),[m,x]=P("");K(()=>{x(e=>{const v=new Set(ge),N=(e||"").trim(),A=v.has(N.replace(" \u2014",""))||N.endsWith(" \u2014");return!N||A?`${s} \u2014 `:e})},[s]);const[S,b]=P(""),[i,n]=P(""),[d,p]=P(""),[R,O]=P([]),[U,h]=P([]),[L,_]=P(null),[B,D]=P(!1),[C,z]=P({}),$=(e,v)=>{h([]),_(null),z(N=>({...N,[e]:v}))},I=(e,v)=>z(N=>{h([]),_(null);const A=Array.isArray(N[e])?N[e]:[];return{...N,[e]:A.includes(v)?A.filter(u=>u!==v):[...A,v]}});function l(e){h([]),_(null);const v=Array.from(e.target.files||[]);if(!v.length)return;const N=v.map(A=>new Promise(u=>{const y=new FileReader;y.onload=()=>u(String(y.result||"")),y.readAsDataURL(A)}));Promise.all(N).then(A=>O(u=>[...u,...A]))}const g=e=>Array.isArray(e)&&e.length?e[0]:e!=null?e:"",w={"Phone Screens":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"display",label:"Display type/quality",type:"select",options:["OLED \u2013 OEM","OLED \u2013 AAA","LCD \u2013 OEM","LCD \u2013 AAA"]},{key:"frame",label:"Frame",type:"select",options:["With frame","Without frame"]}],also:[{key:"frontColor",label:"Front color",type:"select",options:["Black","White"]},{key:"retention",label:"True Tone/Face ID retention",type:"checkbox"}],optional:[{key:"adhesive",label:"Pre-installed adhesive / waterproof gasket",type:"checkbox"}],name:e=>`Screen \u2014 ${g(e.models)} ${e.display?`${String(e.display).split(" ")[0]}`:""}`.trim(),specs:e=>[e.display,e.frame,e.frontColor].filter(Boolean)},"Back Glass":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"colors",label:"Colors / finish",type:"multiselect",options:ne}],also:[{key:"adhesive",label:"Adhesive pre-installed",type:"checkbox"},{key:"rings",label:"With camera rings",type:"checkbox"}],optional:[{key:"grade",label:"Quality grade",type:"select",options:ke}],name:e=>`Back Glass \u2014 ${g(e.models)}`.trim(),specs:e=>[g(e.colors)||null,e.grade,e.adhesive?"Adhesive":null,e.rings?"Camera rings":null].filter(Boolean)},"Power Banks":{must:[{key:"capacity",label:"Capacity",type:"select",options:ht},{key:"ports",label:"Output ports",type:"select",options:Se}],also:[{key:"standard",label:"Standard",type:"select",options:re}],optional:[{key:"colour",label:"Colour",type:"select",options:ne}],name:e=>`Power bank \u2014 ${e.capacity||""}`.trim(),specs:e=>[e.capacity,e.ports,e.standard].filter(Boolean)},"Screen Protectors":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:st},{key:"pack",label:"Pack",type:"select",options:ot}],also:[{key:"finish",label:"Finish",type:"select",options:nt},{key:"coverage",label:"Coverage",type:"select",options:lt}],optional:[],name:e=>`Protector \u2014 ${g(e.models)} ${e.material?`(${e.material})`:""}`.trim(),specs:e=>[e.material,e.finish,e.coverage].filter(Boolean)},Batteries:{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"grade",label:"Grade",type:"select",options:ke}],also:[],optional:[{key:"capacity",label:"Capacity (mAh)",type:"text",placeholder:"e.g. 3000"}],name:e=>`Battery \u2014 ${g(e.models)}`.trim(),specs:e=>[e.grade,e.capacity].filter(Boolean)},"Mobile Phones":{must:[{key:"model",label:"Model",type:"text",placeholder:"e.g., iPhone 13"},{key:"cond",label:"Condition/grade",type:"select",options:Ce},{key:"sim",label:"SIM",type:"select",options:pt}],also:[{key:"connect",label:"Connectivity",type:"select",options:bt},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:Pe},{key:"ram",label:"RAM",type:"multiselect",options:Be},{key:"color",label:"Color",type:"text"},{key:"inbox",label:"Accessories in box",type:"text",placeholder:"Cable, charger"}],name:e=>`${e.model||""} ${e.cond||""}`.trim(),specs:e=>[Array.isArray(e.storage)&&e.storage[0]||null,Array.isArray(e.ram)&&e.ram[0]||null,e.cond,e.sim,e.connect].filter(Boolean)},Tablets:{must:[{key:"model",label:"Model",type:"text",placeholder:"iPad 10th Gen"},{key:"conn",label:"Connectivity",type:"select",options:ft}],also:[{key:"screen",label:"Screen size",type:"text",placeholder:'10.9"'},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:Pe},{key:"ram",label:"RAM",type:"multiselect",options:Be},{key:"cond",label:"Condition/grade",type:"select",options:Ce},{key:"color",label:"Color",type:"text"},{key:"compat",label:"Pencil/keyboard compatibility",type:"text"}],name:e=>`${e.model||""} ${e.conn||""}`.trim(),specs:e=>[Array.isArray(e.storage)&&e.storage[0]||null,Array.isArray(e.ram)&&e.ram[0]||null,e.conn,e.screen,e.cond].filter(Boolean)},"Phone Cases":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:rt}],also:[{key:"color",label:"Color",type:"multiselect",options:ne}],optional:[{key:"pattern",label:"Pattern / style",type:"text"}],name:e=>`Case \u2014 ${g(e.models)} ${e.material?`(${e.material})`:""}`.trim(),specs:e=>[e.material,g(e.color)||null].filter(Boolean)},Cables:{must:[{key:"connector",label:"Connector",type:"select",options:Ae},{key:"length",label:"Length",type:"select",options:$e}],also:[{key:"rating",label:"Power rating",type:"select",options:ct},{key:"durability",label:"Durability",type:"select",options:dt}],optional:[{key:"cert",label:"Certs",type:"select",options:it}],name:e=>`Cable \u2014 ${e.connector||""} ${e.length?`(${e.length})`:""}`.trim(),specs:e=>[e.connector,e.length,e.rating].filter(Boolean)},Chargers:{must:[{key:"wattage",label:"Wattage",type:"select",options:mt||["20W","30W","45W","65W"]},{key:"ports",label:"Ports",type:"select",options:Se}],also:[{key:"standard",label:"Standard",type:"select",options:re},{key:"plug",label:"Plug type",type:"select",options:ut}],optional:[],name:e=>`Charger \u2014 ${e.wattage||""}`.trim(),specs:e=>[e.wattage,e.ports].filter(Boolean)},Earphones:{must:[{key:"type",label:"Type",type:"select",options:["Wired","TWS"]}],also:[{key:"connector",label:"Connector / Standard",type:"select",options:[...Ae,...re]}],optional:[{key:"color",label:"Color",type:"select",options:ne}],name:e=>`Earphones \u2014 ${e.type||""}`.trim(),specs:e=>[e.type,e.connector].filter(Boolean)},"Charging Ports":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"type",label:"Port type",type:"select",options:["USB-C","Lightning","Micro-USB"]}],also:[],optional:[{key:"solderRequired",label:"Solder required",type:"checkbox"}],name:e=>`Charging port \u2014 ${g(e.models)}`.trim(),specs:e=>[e.type,e.solderRequired?"Solder":null].filter(Boolean)},"Face ID":{must:[{key:"models",label:"Phone models",type:"phoneModels",allowedBrands:["iPhone"]},{key:"service",label:"Service",type:"select",options:["Repair","Replace","Calibration"]}],also:[],optional:[],name:e=>`Face ID \u2014 ${g(e.models)}`.trim(),specs:e=>[e.service].filter(Boolean)}};K(()=>{const e=w[s]||{must:[],also:[],optional:[]},v={},N=A=>A.forEach(u=>{u.type==="select"&&(v[u.key]=""),u.type==="number"&&(v[u.key]=""),u.type==="text"&&(v[u.key]=""),u.type==="checkbox"&&(v[u.key]=!1),u.type==="multiselect"&&(v[u.key]=[])});N(e.must),N(e.also),N(e.optional),z(v)},[s]);const E=({f:e})=>{var A,u;if(!e)return null;const v="mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500",N="w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand";if(e.type==="select")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:v},e.label),React.createElement("select",{value:(A=C[e.key])!=null?A:"",onChange:y=>$(e.key,y.target.value),className:N},(e.options||[]).map(y=>React.createElement("option",{key:y,value:y},y))));if(e.type==="text"||e.type==="number")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:v},e.label),React.createElement("input",{type:e.type,value:(u=C[e.key])!=null?u:"",onChange:y=>$(e.key,e.type==="number"?y.target.value.replace(/[^0-9.]/g,""):y.target.value),placeholder:e.placeholder||"",className:N}));if(e.type==="checkbox")return React.createElement("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-2 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("input",{type:"checkbox",checked:!!C[e.key],onChange:y=>$(e.key,y.target.checked),className:"h-4 w-4 rounded border-[var(--surface-border)] text-brand focus:ring-brand"}),React.createElement("span",null,e.label));if(e.type==="multiselect"){const y=e.options||[],M=Array.isArray(C[e.key])?C[e.key]:[];return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},e.label),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:()=>$(e.key,y),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>$(e.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},y.map(j=>{const te=M.includes(j),G=xe[j]!==void 0||/color/i.test(e.label);return React.createElement("button",{type:"button",key:j,onClick:()=>I(e.key,j),className:F("inline-flex items-center gap-1 rounded-full border px-2.5 py-1 font-medium transition",te?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},G?React.createElement(React.Fragment,null,React.createElement(le,{name:j}),j):j)})))}if(e.type==="phoneModels"){const y=`${e.key}Brand`,M=C[y]||(e.allowedBrands?e.allowedBrands[0]:"iPhone"),j=at[M]||[],te=Array.isArray(C[e.key])?C[e.key]:[],G=T=>{$(y,T),$(e.key,[])};return React.createElement("div",{className:"space-y-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},(e.allowedBrands||tt).map(T=>React.createElement("button",{type:"button",key:T,onClick:()=>G(T),className:F("rounded-full border px-2.5 py-1 font-medium transition",(C[`${e.key}Brand`]||(e.allowedBrands?e.allowedBrands[0]:"iPhone"))===T?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},T))),React.createElement("div",{className:"flex items-center justify-between text-xs text-slate-500"},React.createElement("span",{className:"font-semibold text-slate-800"},`${M} models`),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>$(e.key,j),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>$(e.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},j.map(T=>{const q=te.includes(T);return React.createElement("button",{type:"button",key:T,onClick:()=>{const ie=Array.isArray(C[e.key])?C[e.key]:[];$(e.key,q?ie.filter(qe=>qe!==T):[...ie,T])},className:F("rounded-full border px-2.5 py-1 font-medium transition",q?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},T)})))}return null},k=()=>{const e=w[s]||{must:[],also:[],optional:[],name:null,specs:null},v=e.name&&e.name(C)||`${s} item`,N=m.trim()||v,A={},u=(G,T)=>{if(T==="models")return"Model";const q=String(G).toLowerCase().trim();return q==="color"||q==="colors"||q==="colour"?"Color":G.trim()},y=(G,T,q)=>{if(q==null||q===""||Array.isArray(q)&&q.length===0)return;const ie=u(G,T);A[ie]=Array.isArray(q)?q:[String(q)]};[...e.must||[],...e.also||[],...e.optional||[]].forEach(G=>{const T=C[G.key];G.type==="checkbox"?T&&y(G.label,G.key,"Yes"):y(G.label,G.key,T)}),C.modelsBrand&&y("Phone","modelsBrand",C.modelsBrand),Object.keys(A).forEach(G=>{const T=Array.isArray(A[G])?A[G].map(q=>String(q).trim()).filter(Boolean):[];T.length?A[G]=Array.from(new Set(T)):delete A[G]});const M=(e.specs&&e.specs(C)||[]).filter(Boolean).slice(0,6),j=Array.from(new Set((R||[]).filter(Boolean))),te={id:`owner-${Date.now()}`,name:N,sku:S.trim()||`SKU-${(Math.random()*1e6|0).toString(36)}`,category:s,price:Number(i)||0,description:d.trim(),image:j[0]||void 0,images:j.length?j:void 0,specs:M,variants:A};return Q(te)},W=()=>{var y;const e=[],v=w[s]||{must:[]},N=Number(i);(!Number.isFinite(N)||N<=0)&&e.push("Price must be greater than 0");const A=(v.must||[]).find(M=>M.type==="phoneModels");if(A){const M=C[A.key];(!Array.isArray(M)||M.length===0)&&e.push("Please select at least one model")}const u=(v.must||[]).find(M=>M.key==="model");return u&&(String((y=C[u.key])!=null?y:"").trim()||e.push("Model is required")),e},Y=async()=>{const e=W();if(e.length){h(e),_(null);return}const v=k();if(v){D(!0);try{const N=await a(v),A=!!(N&&N.persisted);h([]),A?_({type:"success",message:"Product added to catalogue."}):(_({type:"warning",message:"Product saved locally. Supabase sync pending."}),o==null||o("warning","Supabase connection unavailable. Product stored locally until sync succeeds.")),x(`${s} \u2014 `),b(""),n(""),p(""),O([]),z({})}catch(N){console.error("Failed to add product:",N),_({type:"error",message:"Could not save product. Check your connection and try again."}),o==null||o("error","Could not add product. Check your connection and try again.")}finally{D(!1)}}},f=w[s]||{must:[],also:[],optional:[]};return React.createElement("section",{"aria-labelledby":"owner-title",className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8"},React.createElement("div",{className:"glass-card space-y-6 rounded-3xl p-6 sm:p-8"},React.createElement("div",{className:"space-y-2"},React.createElement("h2",{id:"owner-title",className:"text-2xl font-semibold text-slate-900"},"Owner \u2014 Add products"),React.createElement("p",{className:"text-sm text-slate-600"},"Only essentials. Fields shift by category. Keep data clean; the catalogue updates instantly.")),L&&React.createElement("div",{className:F("rounded-2xl border px-4 py-3 text-sm shadow-sm",L.type==="error"?"border-rose-200 bg-rose-50/80 text-rose-700":L.type==="warning"?"border-amber-200 bg-amber-50/80 text-amber-700":"border-emerald-200 bg-emerald-50/80 text-emerald-700")},L.message),U.length>0&&React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/80 px-4 py-3 text-sm text-amber-700 shadow-sm"},React.createElement("p",{className:"font-semibold"},"Please fix the following:"),React.createElement("ul",{className:"mt-1 list-disc space-y-0.5 pl-4"},U.map((e,v)=>React.createElement("li",{key:v},e)))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Essentials"),React.createElement("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2"},React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Category"),React.createElement("select",{value:s,onChange:e=>{h([]),_(null),c(e.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},ge.filter(e=>e!=="All").map(e=>React.createElement("option",{key:e,value:e},e)))),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:i,onChange:e=>{h([]),_(null),n(e.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Name"),React.createElement("input",{value:m,onChange:e=>{h([]),_(null),x(e.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"SKU"),React.createElement("input",{value:S,onChange:e=>{h([]),_(null),b(e.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"md:col-span-2 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Short description"),React.createElement("textarea",{rows:3,value:d,onChange:e=>{h([]),_(null),p(e.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:l}),R.length>0&&React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},R.map((e,v)=>React.createElement("div",{key:v,className:"relative"},React.createElement("img",{src:e,alt:`preview ${v+1}`,className:"h-20 w-20 overflow-hidden rounded-xl border border-[var(--surface-border)] object-cover"}),React.createElement("button",{type:"button",onClick:()=>{h([]),_(null),O(N=>N.filter((A,u)=>u!==v))},className:"absolute -right-1 -top-1 rounded-full border border-[var(--surface-border)] bg-white px-1 text-xs shadow","aria-label":`Remove photo ${v+1}`},"\xD7"))))))),React.createElement("div",{className:"space-y-3"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Variants & Specs"),React.createElement("div",{className:"grid gap-3 md:grid-cols-2"},[...f.must||[],...f.also||[],...f.optional||[]].map(e=>React.createElement(E,{key:e.key,f:e})))),React.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},React.createElement("button",{type:"button",onClick:Y,disabled:B,className:F("inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",B?"bg-brand/50 cursor-not-allowed opacity-70":"bg-brand hover:bg-brand-muted")},B?"Saving...":"Add Product"),React.createElement("button",{type:"button",onClick:()=>{var e;return(e=window.__setOwnerManage)==null?void 0:e.call(window,!0)},className:"inline-flex items-center justify-center rounded-full border border-[var(--surface-border)] bg-white/70 px-6 py-2 text-sm font-semibold text-slate-800 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Manage catalogue"))))}function Ie({label:a,options:r,value:t,onChange:o}){const s=()=>o(r),c=()=>o([]),m=x=>o(t.includes(x)?t.filter(S=>S!==x):[...t,x]);return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},a),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:s,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:c,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},r.map(x=>{const S=t.includes(x),b=/color/i.test(a)||xe[x]!==void 0;return React.createElement("button",{type:"button",key:x,onClick:()=>m(x),className:F("rounded-full border px-2 py-1 text-xs",S?"border-transparent bg-brand text-white":"border-[var(--surface-border)] bg-white text-slate-700")},b?React.createElement(React.Fragment,null,React.createElement(le,{name:x})," ",x):x)})))}function jt({open:a,onClose:r,product:t,onSave:o,onHide:s,onDelete:c}){var w,E,k,W,Y;const m=ee(null);ve(!!a,m,r);const[x,S]=P((t==null?void 0:t.name)||""),[b,i]=P((t==null?void 0:t.sku)||""),[n,d]=P(String((w=t==null?void 0:t.price)!=null?w:0)),[p,R]=P((t==null?void 0:t.description)||""),[O,U]=P(()=>[...Array.isArray(t==null?void 0:t.images)&&t.images.length?t.images:t!=null&&t.image?[t.image]:[]]),[h,L]=P(0),[_,B]=P(()=>{const f={...(t==null?void 0:t.variants)||{}};return f.Color&&!Array.isArray(f.Color)&&(f.Color=[f.Color]),f.Model&&!Array.isArray(f.Model)&&(f.Model=[f.Model]),f});K(()=>{var e;if(!a)return;S((t==null?void 0:t.name)||""),i((t==null?void 0:t.sku)||""),d(String((e=t==null?void 0:t.price)!=null?e:0)),R((t==null?void 0:t.description)||"");const f=Array.isArray(t==null?void 0:t.images)&&t.images.length?t.images:t!=null&&t.image?[t.image]:[];U([...f]),L(0),B({...(t==null?void 0:t.variants)||{}})},[a,t]);const D=f=>{const e=Array.from(f.target.files||[]);if(!e.length)return;const v=e.map(N=>new Promise(A=>{const u=new FileReader;u.onload=()=>A(String(u.result||"")),u.readAsDataURL(N)}));Promise.all(v).then(N=>U(A=>[...A,...N]))},C=()=>L(f=>(f-1+O.length)%O.length),z=()=>L(f=>(f+1)%O.length),$=()=>{const f=Object.fromEntries(Object.entries(_||{}).map(([u,y])=>{const M=Array.isArray(y)?y.map(j=>String(j).trim()).filter(Boolean):[];return[u,Array.from(new Set(M))]}).filter(([,u])=>Array.isArray(u)&&u.length)),e=x.trim()||t.name,v=b.trim()||t.sku,N=Number(n),A=Q({...t||{},name:e,sku:v,price:Number.isFinite(N)&&N>0?N:Number(t.price)||0,description:p,images:O.length?O:void 0,image:O[0]||void 0,variants:f});o(A,t==null?void 0:t.id),r()},I=!!((k=(E=t==null?void 0:t.id)==null?void 0:E.startsWith)!=null&&k.call(E,"owner-")),l=Array.from(new Set([..._.Model||[]])),g=Array.from(new Set([..._.Color||[]]));return!a||!t?null:React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-0 sm:p-6",role:"dialog","aria-modal":"true"},React.createElement("div",{ref:m,className:"w-full sm:max-w-3xl rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none max-h-[90vh] overflow-y-auto"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{className:"text-lg font-semibold text-slate-900"},"Edit product"),React.createElement("div",{className:"flex items-center gap-2"},!I&&React.createElement("button",{onClick:()=>{s(t.id),r()},className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Hide base"),I&&React.createElement("button",{onClick:()=>{c(t.id),r()},className:"rounded-full border border-rose-300 bg-rose-50/80 px-3.5 py-1.5 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-rose-400"},"Delete"),React.createElement("button",{onClick:r,className:"rounded-full px-3.5 py-1.5 text-sm font-semibold text-slate-500 transition hover:bg-white/70 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Close"))),React.createElement("div",{className:"grid gap-4 p-4 sm:grid-cols-2"},React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-xl bg-gray-100"},React.createElement("img",{src:ce(O[h]||"",t.name),onError:f=>{f.currentTarget.src=ae(t.name)},alt:`${t.name} \u2013 photo ${h+1} of ${O.length}`,className:"h-full w-full object-cover"}),O.length>1&&React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:C,className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Previous photo"},"\u2039"),React.createElement("button",{type:"button",onClick:z,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Next photo"},"\u203A"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"text-xs text-slate-700 inline-flex items-center gap-2"},React.createElement("span",{className:"rounded-full border border-[var(--surface-border)] bg-white px-2 py-1"},"Add photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:D,className:"sr-only"}))),O.length>0&&React.createElement("div",{className:"flex gap-2 overflow-x-auto"},O.map((f,e)=>React.createElement("div",{key:e,className:F("relative h-14 w-20 flex-shrink-0 overflow-hidden rounded-md border",e===h?"border-brand":"border-[var(--surface-border)]")},React.createElement("button",{type:"button",onClick:()=>L(e),className:"absolute inset-0"},React.createElement("img",{src:ce(f,t.name),alt:"",className:"h-full w-full object-cover"})),React.createElement("button",{type:"button",onClick:()=>U(v=>v.filter((N,A)=>A!==e)),className:"absolute -right-1 -top-1 rounded-full bg-white border p-0.5 shadow","aria-label":`Remove photo ${e+1}`},"\xD7"))))),React.createElement("div",{className:"flex min-w-0 flex-col gap-3"},React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Name"),React.createElement("input",{value:x,onChange:f=>S(f.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"SKU"),React.createElement("input",{value:b,onChange:f=>i(f.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:n,onChange:f=>d(f.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Description"),React.createElement("textarea",{rows:3,value:p,onChange:f=>R(f.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("div",{className:"grid gap-3"},!!((W=t==null?void 0:t.variants)!=null&&W.Model)&&React.createElement(Ie,{label:"Models",options:[...ue,...Ue,...De],value:l,onChange:f=>B(e=>({...e,Model:f}))}),!!((Y=t==null?void 0:t.variants)!=null&&Y.Color)&&React.createElement(Ie,{label:"Colors",options:ne,value:g,onChange:f=>B(e=>({...e,Color:f}))}),Object.entries((t==null?void 0:t.variants)||{}).filter(([f])=>f!=="Model"&&f!=="Color").map(([f,e])=>React.createElement("div",{key:f,className:"text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},f),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(_[f]||e).map(v=>React.createElement("span",{key:v,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-1 text-xs font-medium text-slate-600"},v,React.createElement("button",{type:"button",onClick:()=>B(N=>({...N,[f]:(N[f]||e).filter(A=>A!==v)})),"aria-label":`Remove ${v}`},"\xD7")))),React.createElement("div",{className:"mt-1 flex gap-2"},React.createElement("input",{type:"text",placeholder:`Add ${f} option`,className:"w-44 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-medium text-slate-700 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onKeyDown:v=>{if(v.key==="Enter"){const N=v.currentTarget.value.trim();N&&B(A=>({...A,[f]:Array.from(new Set([...A[f]||e,N]))})),v.currentTarget.value=""}}}),React.createElement("button",{type:"button",className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onClick:v=>{const N=v.currentTarget.previousSibling;if(N&&N.value){const A=N.value.trim();B(u=>({...u,[f]:Array.from(new Set([...u[f]||e,A]))})),N.value=""}}},"Add"))))),React.createElement("div",{className:"mt-2 flex justify-end gap-3"},React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white px-4 py-2 text-sm text-slate-900 hover:bg-white/70"},"Cancel"),React.createElement("button",{onClick:$,className:"rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-muted"},"Save changes"))))))}function Ut({products:a,onClose:r,onEdit:t,onHide:o,onDelete:s,onSave:c}){const[m,x]=P(""),[S,b]=P(null),i=J(()=>{let n=a;if(m){const d=m.toLowerCase();n=n.filter(p=>p.name.toLowerCase().includes(d)||p.sku.toLowerCase().includes(d)||(p.description||"").toLowerCase().includes(d))}return n},[a,m]);return React.createElement("section",{"aria-labelledby":"mgr-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"flex items-center justify-between gap-3 py-2"},React.createElement("h2",{id:"mgr-title",className:"text-base sm:text-lg font-semibold text-slate-900"},"Owner \u2014 Manage catalogue"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"relative"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:m,onChange:n=>x(n.target.value),placeholder:"Search\u2026",type:"search",className:"w-48 sm:w-64 rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"}),React.createElement(he,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Back")))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},(i||[]).map(n=>React.createElement("article",{key:n.id,className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full bg-gray-100"},React.createElement("img",{src:ce(Array.isArray(n.images)&&n.images[0]||n.image||"",n.name),onError:d=>{d.currentTarget.src=ae(n.name)},alt:n.name,className:"h-full w-full object-cover"})),React.createElement("div",{className:"flex flex-1 flex-col gap-3 p-4"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},n.name),React.createElement("p",{className:"mt-0.5 text-xs text-slate-500"},"SKU: ",n.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(n.specs||[]).slice(0,4).map(d=>React.createElement("span",{key:d,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 text-xs font-medium text-slate-600"},d))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"font-semibold text-slate-900"},Z(n.price)),n.minOrder&&React.createElement("span",{className:"text-xs text-slate-500"},"MOQ ",n.minOrder)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>b(n),className:"flex-1 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted"},"Edit"),n.id.startsWith("owner-")?React.createElement("button",{onClick:()=>s(n.id),className:"rounded-full border border-red-300 bg-white px-3 py-2 text-sm text-red-700 hover:bg-red-50"},"Delete"):React.createElement("button",{onClick:()=>o(n.id),className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white"},"Hide")))))),React.createElement(jt,{open:!!S,onClose:()=>b(null),product:S,onSave:c,onHide:o,onDelete:s}))}function Dt(){const[a,r]=P(Me),t=React.useRef(0),[o,s]=P(""),[c,m]=P("All"),[x,S]=P(null),[b,i]=P(!1),[n,d]=P(!1),[p,R]=P(Qe&&be),O=de?!0:be?p:!1,U=wt(),h=Ee?R:()=>{},[L,_]=P(null),B=ee(null),D=(u,y)=>{y&&(_({type:u,message:y}),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>_(null),4e3))};K(()=>()=>{B.current&&clearTimeout(B.current)},[]);const{ownerProducts:C,setOwnerProducts:z,addProduct:$,deleteProduct:I,loading:l,connectionStatus:g}=Et();vt(!!(x||b),t);const E=J(()=>{const u=new Map(Me.map(M=>[M.id,M])),y=[];return C.forEach(M=>{if(M.sourceId&&u.has(M.sourceId)){if(M.hidden){u.delete(M.sourceId);return}u.delete(M.sourceId)}M.hidden||(M.sourceId?u.set(M.id,M):y.push(M))}),[...y,...Array.from(u.values())]},[C]),k=J(()=>{let u=E;return c!=="All"&&(u=u.filter(y=>y.category===c)),o&&(u=u.filter(y=>y.name.toLowerCase().includes(o.toLowerCase())||y.sku.toLowerCase().includes(o.toLowerCase())||(y.description||"").toLowerCase().includes(o.toLowerCase()))),u},[E,c,o]),W=J(()=>{const u=new Map;return E.forEach(y=>{y&&y.id&&u.set(y.id,y)}),u},[E]),Y=I;K(()=>(window.__setOwnerManage=d,()=>{window.__setOwnerManage=void 0}),[]);const f=u=>z(y=>{const M=y.findIndex(j=>j.id===u.id);if(M>=0){const j=[...y];return j[M]=u,j}return[...y,u]}),e=async(u,y)=>{var T,q;const M=(q=(T=u.id)==null?void 0:T.startsWith)==null?void 0:q.call(T,"owner-"),j=Q(M?u:{...u,id:`owner-${Date.now()}`,sourceId:y}),te=await Re(j);f(te||j),te?D("success","Product updated."):D("warning","Product updated locally. Supabase sync pending.")},v=async u=>{const y=Q({id:`owner-hide-${Date.now()}`,sourceId:u,hidden:!0,name:"",sku:"",category:"All",price:0,description:"",specs:[]}),M=await Re(y);f(M||y),M?D("success","Base product hidden."):D("warning","Base product hidden locally. Supabase sync pending.")},N=async u=>{const y=await I(u);return y?D("success","Product deleted."):D("error","Could not delete product. Check your connection and try again."),y},A=U.items.reduce((u,y)=>u+(Number(y.qty)||0),0);return l?React.createElement("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),React.createElement("p",{className:"text-slate-600"},"Loading products..."))):React.createElement("div",{className:"min-h-screen bg-slate-50"},React.createElement(St),L&&React.createElement("div",{className:F("fixed bottom-4 right-4 z-40 max-w-sm rounded-lg border px-4 py-3 text-sm shadow-lg backdrop-blur",L.type==="error"?"border-red-200 bg-red-50/90 text-red-700":L.type==="warning"?"border-amber-200 bg-amber-50/90 text-amber-800":"border-emerald-200 bg-emerald-50/90 text-emerald-700")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("span",{className:"flex-1 leading-snug"},L.message),React.createElement("button",{type:"button",onClick:()=>_(null),className:"text-xs font-medium uppercase tracking-wide text-slate-500 hover:text-slate-700"},"Dismiss"))),React.createElement(Ct,{onOpenCart:()=>{t.current=window.scrollY||0,i(!0)},search:o,setSearch:s,ownerMode:O,setOwnerMode:h,cartQty:A,connectionStatus:g,allowOwnerToggle:Ee}),O?n?React.createElement(Ut,{products:E,onClose:()=>d(!1),onEdit:u=>{t.current=window.scrollY||0,S({__edit:!0,product:u})},onHide:u=>v(u),onDelete:u=>N(u),onSave:e}):React.createElement(Tt,{addProduct:$,products:C,removeProduct:u=>N(u),onNotify:D}):React.createElement(React.Fragment,null,React.createElement(Pt),React.createElement(Bt,{active:c,setActive:m}),React.createElement(Mt,{products:k,onOpen:u=>{t.current=window.scrollY||0,S(u&&u.__edit&&u.product?u.product:u)}})),React.createElement(It,{product:x,onClose:()=>{S(null)},onAdd:U.add,cartItems:U.items}),React.createElement(Wt,{open:b,onClose:()=>i(!1),cart:U,productLookup:W}))}const $t=ReactDOM.createRoot(document.getElementById("root"));$t.render(React.createElement(Dt));})();
