(()=>{const{useState:_,useEffect:U,useRef:se,useMemo:Z,useLayoutEffect:rt}=React,st="Odil Accessories",nt="Simple wholesale catalogue with WhatsApp ordering.",Ke="GBP";const ye="992935563306",Pe="nova_wholesale_cart_v1",ie="nova_owner_products_v1",ge=document.body.dataset.layout==="owner",xe=ge||document.body.dataset.ownerMode!=="disabled",Be=xe&&!ge,ot=ge||document.body.dataset.defaultOwner==="true",lt="/.netlify/functions/catalogue",Y="__base__",ve="__catalog_config__",ct="__",Oe="__family:",it="__prices",mt=a=>(Array.isArray(a)?a:[]).filter(r=>{const e=String(r||"");return e&&!e.startsWith(ct)}),dt=a=>{const r=new Set;return!a||typeof a!="object"||Object.values(a).forEach(e=>{Array.isArray(e)&&e.forEach(n=>{const s=String(n||"").trim().toLowerCase();s&&r.add(s)})}),r},qe=(a,r)=>{const e=dt(r);return mt(a).filter(n=>!e.has(String(n||"").trim().toLowerCase()))},ze=a=>{const r=String(a||"").trim(),e=r.indexOf(":");if(e<=0)return null;const n=r.slice(0,e).trim(),s=r.slice(e+1).trim();return!n||!s||n.length>40||s.length>120?null:{label:n,detail:s}},ut=a=>{const e=(Array.isArray(a==null?void 0:a.specs)?a.specs:[]).find(n=>typeof n=="string"&&n.startsWith(Oe));return e?String(e).slice(Oe.length).trim():""},pt=a=>{const r=a!=null&&a.variants&&typeof a.variants=="object"?a.variants:{},n=(Array.isArray(r.Model)?r.Model:[]).map(s=>String(s||"").toLowerCase());return n.some(s=>s.startsWith("iphone"))?"iPhone":n.some(s=>s.startsWith("galaxy a"))?"Samsung A":n.some(s=>s.startsWith("galaxy s"))?"Samsung S":"Accessories"},Me=a=>{const r=ut(a);return r||pt(a)},re=(a={})=>{const r=Object.entries(a||{}).filter(([e,n])=>n!=null&&String(n).trim()!=="");return r.length?r.sort(([e],[n])=>e.localeCompare(n)).map(([e,n])=>`${e}:${n}`).join("|"):Y},de=a=>{if(!a||typeof a!="object")return{};const r={};return Object.entries(a).forEach(([e,n])=>{const s=Number(n);Number.isFinite(s)&&s>=0&&(r[e&&e.trim()||Y]=s)}),r},bt=a=>{if(!a||typeof a!="object")return{};const r={};return Object.entries(a).forEach(([e,n])=>{const s=Number(n);Number.isFinite(s)&&s>=0&&(r[e&&e.trim()||Y]=s)}),r},He=a=>{var r;return bt((r=a==null?void 0:a.variants)==null?void 0:r[it])};const ft=a=>{const r=Number(a==null?void 0:a.price)||0,e=He(a),n=Object.values(e);if(!n.length)return{min:r,max:r,hasOverrides:!1};const s=Math.min(r,...n),o=Math.max(r,...n);return{min:s,max:o,hasOverrides:s!==o}},Ye=window.SUPABASE_PUBLIC_CONFIG||{},we=Ye.url||"",Qe=Ye.anonKey||"",gt=!!(we&&Qe);let ne=null;try{window.supabase&&gt?(ne=window.supabase.createClient(we,Qe),console.log("\u2705 Supabase client initialized successfully"),console.log("\u{1F4CD} Supabase URL:",we),setTimeout(async()=>{try{console.log("\u{1F504} Testing database connection...");const{data:r,error:e}=await ne.from("products").select("count").limit(1);e?(console.error("\u274C Database test failed:",e),e.message.includes("permission denied")&&console.error("\u{1F6AB} RLS Policy Issue: Run the SQL script to fix permissions"),e.message.includes('relation "products" does not exist')&&console.error("\u{1F3D7}\uFE0F Table Missing: Run the SQL script to create the products table")):console.log("\u2705 Database connection successful"),console.log("\u{1F504} Testing realtime connection...");const n=ne.channel("test-channel");n.subscribe(s=>{s==="SUBSCRIBED"?(console.log("\u2705 Realtime connection successful"),n.unsubscribe()):s==="CHANNEL_ERROR"&&console.error("\u274C Realtime connection failed")})}catch(r){console.error("\u274C Connection test failed:",r)}},1e3)):console.warn("\u26A0\uFE0F Supabase not initialized - supply SUPABASE_PUBLIC_CONFIG in supabase-config.js")}catch(a){console.error("\u274C Supabase initialization failed:",a)}const Ne=async(a,r=3,e=1e3)=>{for(let n=1;n<=r;n++)try{return await a()}catch(s){if(console.warn(`\u26A0\uFE0F Attempt ${n}/${r} failed:`,s.message),n===r)throw s;await new Promise(o=>setTimeout(o,e*n))}},ht=async()=>{var a;try{if(!ne)return null;const{data:r}=await ne.auth.getSession(),e=(a=r==null?void 0:r.session)==null?void 0:a.access_token;return e?`Bearer ${e}`:null}catch(r){return null}},he=async(a,r)=>{try{const e=await ht(),n=await fetch(lt,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:e}:{}},body:JSON.stringify({action:a,data:r})});if(!n.ok){const o=await n.text().catch(()=>"");throw new Error(`Owner API ${a} failed: ${n.status} ${o}`)}const s=await n.json().catch(()=>({}));if(s!=null&&s.error){const o=new Error(s.error.message||s.error);throw o.details=s.error.details,o.hint=s.error.hint,o.code=s.error.code,o}return s}catch(e){throw console.error(`Owner API ${a} error`,e),e}},X=a=>{var w;if(!a)return null;const{sourceid:r,sourceId:e,images:n,image:s,specs:o,variants:b,inventory:u,price:A,hidden:g,...i}=a,c=(w=e!=null?e:r)!=null?w:null,d=B=>Array.isArray(B)?B:B==null?[]:typeof B=="string"&&B.trim().length?[B]:[],p=d(n),k=d(o),M=typeof b=="object"&&b!==null&&!Array.isArray(b)?b:{},P=de(u),h=s||p[0]||void 0,$=p.length?p:h?[h]:[];return{...i,sourceId:c,images:$,specs:k,variants:M,inventory:P,price:typeof A=="number"?A:Number(A)||0,hidden:!!g,image:h}},Ve=a=>{var s;const r={id:a.id,name:a.name,sku:a.sku,category:a.category,price:Number(a.price)||0,description:(s=a.description)!=null?s:""},e=Array.isArray(a.images)?a.images:a.image?[a.image]:[];e.length&&(r.images=e),Array.isArray(a.specs)&&a.specs.length&&(r.specs=a.specs),a.variants&&Object.keys(a.variants).length&&(r.variants=a.variants),a.sourceId&&(r.sourceid=a.sourceId),a.hidden&&(r.hidden=!0);const n=de(a.inventory);return Object.keys(n).length&&(r.inventory=n),r},_e=async()=>{if(!ne)return console.warn("\u26A0\uFE0F Cannot load products: Supabase not initialized"),[];try{console.log("\u{1F504} Loading products from database...");const{data:a,error:r}=await ne.from("products").select("*").order("created_at",{ascending:!1});if(r)throw console.error("\u274C Database error:",r),r;return console.log(`\u2705 Loaded ${(a==null?void 0:a.length)||0} products from database`),(a||[]).map(X).filter(Boolean)}catch(a){return console.error("Failed to load products:",a),[]}},yt=async a=>{try{const r=Ve(a),{data:e}=await Ne(()=>he("insert",r)),n=X(e);return console.log("\u2705 Product saved successfully:",n),n}catch(r){return console.error("\u274C Failed to save product after retries:",r),null}},Ie=async a=>{try{const r=Ve(a),{data:e}=await Ne(()=>he("upsert",r));return X(e)}catch(r){return console.error("Failed to upsert product:",r),null}},xt=async a=>{try{return await Ne(()=>he("delete",{id:a})),!0}catch(r){return console.error("Failed to delete product:",r),!1}};const fe=["All","Phone Screens","Back Glass","Power Banks","Screen Protectors","Batteries","Mobile Phones","Tablets","Phone Cases","Cables","Chargers","Earphones","Charging Ports","Face ID"],be=["iPhone 11","iPhone 12","iPhone 12 Pro","iPhone 13","iPhone 13 Pro","iPhone 14","iPhone 14 Pro","iPhone 15","iPhone 15 Plus","iPhone 15 Pro","iPhone 15 Pro Max","iPhone 16","iPhone 16 Pro","iPhone 16 Pro Max"],Je=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],ia=[...be,...Je],Re=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],ke=["Galaxy A14","Galaxy A24","Galaxy A34","Galaxy A54","Galaxy A55","Galaxy A15"],vt=["iPhone","Samsung S","Samsung A"],wt={iPhone:be,"Samsung S":Re,"Samsung A":ke},Xe=()=>({version:1,categories:fe.filter(a=>a!=="All"),families:[{id:"iphone",name:"iPhone",models:[...be]},{id:"samsung_s",name:"Samsung S",models:[...Re]},{id:"samsung_a",name:"Samsung A",models:[...ke]},{id:"accessories",name:"Accessories",models:[]}],groupsByCategory:{},groupOverridesByCategoryFamily:{},groupHiddenByCategoryFamily:{}}),Et=a=>{const r=Xe();if(!a||typeof a!="object")return r;const e={...r,...a};return e.categories=Array.isArray(e.categories)?e.categories.filter(Boolean):r.categories,e.families=Array.isArray(e.families)?e.families.filter(Boolean):r.families,e.groupsByCategory=e.groupsByCategory&&typeof e.groupsByCategory=="object"?e.groupsByCategory:{},e.groupOverridesByCategoryFamily=e.groupOverridesByCategoryFamily&&typeof e.groupOverridesByCategoryFamily=="object"?e.groupOverridesByCategoryFamily:{},e.groupHiddenByCategoryFamily=e.groupHiddenByCategoryFamily&&typeof e.groupHiddenByCategoryFamily=="object"?e.groupHiddenByCategoryFamily:{},e};function Nt(a){const[r,e]=_(()=>Xe());return U(()=>{var o;const n=(a||[]).find(b=>b&&b.id===ve),s=(o=n==null?void 0:n.variants)==null?void 0:o.__config;s&&typeof s=="object"&&e(Et(s))},[a]),r}const We=["Original","OEM","AAA","Aftermarket","Refurb"],Rt=["TPU","Silicone","PC","Leather"],me=["Black","White","Navy","Clear","Red","Lavender","Stone","Midnight","Starlight","Blue","Green","Gold"],Ae={Black:"#111827",White:"#ffffff",Navy:"#1e3a8a",Clear:"#ffffff",Red:"#ef4444",Lavender:"#b57edc",Stone:"#a8a29e",Midnight:"#0f172a",Starlight:"#f8fafc",Blue:"#3b82f6",Green:"#10b981",Gold:"#f59e0b"};function ue({name:a}){const r=Ae[a],e=r?{backgroundColor:r,border:"1px solid rgba(0,0,0,.15)"}:{backgroundImage:"linear-gradient(45deg,#e5e7eb 25%,transparent 25%),linear-gradient(-45deg,#e5e7eb 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#e5e7eb 75%),linear-gradient(-45deg,transparent 75%,#e5e7eb 75%)",backgroundSize:"8px 8px",border:"1px solid rgba(0,0,0,.15)"};return React.createElement("span",{"aria-hidden":"true",className:"inline-block h-3 w-3 rounded-full align-[-2px]",style:e})}const kt=["Tempered","Hydrogel"],At=["Clear","Matte","Privacy"],St=["1-Pack","2-Pack"],Ct=["Edge-to-edge","Full glue"],Le=["USB-C \u2194 USB-C","USB-C \u2194 Lightning","USB-A \u2194 Micro-USB"],Ze=["0.5m","1m","2m"],Pt=["27W","60W","100W"],Bt=["MFi","USB-IF"],Ot=["Standard","Braided",">10k bends"],Mt=["20W","30W","45W","65W"],je=["1\xD7USB-C","1\xD7USB-A","1\xD7USB-C + 1\xD7USB-A","2\xD7USB-C"],ce=["PD 3.0","PPS","QC 3.0","QC 4+"];const _t=["UK 3-pin","EU","US"],Te=["New","Refurb","Used A","Used B"],It=["Unlocked","Locked","Dual-SIM Yes","Dual-SIM No"],Wt=["5G","4G"],Lt=["Wi-Fi","Wi-Fi + Cellular"],$e=["32GB","64GB","128GB","256GB","512GB","1TB"],Fe=["3GB","4GB","6GB","8GB","12GB","16GB"];const jt=Ze;const Tt=["10,000 mAh","20,000 mAh"],De=[{id:"sp-iph-13-tmp-2pk",name:"Tempered Glass \u2013 iPhone 13 (2\u2011Pack)",sku:"SP-IP13-TG2",category:"Screen Protectors",price:3.2,specs:["2\u2011Pack","Tempered","9H","Oleophobic"],description:"Clear tempered glass for iPhone 13.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.07_b6d5696d.jpg",variants:{Model:["iPhone 13"],Material:["Tempered"],Pack:["2\u2011Pack"]}},{id:"sp-iph-14-hg-1pk",name:"Hydrogel Protector \u2013 iPhone 14",sku:"SP-IP14-HG1",category:"Screen Protectors",price:2.6,specs:["Hydrogel","Self\u2011healing","Case\u2011friendly"],description:"Flexible hydrogel film.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.08_46a12f36.jpg",variants:{Model:["iPhone 14"],Material:["Hydrogel"],Pack:["1\u2011Pack","2\u2011Pack"]}},{id:"case-slim-tpu-iph-11-16",name:"Slim TPU Case \u2013 iPhone Series",sku:"CA-IP-TPU",category:"Phone Cases",price:3.9,specs:["TPU","Slim","Matte"],description:"Slim matte TPU case.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.09_811264ed.jpg",variants:{Color:["Black","Navy","Clear","Red"],Material:["TPU"],Model:be}},{id:"case-silicone-sg-s20-s25",name:"Soft Silicone Case \u2013 Galaxy Series",sku:"CA-SG-SIL",category:"Phone Cases",price:4.1,specs:["Silicone","Microfiber"],description:"Soft\u2011touch silicone for Galaxy.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.10_3d78676b.jpg",variants:{Color:["Midnight","Stone","Lavender"],Material:["Silicone"],Model:Je}},{id:"chg-65w-gan-dual",name:"65W GaN Charger \u2013 Dual Port",sku:"CH-65W-GAN",category:"Chargers",price:12.5,specs:["65W","USB\u2011C + USB\u2011A","PD/QC"],description:"Compact GaN charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_89070b32.jpg",variants:{Wattage:["65W"],Ports:["USB\u2011C + USB\u2011A"],Standard:ce}},{id:"chg-20w-usbc",name:"20W USB\u2011C Wall Charger",sku:"CH-20W-USBC",category:"Chargers",price:6,specs:["20W","USB\u2011C","PD"],description:"USB\u2011C PD charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_9ebc1ea2.jpg",variants:{Wattage:["20W"],Ports:["USB\u2011C"],Standard:["PD 3.0"]}},{id:"cbl-usbc-60w-1m-2m",name:"USB\u2011C Cable 60W",sku:"CB-UC-60",category:"Cables",price:2.2,specs:["USB\u2011C","60W","Nylon"],description:"Braided 60W cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.12_628fcab2.jpg",variants:{Connector:["USB\u2011C \u2194 USB\u2011C"],Length:jt,Rating:["60W"]}},{id:"cbl-lightning-mfi",name:"Lightning Cable (MFi)",sku:"CB-LT-MFI",category:"Cables",price:3.5,specs:["Lightning","MFi","1m"],description:"MFi Lightning cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.13_22d8e7c9.jpg",variants:{Connector:["USB\u2011C \u2194 Lightning"],Length:["1m"],Rating:["27W"]}},{id:"ear-wired-classic",name:"Wired Earphones \u2013 Classic",sku:"EA-WI-CLS",category:"Earphones",price:4.2,specs:["3.5mm","In\u2011line mic"],description:"Wired earphones.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.14_4f407f9a.jpg",variants:{Connector:["3.5mm"],Color:["Black","White"]}},{id:"ear-tws-basic",name:"TWS Earbuds \u2013 Basic",sku:"EA-TWS-BSC",category:"Earphones",price:12.9,specs:["BT 5.3","20h"],description:"TWS earbuds.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.15_e7b8adc0.jpg",variants:{Color:["White","Black"],Standard:["BT 5.3"]}},{id:"pb-10000-compact",name:"Power Bank 10,000 mAh",sku:"PB-10K-CMP",category:"Power Banks",price:11,specs:["10,000 mAh","USB\u2011C","PD"],description:"Slim 10k power bank.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.17_01d0dcae.jpg",variants:{Capacity:["10,000 mAh"],Ports:["USB\u2011C","USB\u2011A"],Standard:ce}},{id:"pb-20000-dual",name:"Power Bank 20,000 mAh \u2013 Dual",sku:"PB-20K-DUAL",category:"Power Banks",price:16.5,specs:["20,000 mAh","Dual","PD/QC"],description:"20k dual output.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.19_3b58c17b.jpg",variants:{Capacity:["20,000 mAh"],Ports:["USB\u2011C + USB\u2011A"],Standard:ce}},{id:"img-001",name:"Accessory Photo A",sku:"IM-001",category:"Phone Cases",price:2.5,specs:["Assorted"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.33_5dd08e33.jpg"},{id:"img-002",name:"Accessory Photo B",sku:"IM-002",category:"Chargers",price:7.2,specs:["Fast"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_09a1e9d9.jpg"},{id:"img-003",name:"Accessory Photo C",sku:"IM-003",category:"Cables",price:1.8,specs:["1m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_f1935767.jpg"},{id:"img-004",name:"Accessory Photo D",sku:"IM-004",category:"Screen Protectors",price:2.9,specs:["Tempered"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.35_92866963.jpg"},{id:"img-005",name:"Accessory Photo E",sku:"IM-005",category:"Phone Cases",price:3.6,specs:["TPU"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.36_d9ee268e.jpg"},{id:"img-006",name:"Accessory Photo F",sku:"IM-006",category:"Back Glass",price:5.5,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.37_ef5ed98e.jpg"},{id:"img-007",name:"Accessory Photo G",sku:"IM-007",category:"Earphones",price:6,specs:["Wireless"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_b444897c.jpg"},{id:"img-008",name:"Accessory Photo H",sku:"IM-008",category:"Power Banks",price:9.9,specs:["10k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_f170faf6.jpg"},{id:"img-009",name:"Accessory Photo I",sku:"IM-009",category:"Cables",price:2,specs:["2m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.39_c37cddc9.jpg"},{id:"img-010",name:"Accessory Photo J",sku:"IM-010",category:"Chargers",price:11.5,specs:["65W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.40_7a858ba3.jpg"},{id:"img-011",name:"Accessory Photo K",sku:"IM-011",category:"Phone Cases",price:4.4,specs:["Silicone"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_80d08b54.jpg"},{id:"img-012",name:"Accessory Photo L",sku:"IM-012",category:"Screen Protectors",price:1.9,specs:["Hydrogel"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_a2efd2e1.jpg"},{id:"img-013",name:"Accessory Photo M",sku:"IM-013",category:"Back Glass",price:6.5,specs:["Back glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.42_63c16e8a.jpg"},{id:"img-014",name:"Accessory Photo N",sku:"IM-014",category:"Batteries",price:8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.43_06e00e31.jpg"},{id:"img-015",name:"Accessory Photo O",sku:"IM-015",category:"Phone Cases",price:3.2,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_de3a612b.jpg"},{id:"img-016",name:"Accessory Photo P",sku:"IM-016",category:"Cables",price:2.4,specs:["Nylon"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_fddf905d.jpg"},{id:"img-017",name:"Accessory Photo Q",sku:"IM-017",category:"Earphones",price:5,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.45_b1dd7f8a.jpg"},{id:"img-018",name:"Accessory Photo R",sku:"IM-018",category:"Chargers",price:9.5,specs:["30W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_30024620.jpg"},{id:"img-019",name:"Accessory Photo S",sku:"IM-019",category:"Power Banks",price:14,specs:["20k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_cb602f30.jpg"},{id:"img-020",name:"Accessory Photo T",sku:"IM-020",category:"Phone Cases",price:3.8,specs:["Leather"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_d9e5908c.jpg"},{id:"img-021",name:"Accessory Photo U",sku:"IM-021",category:"Screen Protectors",price:2.7,specs:["Matte"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.47_ac758901.jpg"},{id:"img-022",name:"Accessory Photo V",sku:"IM-022",category:"Cables",price:1.6,specs:["0.5m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_bc4af4ef.jpg"},{id:"img-023",name:"Accessory Photo W",sku:"IM-023",category:"Chargers",price:4.9,specs:["USB\u2011A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_f4496fba.jpg"},{id:"img-024",name:"Accessory Photo X",sku:"IM-024",category:"Earphones",price:13.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.49_ad6d3003.jpg"},{id:"img-025",name:"Accessory Photo Y",sku:"IM-025",category:"Phone Cases",price:2.9,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.50_b3694795.jpg"},{id:"img-026",name:"Accessory Photo Z",sku:"IM-026",category:"Back Glass",price:7,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.51_5e67178c.jpg"},{id:"img-027",name:"Accessory Photo AA",sku:"IM-027",category:"Batteries",price:6.9,specs:["Refurb"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.52_df23fdba.jpg"},{id:"img-028",name:"Accessory Photo AB",sku:"IM-028",category:"Chargers",price:8.5,specs:["PD"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.53_13d347f3.jpg"},{id:"img-029",name:"Accessory Photo AC",sku:"IM-029",category:"Cables",price:2.1,specs:["Braided"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_5c3d1851.jpg"},{id:"img-030",name:"Accessory Photo AD",sku:"IM-030",category:"Power Banks",price:12.2,specs:["Dual output"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_8f092381.jpg"},{id:"img-031",name:"Accessory Photo AE",sku:"IM-031",category:"Earphones",price:3.9,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.56_cbdfea17.jpg"},{id:"img-032",name:"Accessory Photo AF",sku:"IM-032",category:"Phone Cases",price:4.5,specs:["Patterned"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_61b6ae02.jpg"},{id:"img-033",name:"Accessory Photo AG",sku:"IM-033",category:"Screen Protectors",price:2.3,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_efd60a9b.jpg"},{id:"img-034",name:"Accessory Photo AH",sku:"IM-034",category:"Chargers",price:10,specs:["GaN"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.58_082b158d.jpg"},{id:"img-035",name:"Accessory Photo AI",sku:"IM-035",category:"Power Banks",price:15,specs:["High capacity"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.00_7e6451d4.jpg"},{id:"img-036",name:"Accessory Photo AJ",sku:"IM-036",category:"Cables",price:1.5,specs:["USB-C"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.01_bf466384.jpg"},{id:"img-037",name:"Accessory Photo AK",sku:"IM-037",category:"Earphones",price:7.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2920cb02.jpg"},{id:"img-038",name:"Accessory Photo AL",sku:"IM-038",category:"Phone Cases",price:3.1,specs:["Transparent"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2ae9f56f.jpg"},{id:"img-039",name:"Accessory Photo AM",sku:"IM-039",category:"Back Glass",price:6.8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_725a57bf.jpg"},{id:"img-040",name:"Accessory Photo AN",sku:"IM-040",category:"Chargers",price:5.5,specs:["USB-A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.04_faa6a5d9.jpg"}],J=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:Ke}).format(a),z=(...a)=>a.filter(Boolean).join(" ");function $t(){const[a,r]=_(!1);return U(()=>{var s;const e=window.matchMedia("(prefers-reduced-motion: reduce)");r(e.matches);const n=()=>r(e.matches);return(s=e.addEventListener)==null||s.call(e,"change",n),()=>{var o;return(o=e.removeEventListener)==null?void 0:o.call(e,"change",n)}},[]),a}function le(a){const r=encodeURIComponent("#f3f4f6"),e=encodeURIComponent("#6b7280"),n=encodeURIComponent(a),s=`<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='600' role='img' aria-label='${n}'><rect width='100%' height='100%' fill='${r}'/><g fill='${e}' font-family='system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif'><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='24'>${n}</text></g></svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(s)}`}function pe(a,r){return a?a.startsWith("data:")||a.startsWith("http")?a:`/img/${a}`:le(r)}function Ft(a){const r=Array.isArray(a.images)&&a.images.length?a.images:a.image?[a.image]:[];return r.length?r:[le(a.name)]}function Ue(a){const r=Ft(a);return pe(r[0],a.name)}function Se(a,r,e){const n=se(e);U(()=>{n.current=e},[e]),U(()=>{if(!a||!r.current)return;const s=r.current,o=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),b=document.activeElement,u=Array.from(s.querySelectorAll(o));if(!u.length)s.hasAttribute("tabindex")||s.setAttribute("tabindex","-1"),typeof s.focus=="function"&&s.focus({preventScroll:!0});else{const g=u[0];g&&typeof g.focus=="function"&&g.focus({preventScroll:!0})}const A=g=>{var i;if(g.key==="Escape"&&(g.stopPropagation(),(i=n.current)==null||i.call(n)),g.key==="Tab"&&u.length){const c=u[0],d=u[u.length-1];g.shiftKey&&document.activeElement===c?(g.preventDefault(),d.focus()):!g.shiftKey&&document.activeElement===d&&(g.preventDefault(),c.focus())}};return s.addEventListener("keydown",A),()=>{if(s.removeEventListener("keydown",A),b&&typeof b.focus=="function"&&document.contains(b))try{b.focus({preventScroll:!0})}catch(g){b.focus()}}},[a,r])}function Dt(a,r){const e=se(0),n=se(null),s=Z(()=>{if(typeof navigator=="undefined")return!1;const o=navigator.userAgent||"";if(!(navigator.maxTouchPoints>0))return!1;const u=/iP(ad|hone|od)/i.test(o),A=/CriOS/i.test(o),g=/FxiOS/i.test(o),i=/EdgiOS/i.test(o),c=/OPiOS/i.test(o);return u||A||g||i||c},[]);rt(()=>{if(typeof window=="undefined"||!a)return;const o=document.body,b=document.documentElement;if(!o||!b)return;const u=window.scrollY||window.pageYOffset||0,A=r&&Number.isFinite(r.current)?r.current:u;return e.current=A,n.current={strategy:s?"passive":"fixed",position:o.style.position,top:o.style.top,width:o.style.width,overflow:o.style.overflow,touchAction:o.style.touchAction,webkitOverflowScrolling:o.style.webkitOverflowScrolling,overscroll:o.style.overscrollBehavior,overscrollY:o.style.overscrollBehaviorY,htmlOverflow:b.style.overflow,htmlOverscroll:b.style.overscrollBehavior},s?(o.style.overflow="hidden",o.style.touchAction="pan-y",o.style.webkitOverflowScrolling="auto",o.style.overscrollBehavior="contain",o.style.overscrollBehaviorY="contain",b.style.overflow="hidden",b.style.overscrollBehavior="contain",()=>{const g=n.current||{};o.style.overflow=g.overflow||"",o.style.touchAction=g.touchAction||"",o.style.webkitOverflowScrolling=g.webkitOverflowScrolling||"",o.style.overscrollBehavior=g.overscroll||"",o.style.overscrollBehaviorY=g.overscrollY||"",b.style.overflow=g.htmlOverflow||"",b.style.overscrollBehavior=g.htmlOverscroll||"",window.scrollTo(0,e.current||0),n.current=null}):(o.style.position="fixed",o.style.top=`-${A}px`,o.style.width="100%",o.style.overflow="hidden",b.style.overflow="hidden",b.style.overscrollBehavior="none",()=>{const g=n.current||{};o.style.position=g.position||"",o.style.top=g.top||"",o.style.width=g.width||"",o.style.overflow=g.overflow||"",b.style.overflow=g.htmlOverflow||"",b.style.overscrollBehavior=g.htmlOverscroll||"",window.scrollTo(0,e.current||0),n.current=null})},[a,r,s])}function Ut(){const a=i=>{if(!i)return null;const c=i.variants&&typeof i.variants=="object"&&!Array.isArray(i.variants)?i.variants:{},d=i.inventoryKey||re(c),p=Math.max(0,Number(i.qty)||0);return{...i,variants:c,inventoryKey:d,qty:p}},[r,e]=_([]),[n,s]=_("");U(()=>{try{const i=localStorage.getItem(Pe);if(i){const c=JSON.parse(i);Array.isArray(c.items)&&e(c.items.map(a).filter(Boolean)),typeof c.notes=="string"&&s(c.notes)}}catch(i){}},[]),U(()=>{try{localStorage.setItem(Pe,JSON.stringify({items:r,notes:n}))}catch(i){}},[r,n]);const o=i=>e(c=>{const d=a(i);if(!d)return c;const p=c.findIndex(k=>k.id===d.id&&JSON.stringify(k.variants||{})===JSON.stringify(d.variants||{})&&(k.inventoryKey||Y)===(d.inventoryKey||Y));if(p>=0){const k=[...c];return k[p]={...k[p],qty:Math.max(0,Number(k[p].qty||0)+d.qty)},k}return[...c,d]}),b=(i,c)=>e(d=>d.map((p,k)=>k===i?{...p,qty:Math.max(0,Number(c)||0)}:p)),u=i=>e(c=>c.filter((d,p)=>p!==i)),A=()=>e([]),g=r.reduce((i,c)=>i+c.price*c.qty,0);return{items:r,add:o,updateQty:b,removeIndex:u,clear:A,subtotal:g,notes:n,setNotes:s}}function Gt(){const[a,r]=_([]),[e,n]=_(!0),[s,o]=_("connecting");U(()=>{(async()=>{try{o("connecting");const i=await _e();r(i);try{localStorage.setItem(ie,JSON.stringify(i))}catch(c){}o("connected")}catch(i){console.error("Failed to load products from database:",i),o("error");try{const c=localStorage.getItem(ie);if(c){const d=JSON.parse(c);Array.isArray(d)&&r(d.map(X).filter(Boolean))}}catch(c){}}finally{n(!1)}})()},[]),U(()=>{if(!ne){console.warn("\u26A0\uFE0F Cannot setup realtime: Supabase not initialized");return}console.log("\u{1F504} Setting up realtime subscription...");const g=ne.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},i=>{console.log("\u{1F534} Realtime event received:",i.eventType,i),r(c=>{if(i.eventType==="INSERT"){console.log("\u2795 Adding product via realtime:",i.new.name);const d=X(i.new),p=c.findIndex(k=>k.id===d.id);if(p>=0){console.log("\u{1F504} Updating existing product instead of duplicating");const k=[...c];return k[p]=d,k}return[d,...c]}if(i.eventType==="UPDATE"){console.log("\u270F\uFE0F Updating product via realtime:",i.new.name);const d=X(i.new);return c.map(p=>p.id===i.new.id?d:p)}return i.eventType==="DELETE"?(console.log("\u{1F5D1}\uFE0F Deleting product via realtime:",i.old.id),c.filter(d=>d.id!==i.old.id)):c})}).subscribe(i=>{console.log("\u{1F534} Realtime status:",i),i==="SUBSCRIBED"?(console.log("\u2705 Realtime subscription active!"),o("connected"),_e().then(c=>{console.log("\u{1F504} Reloaded products after reconnection");const d=c.map(X).filter(Boolean);r(d);try{localStorage.setItem(ie,JSON.stringify(d))}catch(p){}}).catch(c=>{console.error("\u274C Failed to reload products after reconnection:",c)})):i==="CHANNEL_ERROR"||i==="CLOSED"?(console.error("\u274C Realtime subscription failed!"),o("error")):(console.log("\u{1F504} Realtime connecting..."),o("connecting"))});return()=>{console.log("\u{1F50C} Cleaning up realtime subscription"),g.unsubscribe()}},[]);const b=g=>{if(typeof g=="function")r(i=>{const c=g(i),d=(Array.isArray(c)?c:[]).map(X).filter(Boolean);try{localStorage.setItem(ie,JSON.stringify(d))}catch(p){}return d});else{const i=(Array.isArray(g)?g:[]).map(X).filter(Boolean);r(i);try{localStorage.setItem(ie,JSON.stringify(i))}catch(c){}}};return{ownerProducts:a,setOwnerProducts:b,addProduct:async g=>{const i=await yt(g);if(i)return b(d=>[i,...d]),{product:i,persisted:!0};const c=X(g);return b(d=>[c,...d]),{product:c,persisted:!1}},deleteProduct:async g=>{const i=await xt(g);return i&&b(c=>c.filter(d=>d.id!==g)),i},loading:e,connectionStatus:s}}function Kt({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function Ee({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}function qt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}function et({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}function zt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}function Ht({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.164a1.5 1.5 0 0 0-1.5 1.5v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}function tt({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0 0 20.885 3.488"}))}function Yt(){return React.createElement("a",{href:"#main",className:"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 rounded-full border border-[var(--surface-border)] bg-white/90 px-3 py-2 text-sm font-semibold text-brand shadow-sm backdrop-blur"},"Skip to content")}function Qt({onOpenCart:a,search:r,setSearch:e,ownerMode:n,setOwnerMode:s,cartQty:o,connectionStatus:b,allowOwnerToggle:u,families:A,family:g,setFamily:i}){const[c,d]=_(!1),p=se(null),k=se(null),[M,P]=_({left:!1,right:!1});U(()=>{const w=()=>d(window.scrollY>4);return w(),window.addEventListener("scroll",w,{passive:!0}),()=>window.removeEventListener("scroll",w)},[]),U(()=>{const w=()=>{var G;const B=((G=p.current)==null?void 0:G.offsetHeight)||64;document.documentElement.style.setProperty("--header-offset",B+"px")};return w(),window.addEventListener("resize",w,{passive:!0}),()=>window.removeEventListener("resize",w)},[n,r,A]),U(()=>{if(n)return;const w=()=>{const G=k.current;if(!G)return;const{scrollLeft:W,scrollWidth:D,clientWidth:T}=G,L=W>0,K=W+T<D-1;P(F=>F.left===L&&F.right===K?F:{left:L,right:K})};w();const B=k.current;if(B)return B.addEventListener("scroll",w,{passive:!0}),window.addEventListener("resize",w),()=>{B.removeEventListener("scroll",w),window.removeEventListener("resize",w)}},[n,A]);const h=b==="connected"?{wrapper:"border border-emerald-200 bg-emerald-50/80 text-emerald-600",dot:"bg-emerald-500",label:"Online"}:b==="error"?{wrapper:"border border-rose-200 bg-rose-50/80 text-rose-600",dot:"bg-rose-500",label:"Offline"}:{wrapper:"border border-amber-200 bg-amber-50/80 text-amber-600",dot:"bg-amber-400 animate-pulse",label:"Connecting"},$=z("chip-scroll -mx-4",M.left&&"show-left",M.right&&"show-right");return React.createElement("header",{ref:p,className:z("sticky top-0 z-40 w-full border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-xl transition-shadow duration-300",c?"shadow-sm":"")},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex h-16 items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement(Kt,{className:"h-7 w-7 text-brand flex-shrink-0"}),React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("span",{className:"font-semibold text-slate-900 text-sm sm:text-base tracking-tight truncate"},st),React.createElement("div",{className:`hidden md:flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-medium ${h.wrapper}`,title:`Database ${b}`},React.createElement("span",{className:`inline-block h-2 w-2 rounded-full ${h.dot}`}),React.createElement("span",null,h.label)))),React.createElement("nav",{className:"flex items-center gap-1.5 sm:gap-2"},!n&&React.createElement("label",{className:"relative hidden sm:block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:w=>e(w.target.value),placeholder:"Search products\u2026",type:"search",className:"w-48 md:w-64 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Ee,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),u&&React.createElement("button",{onClick:()=>s(!n),className:z("rounded-full border px-3 py-2 text-xs sm:text-sm font-medium transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",n?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/60 text-slate-700 hover:bg-white/80")},n?"Back":"Owner"),React.createElement("button",{onClick:a,className:"relative inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 sm:px-3.5 py-2 text-xs sm:text-sm font-medium text-slate-700 transition-colors hover:bg-white/80 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(qt,{className:"h-4 w-4 text-brand"}),React.createElement("span",{className:"hidden sm:inline"},"Cart"),o>0&&React.createElement("span",{"aria-live":"polite",className:"absolute -top-1.5 -right-1.5 inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-1 text-[10px] font-semibold text-brand"},String(o))))),!n&&React.createElement("div",{className:"sm:hidden pb-0"},React.createElement("label",{className:"relative block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:w=>e(w.target.value),placeholder:"Search products\u2026",type:"search",className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-medium text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Ee,{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}))),!n&&Array.isArray(A)&&A.length>0&&React.createElement("div",{className:"mt-2 pb-2","aria-label":"Families"},React.createElement("div",{className:$},React.createElement("div",{ref:k,className:"chip-scroll-inner overflow-x-auto px-4"},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},A.map(w=>React.createElement("button",{key:w,onClick:()=>i(w),"aria-pressed":g===w,className:z("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",g===w?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},w))))))))}function Vt(){const a=[{title:"1. Browse products",detail:"Search or tap a category to find what you need."},{title:"2. Open an item",detail:"Choose the variants and quantities, then add to cart."},{title:"3. Review the cart",detail:"Adjust quantities or notes before sending."},{title:"4. Send via WhatsApp",detail:"Use the cart button to submit the full list for confirmation."}];return React.createElement("section",{"aria-labelledby":"hero-title",className:"border-b border-[var(--surface-border)] bg-hero-gradient"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16"},React.createElement("div",{className:"grid gap-12 lg:grid-cols-[minmax(0,1fr)_420px] items-start"},React.createElement("div",{className:"space-y-6"},React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-1 text-[11px] font-medium uppercase tracking-[0.14em] text-slate-600"},"Odil Accessories"),React.createElement("h1",{id:"hero-title",className:"text-[clamp(30px,6vw,48px)] font-semibold leading-tight tracking-tight text-slate-900"},"Wholesale catalogue for partner shops"),React.createElement("p",{className:"max-w-2xl text-base sm:text-lg text-slate-600"},nt),React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("a",{href:"#catalogue",className:"inline-flex items-center gap-2 rounded-full bg-brand px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Browse catalogue",React.createElement(zt,{className:"h-4 w-4"})),React.createElement("a",{href:`https://wa.me/${ye}`,target:"_blank",rel:"noreferrer noopener",className:"inline-flex items-center gap-2 rounded-full border border-[rgba(37,99,235,0.35)] bg-white/70 px-5 py-2.5 text-sm font-semibold text-slate-800 shadow-sm backdrop-blur transition hover:bg-white/90 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(tt,{className:"h-4 w-4 text-emerald-500"}),"Chat on WhatsApp")),React.createElement("p",{className:"text-sm text-slate-500"},"Follow the steps on the right when you place an order.")),React.createElement("div",{className:"glass-card rounded-3xl p-8 soft-shadow"},React.createElement("div",{className:"space-y-5 text-sm text-slate-600"},React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Order steps"),React.createElement("ol",{className:"space-y-3 text-sm"},a.map(r=>React.createElement("li",{key:r.title,className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 px-4 py-3 backdrop-blur"},React.createElement("p",{className:"text-sm font-semibold text-slate-900"},r.title),React.createElement("p",{className:"text-xs text-slate-500 mt-1"},r.detail))))),React.createElement("div",{className:"mt-6 flex items-center justify-between rounded-2xl border border-[var(--surface-border)] bg-white/80 px-4 py-3 text-xs uppercase tracking-[0.18em] text-slate-500"},React.createElement("span",null,"Owner metrics snapshot"),React.createElement("span",{className:"font-semibold text-slate-800"},"Realtime"))))))}function Jt({categories:a,active:r,setActive:e}){const n=se(null),[s,o]=_({left:!1,right:!1});U(()=>{const u=()=>{const g=n.current;if(!g)return;const{scrollLeft:i,scrollWidth:c,clientWidth:d}=g,p=i>0,k=i+d<c-1;o(M=>M.left===p&&M.right===k?M:{left:p,right:k})};u();const A=n.current;if(A)return A.addEventListener("scroll",u,{passive:!0}),window.addEventListener("resize",u),()=>{A.removeEventListener("scroll",u),window.removeEventListener("resize",u)}},[]);const b=z("chip-scroll -mx-4",s.left&&"show-left",s.right&&"show-right");return React.createElement(React.Fragment,null,React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8","aria-label":"Categories"},React.createElement("div",{className:b},React.createElement("div",{ref:n,className:"chip-scroll-inner overflow-x-auto px-4"},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},(a||[]).map(u=>React.createElement("button",{key:u,onClick:()=>e(u),"aria-pressed":r===u,className:z("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",r===u?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},u))))))))}function Xt({products:a,onOpen:r}){return React.createElement("section",{id:"catalogue","aria-labelledby":"catalogue-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("h2",{id:"catalogue-title",className:"sr-only"},"Catalogue"),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.map(e=>React.createElement(Zt,{key:e.id,product:e,onOpen:r}))))}function Zt({product:a,onOpen:r}){const[e,n]=_(Ue(a));U(()=>{n(Ue(a))},[a.image,a.images,a.name]);const o=Object.entries(a.variants||{}).filter(([,P])=>Array.isArray(P)&&P.length>0).map(([P])=>P).map(P=>{var B;const h=Array.isArray((B=a==null?void 0:a.variants)==null?void 0:B[P])?a.variants[P]:[];if(!h.length)return null;const $=h.slice(0,3).join(", "),w=h.length>3?` +${h.length-3}`:"";return`${P}: ${$}${w}`}).filter(Boolean),b=qe(a.specs,a.variants),u=[],A=[];b.forEach(P=>{const h=ze(P);h?u.push(h):A.push(P)});const g=u.slice(0,4),i=A.slice(0,4),c=Math.max(u.length-g.length,0),d=Math.max(A.length-i.length,0),p=a.inventory&&typeof a.inventory=="object"&&Object.keys(a.inventory).length>0,k=ft(a),M=k.min===k.max?J(k.min):`${J(k.min)}\u2013${J(k.max)}`;return React.createElement("article",{className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition duration-200 hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full overflow-hidden bg-slate-100"},React.createElement("img",{src:e,onError:()=>n(le(a.name)),alt:a.name,className:"h-full w-full object-cover",loading:"lazy"})),React.createElement("div",{className:"flex flex-1 flex-col gap-4 p-5"},React.createElement("header",null,React.createElement("div",{className:"flex flex-wrap items-center gap-1.5 text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-500"},p&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-amber-200 bg-amber-50/80 px-2.5 py-0.5 text-amber-700"},"Limited stock")),React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h3",{className:"text-base font-semibold text-slate-900"},a.name),React.createElement("div",{className:"flex flex-col items-end gap-1"},React.createElement("span",{className:"text-base font-semibold text-slate-900 whitespace-nowrap"},M),k.hasOverrides&&React.createElement("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-400"},"Price range"))),a.description&&React.createElement("p",{className:"mt-2 text-sm text-slate-600",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}},a.description),React.createElement("p",{className:"mt-2 text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"},"SKU ",a.sku)),g.length>0&&React.createElement("dl",{className:"grid grid-cols-1 gap-2 text-sm"},g.map(({label:P,detail:h})=>React.createElement("div",{key:`${P}:${h}`,className:"flex items-baseline justify-between gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/60 px-3 py-2"},React.createElement("dt",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-slate-500"},P),React.createElement("dd",{className:"text-sm font-semibold text-slate-900"},h))),c>0&&React.createElement("div",{className:"text-xs text-slate-500"},`+${c} more details`)),i.length>0&&React.createElement("div",{className:"flex flex-wrap gap-1.5 text-[11px]"},i.map(P=>React.createElement("span",{key:P,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},P)),d>0&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 py-0.5 font-medium text-slate-500"},`+${d} more`)),o.length>0&&React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-xs text-slate-600"},React.createElement("div",{className:"text-[10px] font-semibold uppercase tracking-[0.16em] text-slate-500"},"Options to choose"),React.createElement("div",{className:"mt-1 space-y-1"},o.slice(0,2).map(P=>React.createElement("p",{key:P,className:"font-medium text-slate-700"},P)),o.length>2&&React.createElement("p",{className:"text-slate-500"},`+${o.length-2} more option groups`))),React.createElement("div",{className:"mt-auto"},React.createElement("button",{type:"button",onClick:()=>r(a),className:"w-full rounded-full border border-[rgba(37,99,235,0.28)] bg-white/70 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand hover:text-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"View details"))))}function ea({product:a,onClose:r,onAdd:e,cartItems:n}){const s=a&&a.__edit&&a.product?a.product:a;if(!s)return null;const o=Array.isArray(n)?n:[],b=Z(()=>de(s.inventory),[s.inventory]),u=Z(()=>He(s),[s.variants]),A=Z(()=>{const l={};return o.forEach(y=>{if(!y||y.id!==s.id)return;const v=y.inventoryKey||re(y.variants||{});l[v]=(l[v]||0)+Number(y.qty||0)}),l},[o,s.id]),g=se(null);Se(!!s,g,r);const i=(()=>{const l=Array.isArray(s.images)&&s.images.length?s.images:s.image?[s.image]:[];return(l.length?l:[le(s.name)]).map(y=>pe(y,s.name))})(),c=s.variants||{},d=Object.entries(c).filter(([,l])=>Array.isArray(l)&&l.length>0).map(([l])=>l),p=Z(()=>{const l=qe(s.specs,s.variants),y=[],v=[];return l.forEach(C=>{const S=ze(C);S?y.push(S):v.push(C)}),{pairs:y,tags:v}},[s.specs,s.variants]),[k,M]=_({}),[P,h]=_({}),[$,w]=_({});U(()=>{if(!s)return;const l={};d.forEach(C=>{const S=c[C]||[];l[C]=S.length?[S[0]]:[]}),M(l);const y=(()=>{if(d.length===0)return[Y];const C=[],S=(m,t)=>{if(m===d.length){C.push(re(t));return}const x=d[m];(l[x]||[]).forEach(E=>S(m+1,{...t,[x]:E}))};return S(0,{}),C})(),v={};y.forEach(C=>{v[C]=0}),h(v)},[s]);const B=(l,y)=>M(v=>{const C=v[l]||[],S=C.includes(y)?C.filter(m=>m!==y):[...C,y];return{...v,[l]:S}}),G=l=>M(y=>({...y,[l]:[...c[l]||[]]})),W=l=>M(y=>({...y,[l]:[]})),D=(l,y)=>{const v=Math.max(0,Number(y)||0);w(C=>{const S=C[l];if(S===void 0)return C;if(v<S){const m={...C};return delete m[l],m}return C}),h(C=>({...C,[l]:v}))},T=Z(()=>{if(d.length===0)return[{key:Y,sel:{}}];if(d.some(v=>(k[v]||[]).length===0))return[];const l=[],y=(v,C)=>{if(v===d.length){l.push({key:re(C),sel:C});return}const S=d[v];(k[S]||[]).forEach(m=>y(v+1,{...C,[S]:m}))};return y(0,{}),l},[d,k]),L=()=>{let l=!1,y=!1;T.forEach(({key:v,sel:C})=>{const S=Number(P[v]||0);if(!(S>0))return;const m=Object.prototype.hasOwnProperty.call(u,v)?u[v]:Number(s.price)||0,t=b[v]!==void 0?b[v]:v===Y?b[Y]:void 0,x=A[v]||0,E=typeof t=="number"?Math.max(t-x,0):void 0,N=typeof E=="number"?Math.min(S,E):S;N>0?(e({id:s.id,name:s.name,sku:s.sku,price:m,qty:N,variants:C,inventoryKey:v}),l=!0,N<S&&(y=!0)):y=!0}),y&&alert("Some items were adjusted to match available stock."),l&&r()},K=Z(()=>T.reduce((l,{key:y})=>{const v=Number(P[y]||0);if(!Number.isFinite(v)||v<=0)return l;const C=Object.prototype.hasOwnProperty.call(u,y)?u[y]:Number(s.price)||0,S=b[y]!==void 0?b[y]:y===Y?b[Y]:void 0,m=A[y]||0,t=typeof S=="number"?Math.max(S-m,0):void 0,x=typeof t=="number"?Math.min(v,t):v;return x>0?l+x*C:l},0),[T,P,s.price,u,b,A]),F=T.every(({key:l})=>{const y=Number(P[l]||0);if(!(y>0))return!0;const v=b[l]!==void 0?b[l]:l===Y?b[Y]:void 0,C=A[l]||0,S=typeof v=="number"?Math.max(v-C,0):void 0;return!((typeof S=="number"?Math.min(y,S):y)>0)});return U(()=>{w(l=>{const y=new Set(T.map(({key:S})=>S));let v=!1;const C={};return Object.entries(l).forEach(([S,m])=>{y.has(S)?C[S]=m:v=!0}),v?C:l})},[T]),U(()=>{w({})},[s.id]),React.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":`product-title-${s.id}`,className:"fixed inset-0 z-50 flex items-stretch sm:items-center justify-center bg-black/40 p-0 sm:p-6",onClick:r,onTouchMove:l=>{l.target===l.currentTarget&&l.preventDefault()},onWheel:l=>{l.target===l.currentTarget&&l.preventDefault()}},React.createElement("div",{ref:g,tabIndex:-1,className:"w-full h-full sm:h-auto sm:max-w-3xl rounded-none sm:rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain overflow-y-auto max-h-none sm:max-h-[90vh]",style:{touchAction:"pan-y"},onClick:l=>l.stopPropagation()},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:`product-title-${s.id}`,className:"text-lg font-semibold text-slate-900"},s.name),React.createElement("button",{onClick:r,className:"rounded-full border border-transparent p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close"},React.createElement(et,{className:"h-5 w-5"}))),React.createElement("div",{className:"grid gap-6 p-5 lg:grid-cols-[minmax(0,1fr)_260px]"},React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl border border-[var(--surface-border)] bg-slate-100"},React.createElement("img",{src:i[0],onError:l=>{l.currentTarget.src=le(s.name)},alt:`${s.name} \u2013 photo`,className:"h-full w-full object-cover"})),s.description&&React.createElement("p",{className:"text-sm text-slate-600"},s.description),(p.pairs.length>0||p.tags.length>0)&&React.createElement("section",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Product information"),p.pairs.length>0&&React.createElement("dl",{className:"mt-3 grid grid-cols-1 gap-2"},p.pairs.map(({label:l,detail:y})=>React.createElement("div",{key:`${l}:${y}`,className:"flex items-baseline justify-between gap-3"},React.createElement("dt",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-slate-500"},l),React.createElement("dd",{className:"text-sm font-semibold text-slate-900"},y)))),p.tags.length>0&&React.createElement("div",{className:"mt-3 flex flex-wrap gap-1.5 text-[11px]"},p.tags.map(l=>React.createElement("span",{key:l,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},l)))),d.map(l=>{const y=c[l]||[],v=k[l]||[],C=l.toLowerCase().includes("color")||l==="Color";return React.createElement("div",{key:l,className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},l),y.length?React.createElement("div",{className:"flex items-center gap-2 text-xs text-slate-500"},React.createElement("button",{type:"button",onClick:()=>G(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:()=>W(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"Clear")):null),React.createElement("div",{className:"max-h-32 overflow-auto rounded-xl border border-[var(--surface-border)] bg-white/70 p-2"},React.createElement("div",{className:"flex flex-wrap gap-2 text-xs"},y.length===0?React.createElement("p",{className:"text-slate-500"},"No options"):y.map(S=>{const m=v.includes(S);return React.createElement("button",{type:"button",key:S,onClick:()=>B(l,S),className:z("inline-flex items-center gap-1 rounded-full border px-3 py-1 font-medium transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",m?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},C?React.createElement(ue,{name:S}):null,S)}))))}),React.createElement("div",{className:"space-y-3","aria-label":"Quantities"},T.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"Select at least one option."):React.createElement("div",{className:"max-h-80 overflow-y-auto space-y-3 pr-1"},T.map(({key:l,sel:y})=>{const v=Object.prototype.hasOwnProperty.call(u,l)?u[l]:Number(s.price)||0,C=Number(P[l]||0),S=b[l]!==void 0?b[l]:l===Y?b[Y]:void 0,m=A[l]||0,t=typeof S=="number"?Math.max(S-m,0):void 0,x=typeof t=="number"&&t<=0,E=$[l];return React.createElement("div",{key:l,className:z("rounded-2xl border px-3 py-3 text-sm shadow-sm backdrop-blur sm:flex sm:items-center sm:justify-between",x?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/85 text-slate-700")},React.createElement("div",{className:"space-y-1 text-sm"},Object.entries(y).map(([N,O],j)=>React.createElement("span",{key:`${N}-${O}`},j>0?" \xB7 ":"",N==="Color"?React.createElement("span",{className:"inline-flex items-center gap-1"},React.createElement(ue,{name:O}),O):React.createElement("span",{className:"font-medium text-slate-900"},O))),Object.keys(y).length===0&&React.createElement("span",{className:"font-medium text-slate-900"},"Quantity"),React.createElement("p",{className:"text-xs text-slate-500"},"Unit: ",React.createElement("span",{className:"font-semibold text-slate-900"},J(v)),C>0?React.createElement(React.Fragment,null," \xB7 Total: ",React.createElement("span",{className:"font-semibold text-slate-900"},J(v*C))):null),typeof S=="number"?React.createElement("p",{className:"text-xs text-slate-500"},`Remaining: ${Math.max(S-m,0)}${m>0?` (of ${S})`:""}`):React.createElement("p",{className:"text-xs text-slate-500"},"No stock limit")),React.createElement("div",{className:"mt-2 sm:mt-0"},React.createElement(at,{value:Number(P[l]||0),onChange:N=>D(l,N),min:0,max:typeof t=="number"?t:void 0,onLimit:N=>{typeof N=="number"&&Number.isFinite(N)&&w(O=>({...O,[l]:N}))}})),E!==void 0?React.createElement("p",{className:"mt-2 text-xs font-medium text-rose-600 sm:ml-3 sm:mt-0 sm:text-right"},`Only ${E} available for this selection.`):null)})))),React.createElement("aside",{className:"glass-card rounded-3xl space-y-5 p-5"},React.createElement("div",{className:"space-y-2 text-sm"},(()=>{const l=Number(s.price)||0,y=Object.values(u),v=y.length?Math.min(l,...y):l,C=y.length?Math.max(l,...y):l,S=v===C?J(v):`${J(v)}\u2013${J(C)}`,m=y.length?"Price range":"Unit price";return React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,m),React.createElement("span",{className:"font-semibold text-slate-900"},S))})(),React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Selections"),React.createElement("span",{className:"font-medium text-slate-800"},T.length))),React.createElement("div",{className:"flex items-center justify-between rounded-2xl border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-4 py-3 text-sm font-medium text-brand"},React.createElement("span",{className:"uppercase tracking-[0.18em]"},"Line total"),React.createElement("span",{className:"text-base font-semibold text-brand"},J(K))),React.createElement("p",{className:"text-xs text-slate-500"},"Add items to the cart and send the final list to WhatsApp when you are ready."),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{disabled:F,onClick:L,className:z("w-full rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",F?"pointer-events-none opacity-50":"hover:bg-brand-muted")},"Add to cart"),React.createElement("button",{onClick:r,className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Cancel"))))))}function at({id:a,value:r,onChange:e,min:n=0,max:s,onLimit:o}){const b=i=>{typeof s=="number"&&Number.isFinite(s)&&typeof o=="function"&&i>s&&o(s)},u=(i,c)=>{b(typeof c=="number"?c:i);let d=Math.max(n,i);return typeof s=="number"&&Number.isFinite(s)&&(d=Math.min(s,d)),d},A=Number(r)||0,g=typeof s=="number"&&Number.isFinite(s)&&A>=s;return React.createElement("div",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 shadow-sm backdrop-blur",role:"group","aria-label":"Quantity"},React.createElement("button",{onClick:()=>e(u((Number(r)||0)-1,(Number(r)||0)-1)),className:"rounded-l-full px-3 py-1.5 text-slate-700 transition hover:bg-brand-soft focus:outline-none focus-visible:outline-2 focus-visible:outline-brand touch-manipulation select-none","aria-label":"Decrease quantity"},"\u2212"),React.createElement("input",{id:a,inputMode:"numeric",pattern:"[0-9]*",value:String(r),onChange:i=>{const c=Number(i.target.value.replace(/[^0-9]/g,"")),d=Number.isFinite(c)?c:n;e(Number.isFinite(c)?u(d,d):n)},className:"w-14 appearance-none border-x border-[var(--surface-border)] bg-transparent px-2 py-1.5 text-center text-base sm:text-sm text-slate-900 focus:outline-none"}),React.createElement("button",{onClick:()=>e(u((Number(r)||0)+1,(Number(r)||0)+1)),className:z("rounded-r-full px-3 py-1.5 touch-manipulation select-none transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",g?"cursor-not-allowed text-slate-300":"text-slate-700 hover:bg-brand-soft"),"aria-label":"Increase quantity",disabled:g},"+"))}async function ta(a){var r;try{if((r=navigator.clipboard)!=null&&r.writeText)return await navigator.clipboard.writeText(a),!0}catch(e){}try{const e=document.createElement("textarea");return e.value=a,e.setAttribute("readonly",""),e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),!0}catch(e){return!1}}function aa({open:a,onClose:r,cart:e,productLookup:n}){const s=se(null);Se(a,s,r);const o=$t(),b=Z(()=>ra(e.items,e.subtotal,e.notes),[e.items,e.subtotal,e.notes]),u=e.items.some(p=>Number(p.qty)>0),A=`https://wa.me/${ye}?text=${encodeURIComponent(b)}`,g=`whatsapp://send?phone=${ye}&text=${encodeURIComponent(b)}`,i=/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent),[c,d]=_({});return U(()=>{d(p=>{const k=new Set((e.items||[]).map(h=>{if(!h)return null;const $=h.inventoryKey||re(h.variants||{});return`${h.id||""}::${$}`}).filter(Boolean));let M=!1;const P={};return Object.entries(p).forEach(([h,$])=>{k.has(h)?P[h]=$:M=!0}),M?P:p})},[e.items]),React.createElement("div",{"aria-live":"polite"},React.createElement("div",{className:z("fixed inset-0 z-40 bg-black/40 transition-opacity",a?"opacity-100":"pointer-events-none opacity-0"),onClick:r,onTouchMove:p=>{p.preventDefault()},onTouchStart:p=>{p.preventDefault()},onWheel:p=>{p.preventDefault()},"aria-hidden":"true"}),React.createElement("aside",{role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",className:z("fixed right-0 top-0 z-50 h-full w-full max-w-md transform border-l border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain",o?"transition-none":"transition-transform duration-200 ease-out",a?"translate-x-0":"translate-x-full")},React.createElement("div",{ref:s,className:"flex h-full flex-col"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:"cart-title",className:"text-lg font-semibold text-slate-900"},"Your cart"),React.createElement("button",{onClick:r,className:"rounded-full p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close cart"},React.createElement(et,{className:"h-5 w-5"}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-4",style:{touchAction:"pan-y"}},e.items.length===0?React.createElement("p",{className:"text-sm text-slate-500"},"Your cart is empty."):React.createElement("ul",{className:"space-y-3"},e.items.map((p,k)=>{const M=n&&typeof n.get=="function"?n.get(p.id):void 0,P=M?de(M.inventory):{},h=p.inventoryKey||re(p.variants||{}),$=P[h]!==void 0?P[h]:h===Y?P[Y]:void 0;let w=0;e.items.forEach((L,K)=>{if(K===k||!L||L.id!==p.id)return;(L.inventoryKey||re(L.variants||{}))===h&&(w+=Number(L.qty||0))});const B=typeof $=="number"?Math.max($-w,0):void 0,G=typeof B=="number"&&p.qty>B,W=typeof B=="number"?`Available: ${B}`:null,D=`${p.id||""}::${h}`,T=c[D];return React.createElement("li",{key:k,className:z("rounded-2xl border p-3 shadow-sm backdrop-blur transition",G?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/80 text-slate-700")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"font-semibold text-slate-900"},p.name),React.createElement("p",{className:"text-xs text-slate-500"},"SKU: ",p.sku),p.variants&&Object.keys(p.variants).length>0&&React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},Object.entries(p.variants).map(([L,K])=>React.createElement("span",{key:L,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2 py-0.5 text-xs font-medium text-slate-600"},L==="Color"?React.createElement(React.Fragment,null,React.createElement(ue,{name:K}),`${L}: ${K}`):`${L}: ${K}`))),W&&React.createElement("p",{className:"mt-1 text-xs text-slate-500"},W),T!==void 0?React.createElement("p",{className:"mt-1 text-xs font-medium text-rose-600"},`Only ${T} available for this selection.`):null),React.createElement("button",{onClick:()=>e.removeIndex(k),className:"rounded-full p-1.5 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":`Remove ${p.name}`},React.createElement(Ht,{className:"h-4 w-4 text-slate-500"}))),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement(at,{value:p.qty,onChange:L=>{const K=typeof B=="number"?Math.min(L,B):L;e.updateQty(k,K),d(F=>{const l=F[D];if(l===void 0)return F;if(K<l){const y={...F};return delete y[D],y}return F})},min:0,max:typeof B=="number"?B:void 0,onLimit:L=>{typeof L=="number"&&Number.isFinite(L)&&d(K=>({...K,[D]:L}))}}),React.createElement("div",{className:"text-sm text-slate-600"},J(p.price)," \xD7 ",p.qty," = ",React.createElement("span",{className:"font-semibold text-slate-900"},J(p.price*p.qty)))))}))),React.createElement("div",{className:"border-t border-[var(--surface-border)] bg-white/60 p-4 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between text-sm text-slate-600"},React.createElement("span",null,"Subtotal"),React.createElement("span",{className:"font-semibold text-slate-900"},J(e.subtotal))),React.createElement("label",{className:"mt-3 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Notes"),React.createElement("textarea",{value:e.notes,onChange:p=>e.setNotes(p.target.value),rows:2,className:"w-full resize-none rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",placeholder:"Delivery preferences, color mix, etc."})),React.createElement("div",{className:"mt-3 flex gap-3"},React.createElement("button",{onClick:e.clear,className:"flex-1 rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Clear cart"),React.createElement("button",{type:"button",onClick:async()=>{if(!u){alert("Add at least one product before sending an order.");return}if(e.items.filter((h,$)=>{const w=n&&typeof n.get=="function"?n.get(h.id):void 0,B=w?de(w.inventory):{},G=h.inventoryKey||re(h.variants||{}),W=B[G]!==void 0?B[G]:G===Y?B[Y]:void 0;if(typeof W!="number")return!1;let D=0;e.items.forEach((L,K)=>{if(K===$||!L||L.id!==h.id)return;(L.inventoryKey||re(L.variants||{}))===G&&(D+=Number(L.qty||0))});const T=Math.max(W-D,0);return h.qty>T}).length>0){alert("One or more items exceed available stock. Please adjust the quantities before sending the order.");return}try{await he("createOrder",{currency:Ke,subtotal_cents:Math.round(e.subtotal*100),notes:e.notes||"",items:e.items.map((h,$)=>({product_id:h.id,sku:h.sku,name:h.name,quantity:Number(h.qty)||0,unit_price_cents:Math.round(Number(h.price||0)*100),subtotal_cents:Math.round(Number(h.price||0)*Number(h.qty||0)*100),variants:h.variants||{},inventory_key:h.inventoryKey||re(h.variants||{})}))})}catch(h){console.error("Failed to record order",h)}try{await ta(b),alert("\u2705 Your list is copied! If WhatsApp doesn't open, you can paste it manually.")}catch(h){alert("\u{1F4CB} Please copy your order manually if WhatsApp doesn't open automatically.")}let k=!1;const M=()=>{k||(k=!0,e.clear(),e.setNotes(""))},P=()=>M();if(window.addEventListener("pagehide",P,{once:!0}),document.addEventListener("visibilitychange",function h(){document.hidden&&(M(),document.removeEventListener("visibilitychange",h))},{once:!0}),i)M(),window.location.href=g,setTimeout(()=>{try{window.open(A,"_blank","noopener,noreferrer")}catch(h){}},800);else{const h=window.open(A,"_blank","noopener,noreferrer");setTimeout(M,500)}},className:z("flex-1 inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",u?"bg-brand hover:bg-brand-muted":"pointer-events-none bg-[rgba(37,99,235,0.28)] text-white/70")},"Send via WhatsApp",React.createElement(tt,{className:"h-4 w-4 text-white"})))))))}function ra(a,r,e){const n=(a||[]).filter(o=>Number(o.qty)>0);let s=`\u{1F6D2} *Order Request*

`;return n.forEach(o=>{s+=`\u2022 ${o.name} (SKU: ${o.sku})
`,o.variants&&Object.keys(o.variants).length>0&&(s+=`  Variants: ${Object.entries(o.variants).map(([b,u])=>`${b}: ${u}`).join(", ")}
`),s+=`  Qty: ${o.qty} \xD7 ${J(o.price)} = ${J(o.price*o.qty)}

`}),s+=`*Subtotal: ${J(r)}*

`,(e||"").trim()&&(s+=`*Notes:* ${e.trim()}

`),s+="Please confirm availability and pricing. Thank you!",s}function sa({addProduct:a,products:r,removeProduct:e,onNotify:n}){const[s,o]=_("Phone Screens"),[b,u]=_("");U(()=>{u(t=>{const x=new Set(fe),E=(t||"").trim(),N=x.has(E.replace(" \u2014",""))||E.endsWith(" \u2014");return!E||N?`${s} \u2014 `:t})},[s]);const[A,g]=_(""),[i,c]=_(""),[d,p]=_(""),[k,M]=_([]),[P,h]=_([]),[$,w]=_(null),[B,G]=_(!1),[W,D]=_({}),T=(t,x)=>{h([]),w(null),D(E=>({...E,[t]:x}))},L=(t,x)=>D(E=>{h([]),w(null);const N=Array.isArray(E[t])?E[t]:[];return{...E,[t]:N.includes(x)?N.filter(O=>O!==x):[...N,x]}});function K(t){h([]),w(null);const x=Array.from(t.target.files||[]);if(!x.length)return;const E=x.map(N=>new Promise(O=>{const j=new FileReader;j.onload=()=>O(String(j.result||"")),j.readAsDataURL(N)}));Promise.all(E).then(N=>M(O=>[...O,...N]))}const F=t=>Array.isArray(t)&&t.length?t[0]:t!=null?t:"",l={"Phone Screens":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"display",label:"Display type/quality",type:"select",options:["OLED \u2013 OEM","OLED \u2013 AAA","LCD \u2013 OEM","LCD \u2013 AAA"]},{key:"frame",label:"Frame",type:"select",options:["With frame","Without frame"]}],also:[{key:"frontColor",label:"Front color",type:"select",options:["Black","White"]},{key:"retention",label:"True Tone/Face ID retention",type:"checkbox"}],optional:[{key:"adhesive",label:"Pre-installed adhesive / waterproof gasket",type:"checkbox"}],name:t=>`Screen \u2014 ${F(t.models)} ${t.display?`${String(t.display).split(" ")[0]}`:""}`.trim(),specs:t=>[t.display,t.frame,t.frontColor].filter(Boolean)},"Back Glass":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"colors",label:"Colors / finish",type:"multiselect",options:me}],also:[{key:"adhesive",label:"Adhesive pre-installed",type:"checkbox"},{key:"rings",label:"With camera rings",type:"checkbox"}],optional:[{key:"grade",label:"Quality grade",type:"select",options:We}],name:t=>`Back Glass \u2014 ${F(t.models)}`.trim(),specs:t=>[F(t.colors)||null,t.grade,t.adhesive?"Adhesive":null,t.rings?"Camera rings":null].filter(Boolean)},"Power Banks":{must:[{key:"capacity",label:"Capacity",type:"select",options:Tt},{key:"ports",label:"Output ports",type:"select",options:je}],also:[{key:"standard",label:"Standard",type:"select",options:ce}],optional:[{key:"colour",label:"Colour",type:"select",options:me}],name:t=>`Power bank \u2014 ${t.capacity||""}`.trim(),specs:t=>[t.capacity,t.ports,t.standard].filter(Boolean)},"Screen Protectors":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:kt},{key:"pack",label:"Pack",type:"select",options:St}],also:[{key:"finish",label:"Finish",type:"select",options:At},{key:"coverage",label:"Coverage",type:"select",options:Ct}],optional:[],name:t=>`Protector \u2014 ${F(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,t.finish,t.coverage].filter(Boolean)},Batteries:{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"grade",label:"Grade",type:"select",options:We}],also:[],optional:[{key:"capacity",label:"Capacity (mAh)",type:"text",placeholder:"e.g. 3000"}],name:t=>`Battery \u2014 ${F(t.models)}`.trim(),specs:t=>[t.grade,t.capacity].filter(Boolean)},"Mobile Phones":{must:[{key:"model",label:"Model",type:"text",placeholder:"e.g., iPhone 13"},{key:"cond",label:"Condition/grade",type:"select",options:Te},{key:"sim",label:"SIM",type:"select",options:It}],also:[{key:"connect",label:"Connectivity",type:"select",options:Wt},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:$e},{key:"ram",label:"RAM",type:"multiselect",options:Fe},{key:"color",label:"Color",type:"text"},{key:"inbox",label:"Accessories in box",type:"text",placeholder:"Cable, charger"}],name:t=>`${t.model||""} ${t.cond||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.cond,t.sim,t.connect].filter(Boolean)},Tablets:{must:[{key:"model",label:"Model",type:"text",placeholder:"iPad 10th Gen"},{key:"conn",label:"Connectivity",type:"select",options:Lt}],also:[{key:"screen",label:"Screen size",type:"text",placeholder:'10.9"'},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:$e},{key:"ram",label:"RAM",type:"multiselect",options:Fe},{key:"cond",label:"Condition/grade",type:"select",options:Te},{key:"color",label:"Color",type:"text"},{key:"compat",label:"Pencil/keyboard compatibility",type:"text"}],name:t=>`${t.model||""} ${t.conn||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.conn,t.screen,t.cond].filter(Boolean)},"Phone Cases":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:Rt}],also:[{key:"color",label:"Color",type:"multiselect",options:me}],optional:[{key:"pattern",label:"Pattern / style",type:"text"}],name:t=>`Case \u2014 ${F(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,F(t.color)||null].filter(Boolean)},Cables:{must:[{key:"connector",label:"Connector",type:"select",options:Le},{key:"length",label:"Length",type:"select",options:Ze}],also:[{key:"rating",label:"Power rating",type:"select",options:Pt},{key:"durability",label:"Durability",type:"select",options:Ot}],optional:[{key:"cert",label:"Certs",type:"select",options:Bt}],name:t=>`Cable \u2014 ${t.connector||""} ${t.length?`(${t.length})`:""}`.trim(),specs:t=>[t.connector,t.length,t.rating].filter(Boolean)},Chargers:{must:[{key:"wattage",label:"Wattage",type:"select",options:Mt||["20W","30W","45W","65W"]},{key:"ports",label:"Ports",type:"select",options:je}],also:[{key:"standard",label:"Standard",type:"select",options:ce},{key:"plug",label:"Plug type",type:"select",options:_t}],optional:[],name:t=>`Charger \u2014 ${t.wattage||""}`.trim(),specs:t=>[t.wattage,t.ports].filter(Boolean)},Earphones:{must:[{key:"type",label:"Type",type:"select",options:["Wired","TWS"]}],also:[{key:"connector",label:"Connector / Standard",type:"select",options:[...Le,...ce]}],optional:[{key:"color",label:"Color",type:"select",options:me}],name:t=>`Earphones \u2014 ${t.type||""}`.trim(),specs:t=>[t.type,t.connector].filter(Boolean)},"Charging Ports":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"type",label:"Port type",type:"select",options:["USB-C","Lightning","Micro-USB"]}],also:[],optional:[{key:"solderRequired",label:"Solder required",type:"checkbox"}],name:t=>`Charging port \u2014 ${F(t.models)}`.trim(),specs:t=>[t.type,t.solderRequired?"Solder":null].filter(Boolean)},"Face ID":{must:[{key:"models",label:"Phone models",type:"phoneModels",allowedBrands:["iPhone"]},{key:"service",label:"Service",type:"select",options:["Repair","Replace","Calibration"]}],also:[],optional:[],name:t=>`Face ID \u2014 ${F(t.models)}`.trim(),specs:t=>[t.service].filter(Boolean)}};U(()=>{const t=l[s]||{must:[],also:[],optional:[]},x={},E=N=>N.forEach(O=>{O.type==="select"&&(x[O.key]=""),O.type==="number"&&(x[O.key]=""),O.type==="text"&&(x[O.key]=""),O.type==="checkbox"&&(x[O.key]=!1),O.type==="multiselect"&&(x[O.key]=[])});E(t.must),E(t.also),E(t.optional),D(x)},[s]);const y=({f:t})=>{var N,O;if(!t)return null;const x="mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500",E="w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand";if(t.type==="select")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:x},t.label),React.createElement("select",{value:(N=W[t.key])!=null?N:"",onChange:j=>T(t.key,j.target.value),className:E},(t.options||[]).map(j=>React.createElement("option",{key:j,value:j},j))));if(t.type==="text"||t.type==="number")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:x},t.label),React.createElement("input",{type:t.type,value:(O=W[t.key])!=null?O:"",onChange:j=>T(t.key,t.type==="number"?j.target.value.replace(/[^0-9.]/g,""):j.target.value),placeholder:t.placeholder||"",className:E}));if(t.type==="checkbox")return React.createElement("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-2 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("input",{type:"checkbox",checked:!!W[t.key],onChange:j=>T(t.key,j.target.checked),className:"h-4 w-4 rounded border-[var(--surface-border)] text-brand focus:ring-brand"}),React.createElement("span",null,t.label));if(t.type==="multiselect"){const j=t.options||[],Q=Array.isArray(W[t.key])?W[t.key]:[];return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},t.label),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:()=>T(t.key,j),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>T(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},j.map(V=>{const oe=Q.includes(V),q=Ae[V]!==void 0||/color/i.test(t.label);return React.createElement("button",{type:"button",key:V,onClick:()=>L(t.key,V),className:z("inline-flex items-center gap-1 rounded-full border px-2.5 py-1 font-medium transition",oe?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},q?React.createElement(React.Fragment,null,React.createElement(ue,{name:V}),V):V)})))}if(t.type==="phoneModels"){const j=`${t.key}Brand`,Q=W[j]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"),V=wt[Q]||[],oe=Array.isArray(W[t.key])?W[t.key]:[],q=f=>{T(j,f),T(t.key,[])};return React.createElement("div",{className:"space-y-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},(t.allowedBrands||vt).map(f=>React.createElement("button",{type:"button",key:f,onClick:()=>q(f),className:z("rounded-full border px-2.5 py-1 font-medium transition",(W[`${t.key}Brand`]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"))===f?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},f))),React.createElement("div",{className:"flex items-center justify-between text-xs text-slate-500"},React.createElement("span",{className:"font-semibold text-slate-800"},`${Q} models`),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>T(t.key,V),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>T(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},V.map(f=>{const R=oe.includes(f);return React.createElement("button",{type:"button",key:f,onClick:()=>{const I=Array.isArray(W[t.key])?W[t.key]:[];T(t.key,R?I.filter(H=>H!==f):[...I,f])},className:z("rounded-full border px-2.5 py-1 font-medium transition",R?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},f)})))}return null},v=()=>{const t=l[s]||{must:[],also:[],optional:[],name:null,specs:null},x=t.name&&t.name(W)||`${s} item`,E=b.trim()||x,N={},O=(q,f)=>{if(f==="models")return"Model";const R=String(q).toLowerCase().trim();return R==="color"||R==="colors"||R==="colour"?"Color":q.trim()},j=(q,f,R)=>{if(R==null||R===""||Array.isArray(R)&&R.length===0)return;const I=O(q,f);N[I]=Array.isArray(R)?R:[String(R)]};[...t.must||[],...t.also||[],...t.optional||[]].forEach(q=>{const f=W[q.key];q.type==="checkbox"?f&&j(q.label,q.key,"Yes"):j(q.label,q.key,f)}),W.modelsBrand&&j("Phone","modelsBrand",W.modelsBrand),Object.keys(N).forEach(q=>{const f=Array.isArray(N[q])?N[q].map(R=>String(R).trim()).filter(Boolean):[];f.length?N[q]=Array.from(new Set(f)):delete N[q]});const Q=(t.specs&&t.specs(W)||[]).filter(Boolean).slice(0,6),V=Array.from(new Set((k||[]).filter(Boolean))),oe={id:`owner-${Date.now()}`,name:E,sku:A.trim()||`SKU-${(Math.random()*1e6|0).toString(36)}`,category:s,price:Number(i)||0,description:d.trim(),image:V[0]||void 0,images:V.length?V:void 0,specs:Q,variants:N};return X(oe)},C=()=>{var j;const t=[],x=l[s]||{must:[]},E=Number(i);(!Number.isFinite(E)||E<=0)&&t.push("Price must be greater than 0");const N=(x.must||[]).find(Q=>Q.type==="phoneModels");if(N){const Q=W[N.key];(!Array.isArray(Q)||Q.length===0)&&t.push("Please select at least one model")}const O=(x.must||[]).find(Q=>Q.key==="model");return O&&(String((j=W[O.key])!=null?j:"").trim()||t.push("Model is required")),t},S=async()=>{const t=C();if(t.length){h(t),w(null);return}const x=v();if(x){G(!0);try{const E=await a(x),N=!!(E&&E.persisted);h([]),N?w({type:"success",message:"Product added to catalogue."}):(w({type:"warning",message:"Product saved locally. Supabase sync pending."}),n==null||n("warning","Supabase connection unavailable. Product stored locally until sync succeeds.")),u(`${s} \u2014 `),g(""),c(""),p(""),M([]),D({})}catch(E){console.error("Failed to add product:",E),w({type:"error",message:"Could not save product. Check your connection and try again."}),n==null||n("error","Could not add product. Check your connection and try again.")}finally{G(!1)}}},m=l[s]||{must:[],also:[],optional:[]};return React.createElement("section",{"aria-labelledby":"owner-title",className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8"},React.createElement("div",{className:"glass-card space-y-6 rounded-3xl p-6 sm:p-8"},React.createElement("div",{className:"space-y-2"},React.createElement("h2",{id:"owner-title",className:"text-2xl font-semibold text-slate-900"},"Owner \u2014 Add products"),React.createElement("p",{className:"text-sm text-slate-600"},"Only essentials. Fields shift by category. Keep data clean; the catalogue updates instantly.")),$&&React.createElement("div",{className:z("rounded-2xl border px-4 py-3 text-sm shadow-sm",$.type==="error"?"border-rose-200 bg-rose-50/80 text-rose-700":$.type==="warning"?"border-amber-200 bg-amber-50/80 text-amber-700":"border-emerald-200 bg-emerald-50/80 text-emerald-700")},$.message),P.length>0&&React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/80 px-4 py-3 text-sm text-amber-700 shadow-sm"},React.createElement("p",{className:"font-semibold"},"Please fix the following:"),React.createElement("ul",{className:"mt-1 list-disc space-y-0.5 pl-4"},P.map((t,x)=>React.createElement("li",{key:x},t)))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Essentials"),React.createElement("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2"},React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Category"),React.createElement("select",{value:s,onChange:t=>{h([]),w(null),o(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},fe.filter(t=>t!=="All").map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:i,onChange:t=>{h([]),w(null),c(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Name"),React.createElement("input",{value:b,onChange:t=>{h([]),w(null),u(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"SKU"),React.createElement("input",{value:A,onChange:t=>{h([]),w(null),g(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"md:col-span-2 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Short description"),React.createElement("textarea",{rows:3,value:d,onChange:t=>{h([]),w(null),p(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:K}),k.length>0&&React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},k.map((t,x)=>React.createElement("div",{key:x,className:"relative"},React.createElement("img",{src:t,alt:`preview ${x+1}`,className:"h-20 w-20 overflow-hidden rounded-xl border border-[var(--surface-border)] object-cover"}),React.createElement("button",{type:"button",onClick:()=>{h([]),w(null),M(E=>E.filter((N,O)=>O!==x))},className:"absolute -right-1 -top-1 rounded-full border border-[var(--surface-border)] bg-white px-1 text-xs shadow","aria-label":`Remove photo ${x+1}`},"\xD7"))))))),React.createElement("div",{className:"space-y-3"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Variants & Specs"),React.createElement("div",{className:"grid gap-3 md:grid-cols-2"},[...m.must||[],...m.also||[],...m.optional||[]].map(t=>React.createElement(y,{key:t.key,f:t})))),React.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},React.createElement("button",{type:"button",onClick:S,disabled:B,className:z("inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",B?"bg-brand/50 cursor-not-allowed opacity-70":"bg-brand hover:bg-brand-muted")},B?"Saving...":"Add Product"),React.createElement("button",{type:"button",onClick:()=>{var t;return(t=window.__setOwnerManage)==null?void 0:t.call(window,!0)},className:"inline-flex items-center justify-center rounded-full border border-[var(--surface-border)] bg-white/70 px-6 py-2 text-sm font-semibold text-slate-800 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Manage catalogue"))))}function Ge({label:a,options:r,value:e,onChange:n}){const s=()=>n(r),o=()=>n([]),b=u=>n(e.includes(u)?e.filter(A=>A!==u):[...e,u]);return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},a),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:s,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:o,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},r.map(u=>{const A=e.includes(u),g=/color/i.test(a)||Ae[u]!==void 0;return React.createElement("button",{type:"button",key:u,onClick:()=>b(u),className:z("rounded-full border px-2 py-1 text-xs",A?"border-transparent bg-brand text-white":"border-[var(--surface-border)] bg-white text-slate-700")},g?React.createElement(React.Fragment,null,React.createElement(ue,{name:u})," ",u):u)})))}function na({open:a,onClose:r,product:e,onSave:n,onHide:s,onDelete:o}){var l,y,v,C,S;const b=se(null);Se(!!a,b,r);const[u,A]=_((e==null?void 0:e.name)||""),[g,i]=_((e==null?void 0:e.sku)||""),[c,d]=_(String((l=e==null?void 0:e.price)!=null?l:0)),[p,k]=_((e==null?void 0:e.description)||""),[M,P]=_(()=>[...Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[]]),[h,$]=_(0),[w,B]=_(()=>{const m={...(e==null?void 0:e.variants)||{}};return m.Color&&!Array.isArray(m.Color)&&(m.Color=[m.Color]),m.Model&&!Array.isArray(m.Model)&&(m.Model=[m.Model]),m});U(()=>{var t;if(!a)return;A((e==null?void 0:e.name)||""),i((e==null?void 0:e.sku)||""),d(String((t=e==null?void 0:e.price)!=null?t:0)),k((e==null?void 0:e.description)||"");const m=Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[];P([...m]),$(0),B({...(e==null?void 0:e.variants)||{}})},[a,e]);const G=m=>{const t=Array.from(m.target.files||[]);if(!t.length)return;const x=t.map(E=>new Promise(N=>{const O=new FileReader;O.onload=()=>N(String(O.result||"")),O.readAsDataURL(E)}));Promise.all(x).then(E=>P(N=>[...N,...E]))},W=()=>$(m=>(m-1+M.length)%M.length),D=()=>$(m=>(m+1)%M.length),T=()=>{const m=Object.fromEntries(Object.entries(w||{}).map(([O,j])=>{const Q=Array.isArray(j)?j.map(V=>String(V).trim()).filter(Boolean):[];return[O,Array.from(new Set(Q))]}).filter(([,O])=>Array.isArray(O)&&O.length)),t=u.trim()||e.name,x=g.trim()||e.sku,E=Number(c),N=X({...e||{},name:t,sku:x,price:Number.isFinite(E)&&E>0?E:Number(e.price)||0,description:p,images:M.length?M:void 0,image:M[0]||void 0,variants:m});n(N,e==null?void 0:e.id),r()},L=!!((v=(y=e==null?void 0:e.id)==null?void 0:y.startsWith)!=null&&v.call(y,"owner-")),K=Array.from(new Set([...w.Model||[]])),F=Array.from(new Set([...w.Color||[]]));return!a||!e?null:React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-0 sm:p-6",role:"dialog","aria-modal":"true"},React.createElement("div",{ref:b,className:"w-full sm:max-w-3xl rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none max-h-[90vh] overflow-y-auto"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{className:"text-lg font-semibold text-slate-900"},"Edit product"),React.createElement("div",{className:"flex items-center gap-2"},!L&&React.createElement("button",{onClick:()=>{s(e.id),r()},className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Hide base"),L&&React.createElement("button",{onClick:()=>{o(e.id),r()},className:"rounded-full border border-rose-300 bg-rose-50/80 px-3.5 py-1.5 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-rose-400"},"Delete"),React.createElement("button",{onClick:r,className:"rounded-full px-3.5 py-1.5 text-sm font-semibold text-slate-500 transition hover:bg-white/70 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Close"))),React.createElement("div",{className:"grid gap-4 p-4 sm:grid-cols-2"},React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-xl bg-gray-100"},React.createElement("img",{src:pe(M[h]||"",e.name),onError:m=>{m.currentTarget.src=le(e.name)},alt:`${e.name} \u2013 photo ${h+1} of ${M.length}`,className:"h-full w-full object-cover"}),M.length>1&&React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:W,className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Previous photo"},"\u2039"),React.createElement("button",{type:"button",onClick:D,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Next photo"},"\u203A"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"text-xs text-slate-700 inline-flex items-center gap-2"},React.createElement("span",{className:"rounded-full border border-[var(--surface-border)] bg-white px-2 py-1"},"Add photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:G,className:"sr-only"}))),M.length>0&&React.createElement("div",{className:"flex gap-2 overflow-x-auto"},M.map((m,t)=>React.createElement("div",{key:t,className:z("relative h-14 w-20 flex-shrink-0 overflow-hidden rounded-md border",t===h?"border-brand":"border-[var(--surface-border)]")},React.createElement("button",{type:"button",onClick:()=>$(t),className:"absolute inset-0"},React.createElement("img",{src:pe(m,e.name),alt:"",className:"h-full w-full object-cover"})),React.createElement("button",{type:"button",onClick:()=>P(x=>x.filter((E,N)=>N!==t)),className:"absolute -right-1 -top-1 rounded-full bg-white border p-0.5 shadow","aria-label":`Remove photo ${t+1}`},"\xD7"))))),React.createElement("div",{className:"flex min-w-0 flex-col gap-3"},React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Name"),React.createElement("input",{value:u,onChange:m=>A(m.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"SKU"),React.createElement("input",{value:g,onChange:m=>i(m.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:c,onChange:m=>d(m.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Description"),React.createElement("textarea",{rows:3,value:p,onChange:m=>k(m.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("div",{className:"grid gap-3"},!!((C=e==null?void 0:e.variants)!=null&&C.Model)&&React.createElement(Ge,{label:"Models",options:[...be,...Re,...ke],value:K,onChange:m=>B(t=>({...t,Model:m}))}),!!((S=e==null?void 0:e.variants)!=null&&S.Color)&&React.createElement(Ge,{label:"Colors",options:me,value:F,onChange:m=>B(t=>({...t,Color:m}))}),Object.entries((e==null?void 0:e.variants)||{}).filter(([m])=>m!=="Model"&&m!=="Color").map(([m,t])=>React.createElement("div",{key:m,className:"text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},m),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(w[m]||t).map(x=>React.createElement("span",{key:x,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-1 text-xs font-medium text-slate-600"},x,React.createElement("button",{type:"button",onClick:()=>B(E=>({...E,[m]:(E[m]||t).filter(N=>N!==x)})),"aria-label":`Remove ${x}`},"\xD7")))),React.createElement("div",{className:"mt-1 flex gap-2"},React.createElement("input",{type:"text",placeholder:`Add ${m} option`,className:"w-44 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-medium text-slate-700 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onKeyDown:x=>{if(x.key==="Enter"){const E=x.currentTarget.value.trim();E&&B(N=>({...N,[m]:Array.from(new Set([...N[m]||t,E]))})),x.currentTarget.value=""}}}),React.createElement("button",{type:"button",className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onClick:x=>{const E=x.currentTarget.previousSibling;if(E&&E.value){const N=E.value.trim();B(O=>({...O,[m]:Array.from(new Set([...O[m]||t,N]))})),E.value=""}}},"Add"))))),React.createElement("div",{className:"mt-2 flex justify-end gap-3"},React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white px-4 py-2 text-sm text-slate-900 hover:bg-white/70"},"Cancel"),React.createElement("button",{onClick:T,className:"rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-muted"},"Save changes"))))))}function oa({products:a,onClose:r,onEdit:e,onHide:n,onDelete:s,onSave:o}){const[b,u]=_(""),[A,g]=_(null),i=Z(()=>{let c=a;if(b){const d=b.toLowerCase();c=c.filter(p=>p.name.toLowerCase().includes(d)||p.sku.toLowerCase().includes(d)||(p.description||"").toLowerCase().includes(d))}return c},[a,b]);return React.createElement("section",{"aria-labelledby":"mgr-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"flex items-center justify-between gap-3 py-2"},React.createElement("h2",{id:"mgr-title",className:"text-base sm:text-lg font-semibold text-slate-900"},"Owner \u2014 Manage catalogue"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"relative"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:b,onChange:c=>u(c.target.value),placeholder:"Search\u2026",type:"search",className:"w-48 sm:w-64 rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"}),React.createElement(Ee,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Back")))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},(i||[]).map(c=>React.createElement("article",{key:c.id,className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full bg-gray-100"},React.createElement("img",{src:pe(Array.isArray(c.images)&&c.images[0]||c.image||"",c.name),onError:d=>{d.currentTarget.src=le(c.name)},alt:c.name,className:"h-full w-full object-cover"})),React.createElement("div",{className:"flex flex-1 flex-col gap-3 p-4"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},c.name),React.createElement("p",{className:"mt-0.5 text-xs text-slate-500"},"SKU: ",c.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(c.specs||[]).slice(0,4).map(d=>React.createElement("span",{key:d,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 text-xs font-medium text-slate-600"},d))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"font-semibold text-slate-900"},J(c.price)),c.minOrder&&React.createElement("span",{className:"text-xs text-slate-500"},"MOQ ",c.minOrder)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>g(c),className:"flex-1 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted"},"Edit"),c.id.startsWith("owner-")?React.createElement("button",{onClick:()=>s(c.id),className:"rounded-full border border-red-300 bg-white px-3 py-2 text-sm text-red-700 hover:bg-red-50"},"Delete"):React.createElement("button",{onClick:()=>n(c.id),className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white"},"Hide")))))),React.createElement(na,{open:!!A,onClose:()=>g(null),product:A,onSave:o,onHide:n,onDelete:s}))}function la(){const[a,r]=_(De),e=React.useRef(0),[n,s]=_(""),[o,b]=_("All"),[u,A]=_("All"),[g,i]=_(null),[c,d]=_(!1),[p,k]=_(!1),[M,P]=_(ot&&xe),h=ge?!0:xe?M:!1,$=Ut(),w=Be?P:()=>{},[B,G]=_(null),W=se(null),D=(f,R)=>{R&&(G({type:f,message:R}),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>G(null),4e3))};U(()=>()=>{W.current&&clearTimeout(W.current)},[]);const{ownerProducts:T,setOwnerProducts:L,addProduct:K,deleteProduct:F,loading:l,connectionStatus:y}=Gt(),v=Nt(T),C=Z(()=>{const f=((v==null?void 0:v.families)||[]).map(ee=>ee&&typeof ee=="object"?ee.name:null).filter(Boolean),R=["iPhone","Samsung S","Samsung A","Accessories"],I=f.length?f:R,H=[],te=new Set;return I.forEach(ee=>{const ae=String(ee||"").trim();!ae||te.has(ae)||(te.add(ae),H.push(ae))}),["All",...H]},[v]);U(()=>{C.includes(u)||A("All")},[C,u]),Dt(!!(g||c),e);const m=Z(()=>{const f=new Map(De.map(I=>[I.id,I])),R=[];return T.forEach(I=>{if(!(!I||I.id===ve)){if(I.sourceId&&f.has(I.sourceId)){if(I.hidden){f.delete(I.sourceId);return}f.delete(I.sourceId)}I.hidden||(I.sourceId?f.set(I.id,I):R.push(I))}}),[...R,...Array.from(f.values())]},[T]),t=Z(()=>{const f=new Map,R=new Set;return m.forEach(I=>{if(!I||I.id===ve)return;const H=String(I.category||"").trim();if(!H||H==="All")return;const te=Me(I);f.has(te)||f.set(te,new Set),f.get(te).add(H),R.add(H)}),{byFamily:f,all:R}},[m]),x=Z(()=>{const f=Array.isArray(v==null?void 0:v.categories)?v.categories.filter(Boolean):[],R=f.length?f:fe.filter(ee=>ee!=="All"),I=u==="All"?t.all:t.byFamily.get(u)||new Set,H=R.filter(ee=>I.has(ee)),te=Array.from(I).filter(ee=>!R.includes(ee)).sort((ee,ae)=>ee.localeCompare(ae));return["All",...H,...te]},[v,u,t]);U(()=>{x.includes(o)||b("All")},[x,o]),U(()=>{b("All")},[u]);const E=Z(()=>{let f=m;return u!=="All"&&(f=f.filter(R=>Me(R)===u)),o!=="All"&&(f=f.filter(R=>R.category===o)),n&&(f=f.filter(R=>R.name.toLowerCase().includes(n.toLowerCase())||R.sku.toLowerCase().includes(n.toLowerCase())||(R.description||"").toLowerCase().includes(n.toLowerCase()))),f},[m,u,o,n]),N=Z(()=>{const f=new Map;return m.forEach(R=>{R&&R.id&&f.set(R.id,R)}),f},[m]),O=F;U(()=>(window.__setOwnerManage=k,()=>{window.__setOwnerManage=void 0}),[]);const j=f=>L(R=>{const I=R.findIndex(H=>H.id===f.id);if(I>=0){const H=[...R];return H[I]=f,H}return[...R,f]}),Q=async(f,R)=>{var ae,Ce;const I=(Ce=(ae=f.id)==null?void 0:ae.startsWith)==null?void 0:Ce.call(ae,"owner-"),H=X(I?f:{...f,id:`owner-${Date.now()}`,sourceId:R}),te=await Ie(H);j(te||H),te?D("success","Product updated."):D("warning","Product updated locally. Supabase sync pending.")},V=async f=>{const R=X({id:`owner-hide-${Date.now()}`,sourceId:f,hidden:!0,name:"",sku:"",category:"All",price:0,description:"",specs:[]}),I=await Ie(R);j(I||R),I?D("success","Base product hidden."):D("warning","Base product hidden locally. Supabase sync pending.")},oe=async f=>{const R=await F(f);return R?D("success","Product deleted."):D("error","Could not delete product. Check your connection and try again."),R},q=$.items.reduce((f,R)=>f+(Number(R.qty)||0),0);return l?React.createElement("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),React.createElement("p",{className:"text-slate-600"},"Loading products..."))):React.createElement("div",{className:"min-h-screen bg-slate-50"},React.createElement(Yt),B&&React.createElement("div",{className:z("fixed bottom-4 right-4 z-40 max-w-sm rounded-lg border px-4 py-3 text-sm shadow-lg backdrop-blur",B.type==="error"?"border-red-200 bg-red-50/90 text-red-700":B.type==="warning"?"border-amber-200 bg-amber-50/90 text-amber-800":"border-emerald-200 bg-emerald-50/90 text-emerald-700")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("span",{className:"flex-1 leading-snug"},B.message),React.createElement("button",{type:"button",onClick:()=>G(null),className:"text-xs font-medium uppercase tracking-wide text-slate-500 hover:text-slate-700"},"Dismiss"))),React.createElement(Qt,{onOpenCart:()=>{e.current=window.scrollY||0,d(!0)},search:n,setSearch:s,ownerMode:h,setOwnerMode:w,cartQty:q,connectionStatus:y,allowOwnerToggle:Be,families:C,family:u,setFamily:A}),h?p?React.createElement(oa,{products:m,onClose:()=>k(!1),onEdit:f=>{e.current=window.scrollY||0,i({__edit:!0,product:f})},onHide:f=>V(f),onDelete:f=>oe(f),onSave:Q}):React.createElement(sa,{addProduct:K,products:T,removeProduct:f=>oe(f),onNotify:D}):React.createElement(React.Fragment,null,React.createElement(Vt),React.createElement(Jt,{categories:x,active:o,setActive:b}),React.createElement(Xt,{products:E,onOpen:f=>{e.current=window.scrollY||0,i(f&&f.__edit&&f.product?f.product:f)}})),React.createElement(ea,{product:g,onClose:()=>{i(null)},onAdd:$.add,cartItems:$.items}),React.createElement(aa,{open:c,onClose:()=>d(!1),cart:$,productLookup:N}))}const ca=ReactDOM.createRoot(document.getElementById("root"));ca.render(React.createElement(la));})();
