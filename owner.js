(()=>{(()=>{let Te=!1;const ut=()=>{const v=window.SUPABASE_PUBLIC_CONFIG||{},B=v.url||"",Y=v.anonKey||"";if(!B||!Y||!window.supabase)return null;try{return window.supabase.createClient(B,Y)}catch(K){return console.error("Failed to init Supabase client for auth",K),null}},je=async v=>{try{const{data:B,error:Y}=await v.rpc("is_owner");if(Y)throw Y;return!!B}catch(B){return console.error("Owner check failed",B),null}},Ue=()=>{if(Te)return;Te=!0;const{useState:v,useEffect:B,useRef:Y,useMemo:K,useLayoutEffect:be}=React,ke="Odil Accessories",fe="Simple wholesale catalogue with WhatsApp ordering.",ee="GBP",Se="\xA3",X="992935563306",re="nova_wholesale_cart_v1",ne="nova_owner_products_v1",le=document.body.dataset.layout==="owner",de=le||document.body.dataset.ownerMode!=="disabled",oe=de&&!le,Ae=le||document.body.dataset.defaultOwner==="true",ge="/.netlify/functions/catalogue",ve=ee,H="__base__",Ce=(a,r)=>{const e=(a||r||"").trim();if(!e)return r||"";const n=e.toLowerCase();return n.includes("color")||n.includes("colour")?"Color":r==="models"||n.includes("model")?"Model":e.replace(/\s+/g," ").trim()},te=(a={})=>{const r=Object.entries(a||{}).filter(([e,n])=>n!=null&&String(n).trim()!=="");return r.length?r.sort(([e],[n])=>e.localeCompare(n)).map(([e,n])=>`${e}:${n}`).join("|"):H},he=a=>{if(!a||typeof a!="object")return{};const r={};return Object.entries(a).forEach(([e,n])=>{const s=Number(n);Number.isFinite(s)&&s>=0&&(r[e&&e.trim()||H]=s)}),r},ua=a=>{const r=Object.entries(a||{}).filter(([s,m])=>Array.isArray(m)&&m.length);if(!r.length)return[{key:H,selection:{}}];const e=[],n=(s,m)=>{if(s>=r.length){const y=te(m);e.push({key:y,selection:{...m}});return}const[d,x]=r[s];x.forEach(y=>n(s+1,{...m,[d]:y}))};return n(0,{}),e},pa=(a,r)=>{const e=[...r.must||[],...r.also||[],...r.optional||[]],n={};return e.forEach(s=>{const m=a[s.key],d=Ce(s.label,s.key);if(s.type==="checkbox"){m&&(n[d]=["Yes"]);return}if(m==null)return;if(Array.isArray(m)){const y=m.map(f=>String(f).trim()).filter(Boolean);y.length&&(n[d]=Array.from(new Set(y)));return}const x=String(m).trim();x&&(n[d]=[x])}),n},De=window.SUPABASE_PUBLIC_CONFIG||{},Pe=De.url||"",$e=De.anonKey||"",bt=!!(Pe&&$e);let se=null;try{window.supabase&&bt?(se=window.supabase.createClient(Pe,$e),console.log("\u2705 Supabase client initialized successfully"),console.log("\u{1F4CD} Supabase URL:",Pe),setTimeout(async()=>{try{console.log("\u{1F504} Testing database connection...");const{data:r,error:e}=await se.from("products").select("count").limit(1);e?(console.error("\u274C Database test failed:",e),e.message.includes("permission denied")&&console.error("\u{1F6AB} RLS Policy Issue: Run the SQL script to fix permissions"),e.message.includes('relation "products" does not exist')&&console.error("\u{1F3D7}\uFE0F Table Missing: Run the SQL script to create the products table")):console.log("\u2705 Database connection successful"),console.log("\u{1F504} Testing realtime connection...");const n=se.channel("test-channel");n.subscribe(s=>{s==="SUBSCRIBED"?(console.log("\u2705 Realtime connection successful"),n.unsubscribe()):s==="CHANNEL_ERROR"&&console.error("\u274C Realtime connection failed")})}catch(r){console.error("\u274C Connection test failed:",r)}},1e3)):console.warn("\u26A0\uFE0F Supabase not initialized - supply SUPABASE_PUBLIC_CONFIG in supabase-config.js")}catch(a){console.error("\u274C Supabase initialization failed:",a)}const Oe=async(a,r=3,e=1e3)=>{for(let n=1;n<=r;n++)try{return await a()}catch(s){if(console.warn(`\u26A0\uFE0F Attempt ${n}/${r} failed:`,s.message),n===r)throw s;await new Promise(m=>setTimeout(m,e*n))}},me=async(a,r)=>{try{const e=await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,data:r})});if(!e.ok){const s=await e.text().catch(()=>"");throw new Error(`Owner API ${a} failed: ${e.status} ${s}`)}const n=await e.json().catch(()=>({}));if(n!=null&&n.error){const s=new Error(n.error.message||n.error);throw s.details=n.error.details,s.hint=n.error.hint,s.code=n.error.code,s}return n}catch(e){throw console.error(`Owner API ${a} error`,e),e}},Z=a=>{var O;if(!a)return null;const{sourceid:r,sourceId:e,images:n,image:s,specs:m,variants:d,inventory:x,price:y,hidden:f,...o}=a,i=(O=e!=null?e:r)!=null?O:null,l=T=>Array.isArray(T)?T:T==null?[]:typeof T=="string"&&T.trim().length?[T]:[],u=l(n),M=l(m),P=typeof d=="object"&&d!==null&&!Array.isArray(d)?d:{},S=he(x),h=s||u[0]||void 0,$=u.length?u:h?[h]:[];return{...o,sourceId:i,images:$,specs:M,variants:P,inventory:S,price:typeof y=="number"?y:Number(y)||0,hidden:!!f,image:h}},Ge=a=>{var s;const r={id:a.id,name:a.name,sku:a.sku,category:a.category,price:Number(a.price)||0,description:(s=a.description)!=null?s:""},e=Array.isArray(a.images)?a.images:a.image?[a.image]:[];e.length&&(r.images=e),Array.isArray(a.specs)&&a.specs.length&&(r.specs=a.specs),a.variants&&Object.keys(a.variants).length&&(r.variants=a.variants),a.sourceId&&(r.sourceid=a.sourceId),a.hidden&&(r.hidden=!0);const n=he(a.inventory);return Object.keys(n).length&&(r.inventory=n),r},Fe=async()=>{if(!se)return console.warn("\u26A0\uFE0F Cannot load products: Supabase not initialized"),[];try{console.log("\u{1F504} Loading products from database...");const{data:a,error:r}=await se.from("products").select("*").order("created_at",{ascending:!1});if(r)throw console.error("\u274C Database error:",r),r;return console.log(`\u2705 Loaded ${(a==null?void 0:a.length)||0} products from database`),(a||[]).map(Z).filter(Boolean)}catch(a){return console.error("Failed to load products:",a),[]}},ft=async a=>{try{const r=Ge(a),{data:e}=await Oe(()=>me("insert",r)),n=Z(e);return console.log("\u2705 Product saved successfully:",n),n}catch(r){return console.error("\u274C Failed to save product after retries:",r),null}},qe=async a=>{try{const r=Ge(a),{data:e}=await Oe(()=>me("upsert",r));return Z(e)}catch(r){return console.error("Failed to upsert product:",r),null}},gt=async a=>{try{return await Oe(()=>me("delete",{id:a})),!0}catch(r){return console.error("Failed to delete product:",r),!1}},ba=a=>{if(!se)return null;try{return se.channel("products").on("postgres_changes",{event:"*",schema:"public",table:"products"},a).subscribe()}catch(r){return console.error("Failed to subscribe to product changes:",r),null}},_e=["All","Phone Screens","Back Glass","Power Banks","Screen Protectors","Batteries","Mobile Phones","Tablets","Phone Cases","Cables","Chargers","Earphones","Charging Ports","Face ID"],we=["iPhone 11","iPhone 12","iPhone 12 Pro","iPhone 13","iPhone 13 Pro","iPhone 14","iPhone 14 Pro","iPhone 15","iPhone 15 Plus","iPhone 15 Pro","iPhone 15 Pro Max","iPhone 16","iPhone 16 Pro","iPhone 16 Pro Max"],ze=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],fa=[...we,...ze],Ke=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],He=["Galaxy A14","Galaxy A24","Galaxy A34","Galaxy A54","Galaxy A55","Galaxy A15"],ht=["iPhone","Samsung S","Samsung A"],xt={iPhone:we,"Samsung S":Ke,"Samsung A":He},Ye=["Original","OEM","AAA","Aftermarket","Refurb"],yt=["TPU","Silicone","PC","Leather"],xe=["Black","White","Navy","Clear","Red","Lavender","Stone","Midnight","Starlight","Blue","Green","Gold"],Be={Black:"#111827",White:"#ffffff",Navy:"#1e3a8a",Clear:"#ffffff",Red:"#ef4444",Lavender:"#b57edc",Stone:"#a8a29e",Midnight:"#0f172a",Starlight:"#f8fafc",Blue:"#3b82f6",Green:"#10b981",Gold:"#f59e0b"};function ue({name:a}){const r=Be[a],e=r?{backgroundColor:r,border:"1px solid rgba(0,0,0,.15)"}:{backgroundImage:"linear-gradient(45deg,#e5e7eb 25%,transparent 25%),linear-gradient(-45deg,#e5e7eb 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#e5e7eb 75%),linear-gradient(-45deg,transparent 75%,#e5e7eb 75%)",backgroundSize:"8px 8px",border:"1px solid rgba(0,0,0,.15)"};return React.createElement("span",{"aria-hidden":"true",className:"inline-block h-3 w-3 rounded-full align-[-2px]",style:e})}const vt=["Tempered","Hydrogel"],wt=["Clear","Matte","Privacy"],Et=["1-Pack","2-Pack"],Rt=["Edge-to-edge","Full glue"],Me=["USB-C \u2194 USB-C","USB-C \u2194 Lightning","USB-A \u2194 Micro-USB"],Qe=["0.5m","1m","2m"],Ve=["27W","60W","100W"],Nt=["MFi","USB-IF"],kt=["Standard","Braided",">10k bends"],St=["20W","30W","45W","65W"],Je=["1\xD7USB-C","1\xD7USB-A","1\xD7USB-C + 1\xD7USB-A","2\xD7USB-C"],pe=["PD 3.0","PPS","QC 3.0","QC 4+"],ga=["CE","UKCA"],At=["UK 3-pin","EU","US"],Ze=["New","Refurb","Used A","Used B"],Ct=["Unlocked","Locked","Dual-SIM Yes","Dual-SIM No"],Pt=["5G","4G"],Ot=["Wi-Fi","Wi-Fi + Cellular"],Xe=["32GB","64GB","128GB","256GB","512GB","1TB"],et=["3GB","4GB","6GB","8GB","12GB","16GB"],ha=Me,_t=Qe,xa=Ve,Bt=["10,000 mAh","20,000 mAh"],tt=["open","confirmed","shipped"],Mt=["open","confirmed","shipped","cancelled"],Ee={open:"Open",confirmed:"Confirmed",shipped:"Shipped",cancelled:"Cancelled"},It=[{id:"sp-iph-13-tmp-2pk",name:"Tempered Glass \u2013 iPhone 13 (2\u2011Pack)",sku:"SP-IP13-TG2",category:"Screen Protectors",price:3.2,specs:["2\u2011Pack","Tempered","9H","Oleophobic"],description:"Clear tempered glass for iPhone 13.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.07_b6d5696d.jpg",variants:{Model:["iPhone 13"],Material:["Tempered"],Pack:["2\u2011Pack"]}},{id:"sp-iph-14-hg-1pk",name:"Hydrogel Protector \u2013 iPhone 14",sku:"SP-IP14-HG1",category:"Screen Protectors",price:2.6,specs:["Hydrogel","Self\u2011healing","Case\u2011friendly"],description:"Flexible hydrogel film.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.08_46a12f36.jpg",variants:{Model:["iPhone 14"],Material:["Hydrogel"],Pack:["1\u2011Pack","2\u2011Pack"]}},{id:"case-slim-tpu-iph-11-16",name:"Slim TPU Case \u2013 iPhone Series",sku:"CA-IP-TPU",category:"Phone Cases",price:3.9,specs:["TPU","Slim","Matte"],description:"Slim matte TPU case.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.09_811264ed.jpg",variants:{Color:["Black","Navy","Clear","Red"],Material:["TPU"],Model:we}},{id:"case-silicone-sg-s20-s25",name:"Soft Silicone Case \u2013 Galaxy Series",sku:"CA-SG-SIL",category:"Phone Cases",price:4.1,specs:["Silicone","Microfiber"],description:"Soft\u2011touch silicone for Galaxy.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.10_3d78676b.jpg",variants:{Color:["Midnight","Stone","Lavender"],Material:["Silicone"],Model:ze}},{id:"chg-65w-gan-dual",name:"65W GaN Charger \u2013 Dual Port",sku:"CH-65W-GAN",category:"Chargers",price:12.5,specs:["65W","USB\u2011C + USB\u2011A","PD/QC"],description:"Compact GaN charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_89070b32.jpg",variants:{Wattage:["65W"],Ports:["USB\u2011C + USB\u2011A"],Standard:pe}},{id:"chg-20w-usbc",name:"20W USB\u2011C Wall Charger",sku:"CH-20W-USBC",category:"Chargers",price:6,specs:["20W","USB\u2011C","PD"],description:"USB\u2011C PD charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_9ebc1ea2.jpg",variants:{Wattage:["20W"],Ports:["USB\u2011C"],Standard:["PD 3.0"]}},{id:"cbl-usbc-60w-1m-2m",name:"USB\u2011C Cable 60W",sku:"CB-UC-60",category:"Cables",price:2.2,specs:["USB\u2011C","60W","Nylon"],description:"Braided 60W cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.12_628fcab2.jpg",variants:{Connector:["USB\u2011C \u2194 USB\u2011C"],Length:_t,Rating:["60W"]}},{id:"cbl-lightning-mfi",name:"Lightning Cable (MFi)",sku:"CB-LT-MFI",category:"Cables",price:3.5,specs:["Lightning","MFi","1m"],description:"MFi Lightning cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.13_22d8e7c9.jpg",variants:{Connector:["USB\u2011C \u2194 Lightning"],Length:["1m"],Rating:["27W"]}},{id:"ear-wired-classic",name:"Wired Earphones \u2013 Classic",sku:"EA-WI-CLS",category:"Earphones",price:4.2,specs:["3.5mm","In\u2011line mic"],description:"Wired earphones.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.14_4f407f9a.jpg",variants:{Connector:["3.5mm"],Color:["Black","White"]}},{id:"ear-tws-basic",name:"TWS Earbuds \u2013 Basic",sku:"EA-TWS-BSC",category:"Earphones",price:12.9,specs:["BT 5.3","20h"],description:"TWS earbuds.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.15_e7b8adc0.jpg",variants:{Color:["White","Black"],Standard:["BT 5.3"]}},{id:"pb-10000-compact",name:"Power Bank 10,000 mAh",sku:"PB-10K-CMP",category:"Power Banks",price:11,specs:["10,000 mAh","USB\u2011C","PD"],description:"Slim 10k power bank.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.17_01d0dcae.jpg",variants:{Capacity:["10,000 mAh"],Ports:["USB\u2011C","USB\u2011A"],Standard:pe}},{id:"pb-20000-dual",name:"Power Bank 20,000 mAh \u2013 Dual",sku:"PB-20K-DUAL",category:"Power Banks",price:16.5,specs:["20,000 mAh","Dual","PD/QC"],description:"20k dual output.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.19_3b58c17b.jpg",variants:{Capacity:["20,000 mAh"],Ports:["USB\u2011C + USB\u2011A"],Standard:pe}},{id:"img-001",name:"Accessory Photo A",sku:"IM-001",category:"Phone Cases",price:2.5,specs:["Assorted"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.33_5dd08e33.jpg"},{id:"img-002",name:"Accessory Photo B",sku:"IM-002",category:"Chargers",price:7.2,specs:["Fast"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_09a1e9d9.jpg"},{id:"img-003",name:"Accessory Photo C",sku:"IM-003",category:"Cables",price:1.8,specs:["1m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_f1935767.jpg"},{id:"img-004",name:"Accessory Photo D",sku:"IM-004",category:"Screen Protectors",price:2.9,specs:["Tempered"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.35_92866963.jpg"},{id:"img-005",name:"Accessory Photo E",sku:"IM-005",category:"Phone Cases",price:3.6,specs:["TPU"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.36_d9ee268e.jpg"},{id:"img-006",name:"Accessory Photo F",sku:"IM-006",category:"Back Glass",price:5.5,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.37_ef5ed98e.jpg"},{id:"img-007",name:"Accessory Photo G",sku:"IM-007",category:"Earphones",price:6,specs:["Wireless"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_b444897c.jpg"},{id:"img-008",name:"Accessory Photo H",sku:"IM-008",category:"Power Banks",price:9.9,specs:["10k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_f170faf6.jpg"},{id:"img-009",name:"Accessory Photo I",sku:"IM-009",category:"Cables",price:2,specs:["2m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.39_c37cddc9.jpg"},{id:"img-010",name:"Accessory Photo J",sku:"IM-010",category:"Chargers",price:11.5,specs:["65W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.40_7a858ba3.jpg"},{id:"img-011",name:"Accessory Photo K",sku:"IM-011",category:"Phone Cases",price:4.4,specs:["Silicone"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_80d08b54.jpg"},{id:"img-012",name:"Accessory Photo L",sku:"IM-012",category:"Screen Protectors",price:1.9,specs:["Hydrogel"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_a2efd2e1.jpg"},{id:"img-013",name:"Accessory Photo M",sku:"IM-013",category:"Back Glass",price:6.5,specs:["Back glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.42_63c16e8a.jpg"},{id:"img-014",name:"Accessory Photo N",sku:"IM-014",category:"Batteries",price:8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.43_06e00e31.jpg"},{id:"img-015",name:"Accessory Photo O",sku:"IM-015",category:"Phone Cases",price:3.2,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_de3a612b.jpg"},{id:"img-016",name:"Accessory Photo P",sku:"IM-016",category:"Cables",price:2.4,specs:["Nylon"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_fddf905d.jpg"},{id:"img-017",name:"Accessory Photo Q",sku:"IM-017",category:"Earphones",price:5,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.45_b1dd7f8a.jpg"},{id:"img-018",name:"Accessory Photo R",sku:"IM-018",category:"Chargers",price:9.5,specs:["30W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_30024620.jpg"},{id:"img-019",name:"Accessory Photo S",sku:"IM-019",category:"Power Banks",price:14,specs:["20k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_cb602f30.jpg"},{id:"img-020",name:"Accessory Photo T",sku:"IM-020",category:"Phone Cases",price:3.8,specs:["Leather"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_d9e5908c.jpg"},{id:"img-021",name:"Accessory Photo U",sku:"IM-021",category:"Screen Protectors",price:2.7,specs:["Matte"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.47_ac758901.jpg"},{id:"img-022",name:"Accessory Photo V",sku:"IM-022",category:"Cables",price:1.6,specs:["0.5m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_bc4af4ef.jpg"},{id:"img-023",name:"Accessory Photo W",sku:"IM-023",category:"Chargers",price:4.9,specs:["USB\u2011A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_f4496fba.jpg"},{id:"img-024",name:"Accessory Photo X",sku:"IM-024",category:"Earphones",price:13.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.49_ad6d3003.jpg"},{id:"img-025",name:"Accessory Photo Y",sku:"IM-025",category:"Phone Cases",price:2.9,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.50_b3694795.jpg"},{id:"img-026",name:"Accessory Photo Z",sku:"IM-026",category:"Back Glass",price:7,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.51_5e67178c.jpg"},{id:"img-027",name:"Accessory Photo AA",sku:"IM-027",category:"Batteries",price:6.9,specs:["Refurb"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.52_df23fdba.jpg"},{id:"img-028",name:"Accessory Photo AB",sku:"IM-028",category:"Chargers",price:8.5,specs:["PD"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.53_13d347f3.jpg"},{id:"img-029",name:"Accessory Photo AC",sku:"IM-029",category:"Cables",price:2.1,specs:["Braided"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_5c3d1851.jpg"},{id:"img-030",name:"Accessory Photo AD",sku:"IM-030",category:"Power Banks",price:12.2,specs:["Dual output"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_8f092381.jpg"},{id:"img-031",name:"Accessory Photo AE",sku:"IM-031",category:"Earphones",price:3.9,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.56_cbdfea17.jpg"},{id:"img-032",name:"Accessory Photo AF",sku:"IM-032",category:"Phone Cases",price:4.5,specs:["Patterned"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_61b6ae02.jpg"},{id:"img-033",name:"Accessory Photo AG",sku:"IM-033",category:"Screen Protectors",price:2.3,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_efd60a9b.jpg"},{id:"img-034",name:"Accessory Photo AH",sku:"IM-034",category:"Chargers",price:10,specs:["GaN"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.58_082b158d.jpg"},{id:"img-035",name:"Accessory Photo AI",sku:"IM-035",category:"Power Banks",price:15,specs:["High capacity"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.00_7e6451d4.jpg"},{id:"img-036",name:"Accessory Photo AJ",sku:"IM-036",category:"Cables",price:1.5,specs:["USB-C"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.01_bf466384.jpg"},{id:"img-037",name:"Accessory Photo AK",sku:"IM-037",category:"Earphones",price:7.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2920cb02.jpg"},{id:"img-038",name:"Accessory Photo AL",sku:"IM-038",category:"Phone Cases",price:3.1,specs:["Transparent"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2ae9f56f.jpg"},{id:"img-039",name:"Accessory Photo AM",sku:"IM-039",category:"Back Glass",price:6.8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_725a57bf.jpg"},{id:"img-040",name:"Accessory Photo AN",sku:"IM-040",category:"Chargers",price:5.5,specs:["USB-A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.04_faa6a5d9.jpg"}],ae=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:ee}).format(a),q=(...a)=>a.filter(Boolean).join(" ");function Lt(){const[a,r]=v(!1);return B(()=>{var s;const e=window.matchMedia("(prefers-reduced-motion: reduce)");r(e.matches);const n=()=>r(e.matches);return(s=e.addEventListener)==null||s.call(e,"change",n),()=>{var m;return(m=e.removeEventListener)==null?void 0:m.call(e,"change",n)}},[]),a}function ce(a){const r=encodeURIComponent("#f3f4f6"),e=encodeURIComponent("#6b7280"),n=encodeURIComponent(a),s=`<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='600' role='img' aria-label='${n}'><rect width='100%' height='100%' fill='${r}'/><g fill='${e}' font-family='system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif'><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='24'>${n}</text></g></svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(s)}`}function ye(a,r){return a?a.startsWith("data:")||a.startsWith("http")?a:`/img/${a}`:ce(r)}function Wt(a){const r=Array.isArray(a.images)&&a.images.length?a.images:a.image?[a.image]:[];return r.length?r:[ce(a.name)]}function at(a){const r=Wt(a);return ye(r[0],a.name)}function Ie(a,r,e){B(()=>{if(!a||!r.current)return;const n=r.current,s=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),m=document.activeElement,d=Array.from(n.querySelectorAll(s));if(!d.length)n.hasAttribute("tabindex")||n.setAttribute("tabindex","-1"),typeof n.focus=="function"&&n.focus({preventScroll:!0});else{const y=d[0];y&&typeof y.focus=="function"&&y.focus({preventScroll:!0})}const x=y=>{if(y.key==="Escape"&&(y.stopPropagation(),e==null||e()),y.key==="Tab"&&d.length){const f=d[0],o=d[d.length-1];y.shiftKey&&document.activeElement===f?(y.preventDefault(),o.focus()):!y.shiftKey&&document.activeElement===o&&(y.preventDefault(),f.focus())}};return n.addEventListener("keydown",x),()=>{if(n.removeEventListener("keydown",x),m&&typeof m.focus=="function"&&document.contains(m))try{m.focus({preventScroll:!0})}catch(y){m.focus()}}},[a,r,e])}function Tt(a,r){const e=Y(0),n=Y(null);be(()=>{if(typeof window=="undefined"||!a)return;const s=document.body,m=document.documentElement;if(!s||!m)return;const d=window.scrollY||window.pageYOffset||0,x=r&&Number.isFinite(r.current)?r.current:d;return e.current=x,n.current={position:s.style.position,top:s.style.top,width:s.style.width,overflow:s.style.overflow,htmlOverflow:m.style.overflow,overscroll:m.style.overscrollBehavior},s.style.position="fixed",s.style.top=`-${x}px`,s.style.width="100%",s.style.overflow="hidden",m.style.overflow="hidden",m.style.overscrollBehavior="none",()=>{const y=n.current||{};s.style.position=y.position||"",s.style.top=y.top||"",s.style.width=y.width||"",s.style.overflow=y.overflow||"",m.style.overflow=y.htmlOverflow||"",m.style.overscrollBehavior=y.overscroll||"",window.scrollTo(0,e.current||0),n.current=null}},[a,r])}function jt(){const[a,r]=v([]),[e,n]=v("");B(()=>{try{const f=localStorage.getItem(re);if(f){const o=JSON.parse(f);Array.isArray(o.items)&&r(o.items),typeof o.notes=="string"&&n(o.notes)}}catch(f){}},[]),B(()=>{try{localStorage.setItem(re,JSON.stringify({items:a,notes:e}))}catch(f){}},[a,e]);const s=f=>r(o=>{const i=o.findIndex(l=>l.id===f.id&&JSON.stringify(l.variants||{})===JSON.stringify(f.variants||{}));if(i>=0){const l=[...o];return l[i]={...l[i],qty:l[i].qty+f.qty},l}return[...o,f]}),m=(f,o)=>r(i=>i.map((l,u)=>u===f?{...l,qty:Math.max(0,Number(o)||0)}:l)),d=f=>r(o=>o.filter((i,l)=>l!==f)),x=()=>r([]),y=a.reduce((f,o)=>f+o.price*o.qty,0);return{items:a,add:s,updateQty:m,removeIndex:d,clear:x,subtotal:y,notes:e,setNotes:n}}function Ut(){const[a,r]=v([]),[e,n]=v(!0),[s,m]=v("connecting");B(()=>{(async()=>{try{m("connecting");const o=await Fe();r(o);try{localStorage.setItem(ne,JSON.stringify(o))}catch(i){}m("connected")}catch(o){console.error("Failed to load products from database:",o),m("error");try{const i=localStorage.getItem(ne);if(i){const l=JSON.parse(i);Array.isArray(l)&&r(l.map(Z).filter(Boolean))}}catch(i){}}finally{n(!1)}})()},[]),B(()=>{if(!se){console.warn("\u26A0\uFE0F Cannot setup realtime: Supabase not initialized");return}console.log("\u{1F504} Setting up realtime subscription...");const f=se.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},o=>{console.log("\u{1F534} Realtime event received:",o.eventType,o),r(i=>{if(o.eventType==="INSERT"){console.log("\u2795 Adding product via realtime:",o.new.name);const l=Z(o.new),u=i.findIndex(M=>M.id===l.id);if(u>=0){console.log("\u{1F504} Updating existing product instead of duplicating");const M=[...i];return M[u]=l,M}return[l,...i]}if(o.eventType==="UPDATE"){console.log("\u270F\uFE0F Updating product via realtime:",o.new.name);const l=Z(o.new);return i.map(u=>u.id===o.new.id?l:u)}return o.eventType==="DELETE"?(console.log("\u{1F5D1}\uFE0F Deleting product via realtime:",o.old.id),i.filter(l=>l.id!==o.old.id)):i})}).subscribe(o=>{console.log("\u{1F534} Realtime status:",o),o==="SUBSCRIBED"?(console.log("\u2705 Realtime subscription active!"),m("connected"),Fe().then(i=>{console.log("\u{1F504} Reloaded products after reconnection");const l=i.map(Z).filter(Boolean);r(l);try{localStorage.setItem(ne,JSON.stringify(l))}catch(u){}}).catch(i=>{console.error("\u274C Failed to reload products after reconnection:",i)})):o==="CHANNEL_ERROR"||o==="CLOSED"?(console.error("\u274C Realtime subscription failed!"),m("error")):(console.log("\u{1F504} Realtime connecting..."),m("connecting"))});return()=>{console.log("\u{1F50C} Cleaning up realtime subscription"),f.unsubscribe()}},[]);const d=f=>{if(typeof f=="function")r(o=>{const i=f(o),l=(Array.isArray(i)?i:[]).map(Z).filter(Boolean);try{localStorage.setItem(ne,JSON.stringify(l))}catch(u){}return l});else{const o=(Array.isArray(f)?f:[]).map(Z).filter(Boolean);r(o);try{localStorage.setItem(ne,JSON.stringify(o))}catch(i){}}};return{ownerProducts:a,setOwnerProducts:d,addProduct:async f=>{const o=await ft(f);if(o)return d(l=>[o,...l]),{product:o,persisted:!0};const i=Z(f);return d(l=>[i,...l]),{product:i,persisted:!1}},deleteProduct:async f=>{const o=await gt(f);return o&&d(i=>i.filter(l=>l.id!==f)),o},loading:e,connectionStatus:s}}const rt=a=>{var l;if(!a)return null;const{total_cents:r,totalCents:e,currency:n,status:s,order_items:m,orderItems:d,metadata:x,...y}=a,f=Number((l=r!=null?r:e)!=null?l:0),i=(Array.isArray(m)?m:Array.isArray(d)?d:[]).map(u=>{var P,S,h,$,O,T,w,A;if(!u)return null;const M=Number((O=(P=u.subtotal_cents)!=null?P:u.subtotalCents)!=null?O:(Number((S=u.quantity)!=null?S:0)||0)*(Number(($=(h=u.unit_price_cents)!=null?h:u.unitPriceCents)!=null?$:0)||0));return{...u,quantity:Number((T=u.quantity)!=null?T:0),unit_price_cents:Number((A=(w=u.unit_price_cents)!=null?w:u.unitPriceCents)!=null?A:0),subtotal_cents:M}}).filter(Boolean);return{...y,status:(s||"open").toLowerCase(),total_cents:f,currency:n||ve,metadata:x||{},order_items:i}},st=a=>{if(!a)return 0;const r=a.created_at||a.createdAt||a.inserted_at||a.insertedAt,e=r?new Date(r).getTime():0;return Number.isFinite(e)?e:0},nt=a=>[...Array.isArray(a)?a:[]].sort((e,n)=>st(n)-st(e));function Dt(){const[a,r]=v([]),[e,n]=v(!0),[s,m]=v(null),[d,x]=v(null),y=React.useCallback(async()=>{try{n(!0),m(null);const o=await me("listOrders"),l=(Array.isArray(o==null?void 0:o.data)?o.data:[]).map(rt).filter(Boolean);r(nt(l)),x((o==null?void 0:o.meta)||null)}catch(o){console.error("Failed to load orders",o),m(o),r([]),x(null)}finally{n(!1)}},[]);B(()=>{y()},[y]);const f=React.useCallback(async(o,i)=>{if(!o||!i)return null;try{const l=await me("updateOrderStatus",{id:o,status:i}),u=rt(l==null?void 0:l.data);return u&&r(M=>{const P=M.map(S=>S.id===u.id?u:S);return nt(P)}),u}catch(l){throw console.error("Failed to update order status",l),l!=null&&l.message&&/404/.test(l.message)?new Error("Order no longer exists. Refresh the list and try again."):new Error((l==null?void 0:l.message)||"Unable to update order status. Please try again.")}},[]);return{orders:a,loadingOrders:e,ordersError:s,ordersMeta:d,refreshOrders:y,updateOrderStatus:f}}function $t({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function Le({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}function Gt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}function ot({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}function Ft({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}function qt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.164a1.5 1.5 0 0 0-1.5 1.5v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}function zt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 13.5v2.25m2.598-9.05a6.75 6.75 0 1 1-5.196 0m7.346 9.591 1.263 1.263m-9.856-1.263L6.892 17.05m.944-4.117L5.4 8.5m13.2 0-2.436 4.433"}))}function Kt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}function Ht({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9A2.25 2.25 0 0 0 7.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9A2.25 2.25 0 0 0 16.5 5.25H15m-6 0A1.5 1.5 0 0 1 10.5 3.75h3A1.5 1.5 0 0 1 15 5.25m-6 0v.75A1.5 1.5 0 0 0 10.5 7.5h3A1.5 1.5 0 0 0 15 6V5.25"}))}function Yt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.5h13.5v9h-13.5V7.5Zm13.5 0H18a2.25 2.25 0 0 1 1.8.9l1.95 2.6a2.25 2.25 0 0 1 .45 1.35v4.65h-2.25m-1.5 0a1.5 1.5 0 1 0-3 0m3 0H15.75m-9 0a1.5 1.5 0 1 0-3 0m3 0H3.75"}))}function lt({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0 0 20.885 3.488"}))}function We({status:a}){const r=(a||"").toLowerCase(),e=r==="confirmed"?"border-emerald-200 bg-emerald-50 text-emerald-700":r==="shipped"?"border-sky-200 bg-sky-50 text-sky-700":r==="cancelled"?"border-rose-200 bg-rose-50 text-rose-700":"border-amber-200 bg-amber-50 text-amber-800";return React.createElement("span",{className:q("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium capitalize",e)},Ee[r]||r||"Open")}function Re({title:a,value:r,subtext:e,trend:n}){return React.createElement("div",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm ring-1 ring-black/5 sm:p-5"},React.createElement("p",{className:"text-sm font-medium text-slate-500"},a),React.createElement("p",{className:"mt-2 text-2xl font-semibold tracking-tight text-slate-900"},r),e&&React.createElement("p",{className:"mt-1 text-xs text-slate-500"},e),n&&React.createElement("div",{className:"mt-3 inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 text-xs font-medium text-emerald-700"},n))}function Qt({allProducts:a,ownerProducts:r,orders:e,loadingOrders:n,ordersMeta:s,ordersError:m,onNavigate:d,refreshOrders:x}){const y=a.filter(w=>!w.hidden).length,f=r.filter(w=>w.sourceId&&!w.hidden).length,o=r.filter(w=>!w.sourceId&&!w.hidden).length,i=r.filter(w=>w.hidden).length,l=e.reduce((w,A)=>{const p=((A==null?void 0:A.status)||"open").toLowerCase();return w[p]=(w[p]||0)+1,w},{}),u=[...tt,"cancelled"],M=l.open||0,P=l.confirmed||0,S=l.shipped||0,h=e.filter(w=>["confirmed","shipped"].includes(((w==null?void 0:w.status)||"").toLowerCase())).reduce((w,A)=>w+(Number(A==null?void 0:A.total_cents)||0),0),$=new Intl.NumberFormat("en-GB",{style:"currency",currency:ee}).format(h/100),O=e.slice(0,5),T=w=>{d==null||d(w)};return React.createElement("div",{className:"flex flex-col gap-10"},React.createElement("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between"},React.createElement("div",null,React.createElement("h1",{className:"text-2xl font-semibold tracking-tight text-slate-900"},"Owner dashboard"),React.createElement("p",{className:"mt-1 text-sm text-slate-600"},"Monitor catalogue health and stay on top of incoming orders."))),React.createElement("section",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4"},React.createElement(Re,{title:"Active SKUs",value:y,subtext:f?`${f} overrides`:void 0}),React.createElement(Re,{title:"Owner additions",value:o,subtext:i?`${i} hidden`:"Live to customers"}),React.createElement(Re,{title:"Open orders",value:n?"\u2014":M,subtext:P?`${P} confirmed`:"Awaiting confirmation"}),React.createElement(Re,{title:"Fulfilled value",value:$,subtext:S?`${S} shipped`:"No shipments yet"})),React.createElement("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr),minmax(0,1fr)]"},React.createElement("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm ring-1 ring-black/5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Order pipeline"),React.createElement("p",{className:"mt-1 text-sm text-slate-500"},"Track each stage to keep fulfilment moving.")),React.createElement("button",{type:"button",onClick:x,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",disabled:n},n?"Refreshing\u2026":"Refresh")),m?/schema cache|relation "orders"/i.test(m.message||"")?React.createElement("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900"},React.createElement("p",{className:"font-medium"},"Orders table not detected"),React.createElement("p",{className:"mt-1"},"Set up the orders tables & policies in Supabase, then refresh to start tracking customer purchase history.")):React.createElement("div",{className:"mt-4 rounded-xl border border-rose-200 bg-rose-50 p-4 text-sm text-rose-900"},React.createElement("p",{className:"font-medium"},"Orders could not be loaded"),React.createElement("p",{className:"mt-1"},m.message||"Check your connection or Supabase policies and try again.")):s!=null&&s.missingOrdersTable?React.createElement("div",{className:"mt-4 rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900"},React.createElement("p",{className:"font-medium"},"Orders table not detected"),React.createElement("p",{className:"mt-1"},"Set up the orders tables & policies in Supabase, then refresh to start tracking customer purchase history.")):React.createElement("dl",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-4"},u.map(w=>React.createElement("div",{key:w,className:q("rounded-xl border px-4 py-3 text-center flex flex-col items-center justify-center gap-1",w==="open"?"border-amber-200 bg-amber-50 text-amber-800":w==="confirmed"?"border-emerald-200 bg-emerald-50 text-emerald-700":w==="shipped"?"border-sky-200 bg-sky-50 text-sky-700":"border-rose-200 bg-rose-50 text-rose-700")},React.createElement("dt",{className:"text-[11px] font-medium uppercase tracking-wide"},Ee[w]||w),React.createElement("dd",{className:"text-2xl font-semibold leading-none"},n?"\u2014":l[w]||0))))),React.createElement("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm ring-1 ring-black/5"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Recent orders"),React.createElement("p",{className:"mt-1 text-sm text-slate-500"},O.length?"Latest activity from verified customers.":"No orders yet \u2014 your list will appear here.")),React.createElement("button",{type:"button",onClick:()=>T("orders"),className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Open orders")),O.length>0&&React.createElement("ul",{className:"mt-5 space-y-3"},O.map(w=>React.createElement("li",{key:w.id,className:"rounded-xl border border-slate-200 bg-white px-4 py-3 shadow-sm"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-slate-900"},w.customer_name||w.customer_email||"Customer"),React.createElement("p",{className:"text-xs text-slate-500"},w.customer_email||"Email pending")),React.createElement(We,{status:w.status})),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-500"},React.createElement("span",null,new Intl.DateTimeFormat("en-GB",{dateStyle:"medium",timeStyle:"short"}).format(new Date(w.created_at||w.createdAt||Date.now()))),React.createElement("span",{className:"font-medium text-slate-700"},new Intl.NumberFormat("en-GB",{style:"currency",currency:ee}).format((Number(w.total_cents)||0)/100)))))))))}function Vt({orders:a,loading:r,error:e,meta:n,onRefresh:s,onStatusChange:m,onNotify:d}){var w,A;const[x,y]=v("open"),[f,o]=v(null),[i,l]=v(!1),u=K(()=>a.reduce((p,U)=>{const C=((U==null?void 0:U.status)||"open").toLowerCase();return p[C]=(p[C]||0)+1,p.all=(p.all||0)+1,p},{all:0}),[a]),M=K(()=>Array.from(new Set([...tt,"cancelled","all"])),[]),P=K(()=>x==="all"?a:a.filter(p=>((p==null?void 0:p.status)||"open").toLowerCase()===x),[a,x]);B(()=>{var p;if(!P.length){o(null);return}(!f||!P.some(U=>U.id===f))&&o(((p=P[0])==null?void 0:p.id)||null)},[P,f]);const S=P.find(p=>p.id===f)||null,h=K(()=>new Intl.NumberFormat("en-GB",{style:"currency",currency:ee}),[]),$=p=>h.format((Number(p)||0)/100),O=p=>{try{return new Intl.DateTimeFormat("en-GB",{dateStyle:"medium",timeStyle:"short"}).format(new Date(p))}catch(U){return"\u2014"}},T=async(p,U)=>{const C=String(U||"").toLowerCase();if(!(!p||!C)){if(!Mt.includes(C)){d==null||d("error",`Unsupported status transition: ${U}`);return}try{if(l(!0),await(m==null?void 0:m(p,C))){const g=Ee[C]||C;d==null||d("success",`Order status updated to ${g}.`)}}catch(c){console.error("Failed to update order status",c),d==null||d("error",(c==null?void 0:c.message)||"Unable to update order status right now.")}finally{l(!1)}}};if(n!=null&&n.missingOrdersTable)return React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-6 text-sm text-amber-900 shadow-sm"},React.createElement("h2",{className:"text-base font-semibold text-amber-900"},"Orders table not detected"),React.createElement("p",{className:"mt-2"},"Create the orders and order_items tables in Supabase, apply RLS policies, then refresh this view to start tracking customer history."),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2 text-xs"},React.createElement("span",{className:"rounded-full border border-amber-300 bg-white px-3 py-1 text-amber-700"},"orders"),React.createElement("span",{className:"rounded-full border border-amber-300 bg-white px-3 py-1 text-amber-700"},"order_items")),React.createElement("button",{type:"button",onClick:s,className:"mt-4 inline-flex items-center gap-2 rounded-full border border-amber-300 bg-white px-4 py-2 text-xs font-medium text-amber-800 hover:bg-amber-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-amber-500"},"Refresh"));if(e){const p=(e==null?void 0:e.message)||"";return/schema cache|relation "orders"/i.test(p)?React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 p-6 text-sm text-amber-900 shadow-sm"},React.createElement("h2",{className:"text-base font-semibold text-amber-900"},"Orders table not detected"),React.createElement("p",{className:"mt-2"},"Create the orders and order_items tables in Supabase, apply RLS policies, then refresh this view to start tracking customer history."),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2 text-xs"},React.createElement("span",{className:"rounded-full border border-amber-300 bg-white px-3 py-1 text-amber-700"},"orders"),React.createElement("span",{className:"rounded-full border border-amber-300 bg-white px-3 py-1 text-amber-700"},"order_items")),React.createElement("button",{type:"button",onClick:s,className:"mt-4 inline-flex items-center gap-2 rounded-full border border-amber-300 bg-white px-4 py-2 text-xs font-medium text-amber-800 hover:bg-amber-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-amber-500"},"Refresh")):React.createElement("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-6 text-sm text-rose-900 shadow-sm"},React.createElement("h2",{className:"text-base font-semibold text-rose-900"},"Unable to load orders"),React.createElement("p",{className:"mt-2"},e.message||"Check your connection or Supabase permissions and try again."),React.createElement("button",{type:"button",onClick:s,className:"mt-4 inline-flex items-center gap-2 rounded-full border border-rose-300 bg-white px-4 py-2 text-xs font-medium text-rose-700 hover:bg-rose-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-rose-500"},"Retry"))}return React.createElement("div",{className:"flex flex-col gap-6"},React.createElement("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"},React.createElement("div",null,React.createElement("h2",{className:"text-xl font-semibold text-slate-900"},"Orders pipeline"),React.createElement("p",{className:"text-sm text-slate-600"},"Move orders from open to shipped, while keeping a full audit trail.")),React.createElement("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500"},React.createElement("span",{className:"rounded-full border border-amber-200 bg-amber-50 px-3 py-1 text-amber-700"},`Open: ${u.open||0}`),React.createElement("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-emerald-700"},`Confirmed: ${u.confirmed||0}`),React.createElement("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 text-sky-700"},`Shipped: ${u.shipped||0}`),React.createElement("button",{type:"button",onClick:s,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1 text-slate-700 hover:bg-slate-50 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},r?"Refreshing\u2026":"Refresh"))),React.createElement("div",{className:"flex flex-wrap gap-2"},M.map(p=>React.createElement("button",{key:p,type:"button",onClick:()=>y(p),className:q("rounded-full border px-3 py-1.5 text-xs font-medium transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",x===p?"border-brand bg-[var(--brand-soft-strong)] text-brand shadow-sm":"border-slate-300 bg-white text-slate-600 hover:bg-slate-50")},p==="all"?"All":Ee[p]||p))),r&&!a.length?React.createElement("div",{className:"flex items-center justify-center rounded-2xl border border-slate-200 bg-white/80 p-10 text-slate-500"},"Loading orders\u2026"):P.length?React.createElement("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,1fr),minmax(0,360px)]"},React.createElement("div",{className:"space-y-3"},P.map(p=>React.createElement("button",{key:p.id,type:"button",onClick:()=>o(p.id),className:q("w-full rounded-2xl border px-4 py-3 text-left shadow-sm transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",p.id===f?"border-brand bg-[var(--brand-soft-strong)]/70 text-slate-900 shadow-md":"border-slate-200 bg-white hover:border-slate-300")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"text-sm font-semibold text-slate-900"},p.customer_name||"Customer"),React.createElement("p",{className:"text-xs text-slate-500"},p.customer_email||"Email pending")),React.createElement(We,{status:p.status})),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-slate-500"},React.createElement("span",null,O(p.created_at||p.createdAt)),React.createElement("span",{className:"font-medium text-slate-700"},$(p.total_cents)))))),React.createElement("aside",{className:"rounded-2xl border border-slate-200 bg-white/90 p-5 shadow-sm"},S?React.createElement("div",{className:"flex flex-col gap-4"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},S.customer_name||"Customer"),React.createElement("p",{className:"text-xs text-slate-500"},S.customer_email||"Email pending")),React.createElement(We,{status:S.status})),React.createElement("dl",{className:"grid grid-cols-2 gap-3 text-xs text-slate-500"},React.createElement("div",null,React.createElement("dt",{className:"font-medium uppercase tracking-wide text-slate-600"},"Placed"),React.createElement("dd",{className:"mt-1 text-slate-700"},O(S.created_at||S.createdAt))),React.createElement("div",null,React.createElement("dt",{className:"font-medium uppercase tracking-wide text-slate-600"},"Total"),React.createElement("dd",{className:"mt-1 text-slate-700 font-semibold"},$(S.total_cents))),S.updated_at&&React.createElement("div",{className:"col-span-2"},React.createElement("dt",{className:"font-medium uppercase tracking-wide text-slate-600"},"Updated"),React.createElement("dd",{className:"mt-1 text-slate-700"},O(S.updated_at)))),S.order_items&&S.order_items.length>0&&React.createElement("div",null,React.createElement("h4",{className:"text-sm font-semibold text-slate-800"},"Items"),React.createElement("ul",{className:"mt-3 space-y-3"},S.order_items.map(p=>React.createElement("li",{key:p.id||`${p.product_id}-${p.sku}`},React.createElement("div",{className:"flex items-start justify-between gap-3 text-sm text-slate-700"},React.createElement("div",null,React.createElement("p",{className:"font-medium text-slate-900"},p.name||"Item"),p.sku&&React.createElement("p",{className:"text-xs text-slate-500"},"SKU: ",p.sku)),React.createElement("span",{className:"text-xs text-slate-500"},`\xD7${p.quantity||0}`)),p.variants&&Object.keys(p.variants).length>0&&React.createElement("div",{className:"mt-1 flex flex-wrap gap-1 text-xs text-slate-600"},Object.entries(p.variants).map(([U,C])=>{const c=Array.isArray(C)?C.join(", "):C,g=/color/i.test(U);return React.createElement("span",{key:U,className:q("inline-flex items-center gap-1 rounded-full border px-2 py-0.5",g?"border-slate-300 bg-slate-50":"border-slate-200 bg-white")},g?React.createElement(ue,{name:c}):null,`${U}: ${c}`)})),React.createElement("div",{className:"mt-1 flex items-center justify-between text-xs text-slate-500"},React.createElement("span",null,$(p.unit_price_cents)),React.createElement("span",{className:"font-medium text-slate-700"},$(p.subtotal_cents))))))),(S.note||((w=S.metadata)==null?void 0:w.notes))&&React.createElement("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600"},S.note||((A=S.metadata)==null?void 0:A.notes)),React.createElement("div",{className:"flex flex-wrap gap-2"},(()=>{const p=(S.status||"open").toLowerCase(),U=[];return p==="open"&&(U.push({label:"Mark as confirmed",next:"confirmed"}),U.push({label:"Cancel order",next:"cancelled",variant:"danger"})),p==="confirmed"&&(U.push({label:"Mark as shipped",next:"shipped"}),U.push({label:"Cancel order",next:"cancelled",variant:"danger"})),U.map(C=>React.createElement("button",{key:C.next,type:"button",onClick:()=>T(S.id,C.next),disabled:i,className:q("inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-medium shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",C.variant==="danger"?"border-rose-300 bg-rose-50 text-rose-700 hover:bg-rose-100":C.next==="shipped"?"border-sky-300 bg-sky-50 text-sky-700 hover:bg-sky-100":"border-emerald-300 bg-emerald-50 text-emerald-700 hover:bg-emerald-100",i?"opacity-60":"")},i?"Updating\u2026":C.label))})())):React.createElement("p",{className:"text-sm text-slate-500"},P.length?"Select an order to see its breakdown.":"No orders in this stage yet."))):React.createElement("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-8 text-sm text-slate-500"},"No orders in this stage yet."))}function Jt({views:a,section:r,onSectionChange:e}){const n=a.find(s=>s.id===r)||a[0];return React.createElement("main",{id:"main",className:"mx-auto w-full max-w-7xl px-4 pb-16 pt-6 sm:px-6 lg:px-8"},React.createElement("div",{className:"grid gap-6 lg:grid-cols-[minmax(200px,240px),minmax(0,1fr)]"},React.createElement("nav",{className:"flex snap-x snap-mandatory gap-3 overflow-x-auto pb-1 lg:flex-col lg:overflow-visible lg:pb-0"},a.map(s=>React.createElement("button",{key:s.id,type:"button",onClick:()=>e(s.id),className:q("snap-start rounded-2xl border px-4 py-3 text-left shadow-sm transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",s.id===n.id?"border-brand bg-brand-soft text-brand":"border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:bg-slate-50")},s.icon?React.createElement(s.icon,{className:"mb-2 h-5 w-5 text-current"}):null,React.createElement("span",{className:"block text-sm font-semibold"},s.label),s.description&&React.createElement("span",{className:"mt-1 block text-xs text-slate-500"},s.description)))),React.createElement("section",{className:"min-h-[480px]"},(n==null?void 0:n.element)||React.createElement("p",{className:"text-sm text-slate-500"},"Select a section to begin."))))}function Zt(){return React.createElement("a",{href:"#main",className:"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 rounded-full border border-[var(--surface-border)] bg-white/90 px-3 py-2 text-sm font-semibold text-brand shadow-sm backdrop-blur"},"Skip to content")}function Xt({onOpenCart:a,search:r,setSearch:e,ownerMode:n,setOwnerMode:s,cartQty:m,connectionStatus:d,allowOwnerToggle:x}){const[y,f]=v(!1),o=Y(null);B(()=>{const l=()=>f(window.scrollY>4);return l(),window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l)},[]),B(()=>{const l=()=>{var M;const u=((M=o.current)==null?void 0:M.offsetHeight)||64;document.documentElement.style.setProperty("--header-offset",u+"px")};return l(),window.addEventListener("resize",l,{passive:!0}),()=>window.removeEventListener("resize",l)},[n,r]);const i=d==="connected"?{wrapper:"border border-emerald-200 bg-emerald-50/80 text-emerald-600",dot:"bg-emerald-500",label:"Online"}:d==="error"?{wrapper:"border border-rose-200 bg-rose-50/80 text-rose-600",dot:"bg-rose-500",label:"Offline"}:{wrapper:"border border-amber-200 bg-amber-50/80 text-amber-600",dot:"bg-amber-400 animate-pulse",label:"Connecting"};return React.createElement("header",{ref:o,className:q("sticky top-0 z-40 w-full border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-xl transition-shadow duration-300",y?"shadow-sm":"")},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex h-16 items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement($t,{className:"h-7 w-7 text-brand flex-shrink-0"}),React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("span",{className:"font-semibold text-slate-900 text-sm sm:text-base tracking-tight truncate"},ke),React.createElement("div",{className:`hidden md:flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-medium ${i.wrapper}`,title:`Database ${d}`},React.createElement("span",{className:`inline-block h-2 w-2 rounded-full ${i.dot}`}),React.createElement("span",null,i.label)))),React.createElement("nav",{className:"flex items-center gap-1.5 sm:gap-2"},!n&&React.createElement("label",{className:"relative hidden sm:block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:l=>e(l.target.value),placeholder:"Search products\u2026",type:"search",className:"w-48 md:w-64 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Le,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),x&&React.createElement("button",{onClick:()=>s(!n),className:q("rounded-full border px-3 py-2 text-xs sm:text-sm font-medium transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",n?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/60 text-slate-700 hover:bg-white/80")},n?"Back":"Owner"),React.createElement("button",{onClick:a,className:"relative inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 sm:px-3.5 py-2 text-xs sm:text-sm font-medium text-slate-700 transition-colors hover:bg-white/80 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(Gt,{className:"h-4 w-4 text-brand"}),React.createElement("span",{className:"hidden sm:inline"},"Cart"),m>0&&React.createElement("span",{"aria-live":"polite",className:"absolute -top-1.5 -right-1.5 inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-1 text-[10px] font-semibold text-brand"},String(m))))),!n&&React.createElement("div",{className:"sm:hidden pb-0"},React.createElement("label",{className:"relative block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:r,onChange:l=>e(l.target.value),placeholder:"Search products\u2026",type:"search",className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-medium text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Le,{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})))))}function ea(){const a=[{title:"1. Browse products",detail:"Search or tap a category to find what you need."},{title:"2. Open an item",detail:"Choose the variants and quantities, then add to cart."},{title:"3. Review the cart",detail:"Adjust quantities or notes before sending."},{title:"4. Send via WhatsApp",detail:"Use the cart button to submit the full list for confirmation."}];return React.createElement("section",{"aria-labelledby":"hero-title",className:"border-b border-[var(--surface-border)] bg-hero-gradient"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16"},React.createElement("div",{className:"grid gap-12 lg:grid-cols-[minmax(0,1fr)_420px] items-start"},React.createElement("div",{className:"space-y-6"},React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-1 text-[11px] font-medium uppercase tracking-[0.14em] text-slate-600"},"Odil Accessories"),React.createElement("h1",{id:"hero-title",className:"text-[clamp(30px,6vw,48px)] font-semibold leading-tight tracking-tight text-slate-900"},"Wholesale catalogue for partner shops"),React.createElement("p",{className:"max-w-2xl text-base sm:text-lg text-slate-600"},fe),React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("a",{href:"#catalogue",className:"inline-flex items-center gap-2 rounded-full bg-brand px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Browse catalogue",React.createElement(Ft,{className:"h-4 w-4"})),React.createElement("a",{href:`https://wa.me/${X}`,target:"_blank",rel:"noreferrer noopener",className:"inline-flex items-center gap-2 rounded-full border border-[rgba(37,99,235,0.35)] bg-white/70 px-5 py-2.5 text-sm font-semibold text-slate-800 shadow-sm backdrop-blur transition hover:bg-white/90 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(lt,{className:"h-4 w-4 text-emerald-500"}),"Chat on WhatsApp")),React.createElement("p",{className:"text-sm text-slate-500"},"Follow the steps on the right when you place an order.")),React.createElement("div",{className:"glass-card rounded-3xl p-8 soft-shadow"},React.createElement("div",{className:"space-y-5 text-sm text-slate-600"},React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Order steps"),React.createElement("ol",{className:"space-y-3 text-sm"},a.map(r=>React.createElement("li",{key:r.title,className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 px-4 py-3 backdrop-blur"},React.createElement("p",{className:"text-sm font-semibold text-slate-900"},r.title),React.createElement("p",{className:"text-xs text-slate-500 mt-1"},r.detail))))),React.createElement("div",{className:"mt-6 flex items-center justify-between rounded-2xl border border-[var(--surface-border)] bg-white/80 px-4 py-3 text-xs uppercase tracking-[0.18em] text-slate-500"},React.createElement("span",null,"Owner metrics snapshot"),React.createElement("span",{className:"font-semibold text-slate-800"},"Realtime"))))))}function ta({active:a,setActive:r}){const e=Y(null),[n,s]=v({left:!1,right:!1});B(()=>{const d=()=>{const y=e.current;if(!y)return;const{scrollLeft:f,scrollWidth:o,clientWidth:i}=y,l=f>0,u=f+i<o-1;s(M=>M.left===l&&M.right===u?M:{left:l,right:u})};d();const x=e.current;if(x)return x.addEventListener("scroll",d,{passive:!0}),window.addEventListener("resize",d),()=>{x.removeEventListener("scroll",d),window.removeEventListener("resize",d)}},[]);const m=q("relative -mx-4 overflow-x-auto px-4 chip-scroll-fade",n.left&&"show-left",n.right&&"show-right");return React.createElement(React.Fragment,null,React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8","aria-label":"Categories"},React.createElement("div",{ref:e,className:m},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},_e.map(d=>React.createElement("button",{key:d,onClick:()=>r(d),"aria-pressed":a===d,className:q("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",a===d?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},d)))))))}function aa({products:a,onOpen:r}){return React.createElement("section",{id:"catalogue","aria-labelledby":"catalogue-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("h2",{id:"catalogue-title",className:"sr-only"},"Catalogue"),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.map(e=>React.createElement(ra,{key:e.id,product:e,onOpen:r}))))}function ra({product:a,onOpen:r}){const[e,n]=v(at(a));return B(()=>{n(at(a))},[a.image,a.images,a.name]),React.createElement("article",{className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition duration-200 hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full overflow-hidden bg-slate-100"},React.createElement("img",{src:e,onError:()=>n(ce(a.name)),alt:a.name,className:"h-full w-full object-cover",loading:"lazy"})),React.createElement("div",{className:"flex flex-1 flex-col gap-4 p-5"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},a.name),React.createElement("p",{className:"mt-1 text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"},"SKU ",a.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-[11px]"},(a.specs||[]).slice(0,4).map(s=>React.createElement("span",{key:s,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},s))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},ae(a.price))),React.createElement("div",null,React.createElement("button",{type:"button",onClick:()=>r(a),className:"w-full rounded-full border border-[rgba(37,99,235,0.28)] bg-white/70 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand hover:text-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"View details"))))}function sa({product:a,onClose:r,onAdd:e,cartItems:n}){const s=a&&a.__edit&&a.product?a.product:a;if(!s)return null;const m=Array.isArray(n)?n:[],d=K(()=>he(s.inventory),[s.inventory]),x=K(()=>{const c={};return m.forEach(g=>{if(!g||g.id!==s.id)return;const E=g.inventoryKey||te(g.variants||{});c[E]=(c[E]||0)+Number(g.qty||0)}),c},[m,s.id]),y=Y(null);Ie(!!s,y,r);const f=(()=>{const c=Array.isArray(s.images)&&s.images.length?s.images:s.image?[s.image]:[];return(c.length?c:[ce(s.name)]).map(g=>ye(g,s.name))})(),o=s.variants||{},i=Object.entries(o).filter(([,c])=>Array.isArray(c)&&c.length>0).map(([c])=>c),[l,u]=v({}),[M,P]=v({}),[S,h]=v({});B(()=>{if(!s)return;const c={};i.forEach(N=>{const _=o[N]||[];c[N]=_.length?[_[0]]:[]}),u(c);const g=(()=>{if(i.length===0)return[H];const N=[],_=(F,J)=>{if(F===i.length){N.push(te(J));return}const b=i[F];(c[b]||[]).forEach(t=>_(F+1,{...J,[b]:t}))};return _(0,{}),N})(),E={};g.forEach(N=>{E[N]=0}),P(E)},[s]);const $=(c,g)=>u(E=>{const N=E[c]||[],_=N.includes(g)?N.filter(F=>F!==g):[...N,g];return{...E,[c]:_}}),O=c=>u(g=>({...g,[c]:[...o[c]||[]]})),T=c=>u(g=>({...g,[c]:[]})),w=(c,g)=>{const E=Math.max(0,Number(g)||0);h(N=>{const _=N[c];if(_===void 0)return N;if(E<_){const F={...N};return delete F[c],F}return N}),P(N=>({...N,[c]:E}))},A=K(()=>{if(i.length===0)return[{key:H,sel:{}}];if(i.some(E=>(l[E]||[]).length===0))return[];const c=[],g=(E,N)=>{if(E===i.length){c.push({key:te(N),sel:N});return}const _=i[E];(l[_]||[]).forEach(F=>g(E+1,{...N,[_]:F}))};return g(0,{}),c},[i,l]),p=()=>{let c=!1,g=!1;A.forEach(({key:E,sel:N})=>{const _=Number(M[E]||0);if(!(_>0))return;const F=d[E]!==void 0?d[E]:E===H?d[H]:void 0,J=x[E]||0,b=typeof F=="number"?Math.max(F-J,0):void 0,t=typeof b=="number"?Math.min(_,b):_;t>0?(e({id:s.id,name:s.name,sku:s.sku,price:s.price,qty:t,variants:N,inventoryKey:E}),c=!0,t<_&&(g=!0)):g=!0}),g&&alert("Some items were adjusted to match available stock."),c&&r()},U=K(()=>A.reduce((c,{key:g})=>{const E=Number(M[g]||0);if(!Number.isFinite(E)||E<=0)return c;const N=d[g]!==void 0?d[g]:g===H?d[H]:void 0,_=x[g]||0,F=typeof N=="number"?Math.max(N-_,0):void 0,J=typeof F=="number"?Math.min(E,F):E;return J>0?c+J*s.price:c},0),[A,M,s.price,d,x]),C=A.every(({key:c})=>{const g=Number(M[c]||0);if(!(g>0))return!0;const E=d[c]!==void 0?d[c]:c===H?d[H]:void 0,N=x[c]||0,_=typeof E=="number"?Math.max(E-N,0):void 0;return!((typeof _=="number"?Math.min(g,_):g)>0)});return B(()=>{h(c=>{const g=new Set(A.map(({key:_})=>_));let E=!1;const N={};return Object.entries(c).forEach(([_,F])=>{g.has(_)?N[_]=F:E=!0}),E?N:c})},[A]),B(()=>{h({})},[s.id]),React.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":`product-title-${s.id}`,className:"fixed inset-0 z-50 flex items-stretch sm:items-center justify-center bg-black/40 p-0 sm:p-6",onClick:r,onTouchMove:c=>{c.target===c.currentTarget&&c.preventDefault()},onWheel:c=>{c.target===c.currentTarget&&c.preventDefault()}},React.createElement("div",{ref:y,tabIndex:-1,className:"w-full h-full sm:h-auto sm:max-w-3xl rounded-none sm:rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain overflow-y-auto max-h-none sm:max-h-[90vh]",style:{touchAction:"pan-y"},onClick:c=>c.stopPropagation()},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:`product-title-${s.id}`,className:"text-lg font-semibold text-slate-900"},s.name),React.createElement("button",{onClick:r,className:"rounded-full border border-transparent p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close"},React.createElement(ot,{className:"h-5 w-5"}))),React.createElement("div",{className:"grid gap-6 p-5 lg:grid-cols-[minmax(0,1fr)_260px]"},React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl border border-[var(--surface-border)] bg-slate-100"},React.createElement("img",{src:f[0],onError:c=>{c.currentTarget.src=ce(s.name)},alt:`${s.name} \u2013 photo`,className:"h-full w-full object-cover"})),s.description&&React.createElement("p",{className:"text-sm text-slate-600"},s.description),i.map(c=>{const g=o[c]||[],E=l[c]||[],N=c.toLowerCase().includes("color")||c==="Color";return React.createElement("div",{key:c,className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},c),g.length?React.createElement("div",{className:"flex items-center gap-2 text-xs text-slate-500"},React.createElement("button",{type:"button",onClick:()=>O(c),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:()=>T(c),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"Clear")):null),React.createElement("div",{className:"max-h-32 overflow-auto rounded-xl border border-[var(--surface-border)] bg-white/70 p-2"},React.createElement("div",{className:"flex flex-wrap gap-2 text-xs"},g.length===0?React.createElement("p",{className:"text-slate-500"},"No options"):g.map(_=>{const F=E.includes(_);return React.createElement("button",{type:"button",key:_,onClick:()=>$(c,_),className:q("inline-flex items-center gap-1 rounded-full border px-3 py-1 font-medium transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",F?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},N?React.createElement(ue,{name:_}):null,_)}))))}),React.createElement("div",{className:"space-y-3","aria-label":"Quantities"},A.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"Select at least one option."):A.map(({key:c,sel:g})=>{const E=d[c]!==void 0?d[c]:c===H?d[H]:void 0,N=x[c]||0,_=typeof E=="number"?Math.max(E-N,0):void 0,F=typeof _=="number"&&_<=0,J=S[c];return React.createElement("div",{key:c,className:q("rounded-2xl border px-3 py-3 text-sm shadow-sm backdrop-blur sm:flex sm:items-center sm:justify-between",F?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/85 text-slate-700")},React.createElement("div",{className:"space-y-1 text-sm"},Object.entries(g).map(([b,t],R)=>React.createElement("span",{key:`${b}-${t}`},R>0?" \xB7 ":"",b==="Color"?React.createElement("span",{className:"inline-flex items-center gap-1"},React.createElement(ue,{name:t}),t):React.createElement("span",{className:"font-medium text-slate-900"},t))),Object.keys(g).length===0&&React.createElement("span",{className:"font-medium text-slate-900"},"Quantity"),typeof E=="number"?React.createElement("p",{className:"text-xs text-slate-500"},`Remaining: ${Math.max(E-N,0)}${N>0?` (of ${E})`:""}`):React.createElement("p",{className:"text-xs text-slate-500"},"No stock limit")),React.createElement("div",{className:"mt-2 sm:mt-0"},React.createElement(ct,{value:Number(M[c]||0),onChange:b=>w(c,b),min:0,max:typeof _=="number"?_:void 0,onLimit:b=>{typeof b=="number"&&Number.isFinite(b)&&h(t=>({...t,[c]:b}))}})),J!==void 0?React.createElement("p",{className:"mt-2 text-xs font-medium text-rose-600 sm:ml-3 sm:mt-0 sm:text-right"},`Only ${J} available for this selection.`):null)}))),React.createElement("aside",{className:"glass-card rounded-3xl space-y-5 p-5"},React.createElement("div",{className:"space-y-2 text-sm"},React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Unit price"),React.createElement("span",{className:"font-semibold text-slate-900"},ae(s.price))),React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Selections"),React.createElement("span",{className:"font-medium text-slate-800"},A.length))),React.createElement("div",{className:"flex items-center justify-between rounded-2xl border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-4 py-3 text-sm font-medium text-brand"},React.createElement("span",{className:"uppercase tracking-[0.18em]"},"Line total"),React.createElement("span",{className:"text-base font-semibold text-brand"},ae(U))),React.createElement("p",{className:"text-xs text-slate-500"},"Add items to the cart and send the final list to WhatsApp when you are ready."),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{disabled:C,onClick:p,className:q("w-full rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",C?"pointer-events-none opacity-50":"hover:bg-brand-muted")},"Add to cart"),React.createElement("button",{onClick:r,className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Cancel"))))))}function ct({id:a,value:r,onChange:e,min:n=0,max:s,onLimit:m}){const d=o=>{typeof s=="number"&&Number.isFinite(s)&&typeof m=="function"&&o>s&&m(s)},x=(o,i)=>{d(typeof i=="number"?i:o);let l=Math.max(n,o);return typeof s=="number"&&Number.isFinite(s)&&(l=Math.min(s,l)),l},y=Number(r)||0,f=typeof s=="number"&&Number.isFinite(s)&&y>=s;return React.createElement("div",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 shadow-sm backdrop-blur",role:"group","aria-label":"Quantity"},React.createElement("button",{onClick:()=>e(x((Number(r)||0)-1,(Number(r)||0)-1)),className:"rounded-l-full px-3 py-1.5 text-slate-700 transition hover:bg-brand-soft focus:outline-none focus-visible:outline-2 focus-visible:outline-brand touch-manipulation select-none","aria-label":"Decrease quantity"},"\u2212"),React.createElement("input",{id:a,inputMode:"numeric",pattern:"[0-9]*",value:String(r),onChange:o=>{const i=Number(o.target.value.replace(/[^0-9]/g,"")),l=Number.isFinite(i)?i:n;e(Number.isFinite(i)?x(l,l):n)},className:"w-14 appearance-none border-x border-[var(--surface-border)] bg-transparent px-2 py-1.5 text-center text-base sm:text-sm text-slate-900 focus:outline-none"}),React.createElement("button",{onClick:()=>e(x((Number(r)||0)+1,(Number(r)||0)+1)),className:q("rounded-r-full px-3 py-1.5 touch-manipulation select-none transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",f?"cursor-not-allowed text-slate-300":"text-slate-700 hover:bg-brand-soft"),"aria-label":"Increase quantity",disabled:f},"+"))}async function na(a){var r;try{if((r=navigator.clipboard)!=null&&r.writeText)return await navigator.clipboard.writeText(a),!0}catch(e){}try{const e=document.createElement("textarea");return e.value=a,e.setAttribute("readonly",""),e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),!0}catch(e){return!1}}function oa({open:a,onClose:r,cart:e,productLookup:n}){const s=Y(null);Ie(a,s,r);const m=Lt(),d=K(()=>la(e.items,e.subtotal,e.notes),[e.items,e.subtotal,e.notes]),x=e.items.some(u=>Number(u.qty)>0),y=`https://wa.me/${X}?text=${encodeURIComponent(d)}`,f=`whatsapp://send?phone=${X}&text=${encodeURIComponent(d)}`,o=/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent),[i,l]=v({});return B(()=>{l(u=>{const M=new Set((e.items||[]).map(h=>{if(!h)return null;const $=h.inventoryKey||te(h.variants||{});return`${h.id||""}::${$}`}).filter(Boolean));let P=!1;const S={};return Object.entries(u).forEach(([h,$])=>{M.has(h)?S[h]=$:P=!0}),P?S:u})},[e.items]),React.createElement("div",{"aria-live":"polite"},React.createElement("div",{className:q("fixed inset-0 z-40 bg-black/40 transition-opacity",a?"opacity-100":"pointer-events-none opacity-0"),onClick:r,onTouchMove:u=>{u.preventDefault()},onTouchStart:u=>{u.preventDefault()},onWheel:u=>{u.preventDefault()},"aria-hidden":"true"}),React.createElement("aside",{role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",className:q("fixed right-0 top-0 z-50 h-full w-full max-w-md transform border-l border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain",m?"transition-none":"transition-transform duration-200 ease-out",a?"translate-x-0":"translate-x-full")},React.createElement("div",{ref:s,className:"flex h-full flex-col"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:"cart-title",className:"text-lg font-semibold text-slate-900"},"Your cart"),React.createElement("button",{onClick:r,className:"rounded-full p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close cart"},React.createElement(ot,{className:"h-5 w-5"}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-4",style:{touchAction:"pan-y"}},e.items.length===0?React.createElement("p",{className:"text-sm text-slate-500"},"Your cart is empty."):React.createElement("ul",{className:"space-y-3"},e.items.map((u,M)=>{const P=n&&typeof n.get=="function"?n.get(u.id):void 0,S=P?he(P.inventory):{},h=u.inventoryKey||te(u.variants||{}),$=S[h]!==void 0?S[h]:h===H?S[H]:void 0;let O=0;e.items.forEach((C,c)=>{if(c===M||!C||C.id!==u.id)return;(C.inventoryKey||te(C.variants||{}))===h&&(O+=Number(C.qty||0))});const T=typeof $=="number"?Math.max($-O,0):void 0,w=typeof T=="number"&&u.qty>T,A=typeof T=="number"?`Available: ${T}`:null,p=`${u.id||""}::${h}`,U=i[p];return React.createElement("li",{key:M,className:q("rounded-2xl border p-3 shadow-sm backdrop-blur transition",w?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/80 text-slate-700")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"font-semibold text-slate-900"},u.name),React.createElement("p",{className:"text-xs text-slate-500"},"SKU: ",u.sku),u.variants&&Object.keys(u.variants).length>0&&React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},Object.entries(u.variants).map(([C,c])=>React.createElement("span",{key:C,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2 py-0.5 text-xs font-medium text-slate-600"},C==="Color"?React.createElement(React.Fragment,null,React.createElement(ue,{name:c}),`${C}: ${c}`):`${C}: ${c}`))),A&&React.createElement("p",{className:"mt-1 text-xs text-slate-500"},A),U!==void 0?React.createElement("p",{className:"mt-1 text-xs font-medium text-rose-600"},`Only ${U} available for this selection.`):null),React.createElement("button",{onClick:()=>e.removeIndex(M),className:"rounded-full p-1.5 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":`Remove ${u.name}`},React.createElement(qt,{className:"h-4 w-4 text-slate-500"}))),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement(ct,{value:u.qty,onChange:C=>{const c=typeof T=="number"?Math.min(C,T):C;e.updateQty(M,c),l(g=>{const E=g[p];if(E===void 0)return g;if(c<E){const N={...g};return delete N[p],N}return g})},min:0,max:typeof T=="number"?T:void 0,onLimit:C=>{typeof C=="number"&&Number.isFinite(C)&&l(c=>({...c,[p]:C}))}}),React.createElement("div",{className:"text-sm text-slate-600"},ae(u.price)," \xD7 ",u.qty," = ",React.createElement("span",{className:"font-semibold text-slate-900"},ae(u.price*u.qty)))))}))),React.createElement("div",{className:"border-t border-[var(--surface-border)] bg-white/60 p-4 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between text-sm text-slate-600"},React.createElement("span",null,"Subtotal"),React.createElement("span",{className:"font-semibold text-slate-900"},ae(e.subtotal))),React.createElement("label",{className:"mt-3 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Notes"),React.createElement("textarea",{value:e.notes,onChange:u=>e.setNotes(u.target.value),rows:2,className:"w-full resize-none rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",placeholder:"Delivery preferences, color mix, etc."})),React.createElement("div",{className:"mt-3 flex gap-3"},React.createElement("button",{onClick:e.clear,className:"flex-1 rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Clear cart"),React.createElement("button",{type:"button",onClick:async()=>{if(!x){alert("Add at least one product before sending an order.");return}if(e.items.filter((h,$)=>{const O=n&&typeof n.get=="function"?n.get(h.id):void 0,T=O?he(O.inventory):{},w=h.inventoryKey||te(h.variants||{}),A=T[w]!==void 0?T[w]:w===H?T[H]:void 0;if(typeof A!="number")return!1;let p=0;e.items.forEach((C,c)=>{if(c===$||!C||C.id!==h.id)return;(C.inventoryKey||te(C.variants||{}))===w&&(p+=Number(C.qty||0))});const U=Math.max(A-p,0);return h.qty>U}).length>0){alert("One or more items exceed available stock. Please adjust the quantities before sending the order.");return}try{await me("createOrder",{currency:ee,subtotal_cents:Math.round(e.subtotal*100),notes:e.notes||"",items:e.items.map((h,$)=>({product_id:h.id,sku:h.sku,name:h.name,quantity:Number(h.qty)||0,unit_price_cents:Math.round(Number(h.price||0)*100),subtotal_cents:Math.round(Number(h.price||0)*Number(h.qty||0)*100),variants:h.variants||{},inventory_key:h.inventoryKey||te(h.variants||{})}))})}catch(h){console.error("Failed to record order",h)}try{await na(d),alert("\u2705 Your list is copied! If WhatsApp doesn't open, you can paste it manually.")}catch(h){alert("\u{1F4CB} Please copy your order manually if WhatsApp doesn't open automatically.")}let M=!1;const P=()=>{M||(M=!0,e.clear(),e.setNotes(""))},S=()=>P();if(window.addEventListener("pagehide",S,{once:!0}),document.addEventListener("visibilitychange",function h(){document.hidden&&(P(),document.removeEventListener("visibilitychange",h))},{once:!0}),o)P(),window.location.href=f,setTimeout(()=>{try{window.open(y,"_blank","noopener,noreferrer")}catch(h){}},800);else{const h=window.open(y,"_blank","noopener,noreferrer");setTimeout(P,500)}},className:q("flex-1 inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",x?"bg-brand hover:bg-brand-muted":"pointer-events-none bg-[rgba(37,99,235,0.28)] text-white/70")},"Send via WhatsApp",React.createElement(lt,{className:"h-4 w-4 text-white"})))))))}function la(a,r,e){const n=(a||[]).filter(m=>Number(m.qty)>0);let s=`\u{1F6D2} *Order Request*

`;return n.forEach(m=>{s+=`\u2022 ${m.name} (SKU: ${m.sku})
`,m.variants&&Object.keys(m.variants).length>0&&(s+=`  Variants: ${Object.entries(m.variants).map(([d,x])=>`${d}: ${x}`).join(", ")}
`),s+=`  Qty: ${m.qty} \xD7 ${ae(m.price)} = ${ae(m.price*m.qty)}

`}),s+=`*Subtotal: ${ae(r)}*

`,(e||"").trim()&&(s+=`*Notes:* ${e.trim()}

`),s+="Please confirm availability and pricing. Thank you!",s}function ca({addProduct:a,products:r,removeProduct:e,onNotify:n}){const[s,m]=v("Phone Screens"),[d,x]=v("");B(()=>{x(t=>{const R=new Set(_e),k=(t||"").trim(),L=R.has(k.replace(" \u2014",""))||k.endsWith(" \u2014");return!k||L?`${s} \u2014 `:t})},[s]);const[y,f]=v(""),[o,i]=v(""),[l,u]=v(""),[M,P]=v([]),[S,h]=v([]),[$,O]=v(null),[T,w]=v(!1),[A,p]=v({}),U=(t,R)=>{h([]),O(null),p(k=>({...k,[t]:R}))},C=(t,R)=>p(k=>{h([]),O(null);const L=Array.isArray(k[t])?k[t]:[];return{...k,[t]:L.includes(R)?L.filter(D=>D!==R):[...L,R]}});function c(t){h([]),O(null);const R=Array.from(t.target.files||[]);if(!R.length)return;const k=R.map(L=>new Promise(D=>{const G=new FileReader;G.onload=()=>D(String(G.result||"")),G.readAsDataURL(L)}));Promise.all(k).then(L=>P(D=>[...D,...L]))}const g=t=>Array.isArray(t)&&t.length?t[0]:t!=null?t:"",E={"Phone Screens":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"display",label:"Display type/quality",type:"select",options:["OLED \u2013 OEM","OLED \u2013 AAA","LCD \u2013 OEM","LCD \u2013 AAA"]},{key:"frame",label:"Frame",type:"select",options:["With frame","Without frame"]}],also:[{key:"frontColor",label:"Front color",type:"select",options:["Black","White"]},{key:"retention",label:"True Tone/Face ID retention",type:"checkbox"}],optional:[{key:"adhesive",label:"Pre-installed adhesive / waterproof gasket",type:"checkbox"}],name:t=>`Screen \u2014 ${g(t.models)} ${t.display?`${String(t.display).split(" ")[0]}`:""}`.trim(),specs:t=>[t.display,t.frame,t.frontColor].filter(Boolean)},"Back Glass":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"colors",label:"Colors / finish",type:"multiselect",options:xe}],also:[{key:"adhesive",label:"Adhesive pre-installed",type:"checkbox"},{key:"rings",label:"With camera rings",type:"checkbox"}],optional:[{key:"grade",label:"Quality grade",type:"select",options:Ye}],name:t=>`Back Glass \u2014 ${g(t.models)}`.trim(),specs:t=>[g(t.colors)||null,t.grade,t.adhesive?"Adhesive":null,t.rings?"Camera rings":null].filter(Boolean)},"Power Banks":{must:[{key:"capacity",label:"Capacity",type:"select",options:Bt},{key:"ports",label:"Output ports",type:"select",options:Je}],also:[{key:"standard",label:"Standard",type:"select",options:pe}],optional:[{key:"colour",label:"Colour",type:"select",options:xe}],name:t=>`Power bank \u2014 ${t.capacity||""}`.trim(),specs:t=>[t.capacity,t.ports,t.standard].filter(Boolean)},"Screen Protectors":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:vt},{key:"pack",label:"Pack",type:"select",options:Et}],also:[{key:"finish",label:"Finish",type:"select",options:wt},{key:"coverage",label:"Coverage",type:"select",options:Rt}],optional:[],name:t=>`Protector \u2014 ${g(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,t.finish,t.coverage].filter(Boolean)},Batteries:{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"grade",label:"Grade",type:"select",options:Ye}],also:[],optional:[{key:"capacity",label:"Capacity (mAh)",type:"text",placeholder:"e.g. 3000"}],name:t=>`Battery \u2014 ${g(t.models)}`.trim(),specs:t=>[t.grade,t.capacity].filter(Boolean)},"Mobile Phones":{must:[{key:"model",label:"Model",type:"text",placeholder:"e.g., iPhone 13"},{key:"cond",label:"Condition/grade",type:"select",options:Ze},{key:"sim",label:"SIM",type:"select",options:Ct}],also:[{key:"connect",label:"Connectivity",type:"select",options:Pt},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:Xe},{key:"ram",label:"RAM",type:"multiselect",options:et},{key:"color",label:"Color",type:"text"},{key:"inbox",label:"Accessories in box",type:"text",placeholder:"Cable, charger"}],name:t=>`${t.model||""} ${t.cond||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.cond,t.sim,t.connect].filter(Boolean)},Tablets:{must:[{key:"model",label:"Model",type:"text",placeholder:"iPad 10th Gen"},{key:"conn",label:"Connectivity",type:"select",options:Ot}],also:[{key:"screen",label:"Screen size",type:"text",placeholder:'10.9"'},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:Xe},{key:"ram",label:"RAM",type:"multiselect",options:et},{key:"cond",label:"Condition/grade",type:"select",options:Ze},{key:"color",label:"Color",type:"text"},{key:"compat",label:"Pencil/keyboard compatibility",type:"text"}],name:t=>`${t.model||""} ${t.conn||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.conn,t.screen,t.cond].filter(Boolean)},"Phone Cases":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:yt}],also:[{key:"color",label:"Color",type:"multiselect",options:xe}],optional:[{key:"pattern",label:"Pattern / style",type:"text"}],name:t=>`Case \u2014 ${g(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,g(t.color)||null].filter(Boolean)},Cables:{must:[{key:"connector",label:"Connector",type:"select",options:Me},{key:"length",label:"Length",type:"select",options:Qe}],also:[{key:"rating",label:"Power rating",type:"select",options:Ve},{key:"durability",label:"Durability",type:"select",options:kt}],optional:[{key:"cert",label:"Certs",type:"select",options:Nt}],name:t=>`Cable \u2014 ${t.connector||""} ${t.length?`(${t.length})`:""}`.trim(),specs:t=>[t.connector,t.length,t.rating].filter(Boolean)},Chargers:{must:[{key:"wattage",label:"Wattage",type:"select",options:St||["20W","30W","45W","65W"]},{key:"ports",label:"Ports",type:"select",options:Je}],also:[{key:"standard",label:"Standard",type:"select",options:pe},{key:"plug",label:"Plug type",type:"select",options:At}],optional:[],name:t=>`Charger \u2014 ${t.wattage||""}`.trim(),specs:t=>[t.wattage,t.ports].filter(Boolean)},Earphones:{must:[{key:"type",label:"Type",type:"select",options:["Wired","TWS"]}],also:[{key:"connector",label:"Connector / Standard",type:"select",options:[...Me,...pe]}],optional:[{key:"color",label:"Color",type:"select",options:xe}],name:t=>`Earphones \u2014 ${t.type||""}`.trim(),specs:t=>[t.type,t.connector].filter(Boolean)},"Charging Ports":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"type",label:"Port type",type:"select",options:["USB-C","Lightning","Micro-USB"]}],also:[],optional:[{key:"solderRequired",label:"Solder required",type:"checkbox"}],name:t=>`Charging port \u2014 ${g(t.models)}`.trim(),specs:t=>[t.type,t.solderRequired?"Solder":null].filter(Boolean)},"Face ID":{must:[{key:"models",label:"Phone models",type:"phoneModels",allowedBrands:["iPhone"]},{key:"service",label:"Service",type:"select",options:["Repair","Replace","Calibration"]}],also:[],optional:[],name:t=>`Face ID \u2014 ${g(t.models)}`.trim(),specs:t=>[t.service].filter(Boolean)}};B(()=>{const t=E[s]||{must:[],also:[],optional:[]},R={},k=L=>L.forEach(D=>{D.type==="select"&&(R[D.key]=""),D.type==="number"&&(R[D.key]=""),D.type==="text"&&(R[D.key]=""),D.type==="checkbox"&&(R[D.key]=!1),D.type==="multiselect"&&(R[D.key]=[])});k(t.must),k(t.also),k(t.optional),p(R)},[s]);const N=({f:t})=>{var L,D;if(!t)return null;const R="mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500",k="w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand";if(t.type==="select")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:R},t.label),React.createElement("select",{value:(L=A[t.key])!=null?L:"",onChange:G=>U(t.key,G.target.value),className:k},(t.options||[]).map(G=>React.createElement("option",{key:G,value:G},G))));if(t.type==="text"||t.type==="number")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:R},t.label),React.createElement("input",{type:t.type,value:(D=A[t.key])!=null?D:"",onChange:G=>U(t.key,t.type==="number"?G.target.value.replace(/[^0-9.]/g,""):G.target.value),placeholder:t.placeholder||"",className:k}));if(t.type==="checkbox")return React.createElement("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-2 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("input",{type:"checkbox",checked:!!A[t.key],onChange:G=>U(t.key,G.target.checked),className:"h-4 w-4 rounded border-[var(--surface-border)] text-brand focus:ring-brand"}),React.createElement("span",null,t.label));if(t.type==="multiselect"){const G=t.options||[],Q=Array.isArray(A[t.key])?A[t.key]:[];return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},t.label),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:()=>U(t.key,G),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>U(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},G.map(V=>{const I=Q.includes(V),W=Be[V]!==void 0||/color/i.test(t.label);return React.createElement("button",{type:"button",key:V,onClick:()=>C(t.key,V),className:q("inline-flex items-center gap-1 rounded-full border px-2.5 py-1 font-medium transition",I?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},W?React.createElement(React.Fragment,null,React.createElement(ue,{name:V}),V):V)})))}if(t.type==="phoneModels"){const G=`${t.key}Brand`,Q=A[G]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"),V=xt[Q]||[],I=Array.isArray(A[t.key])?A[t.key]:[],W=j=>{U(G,j),U(t.key,[])};return React.createElement("div",{className:"space-y-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},(t.allowedBrands||ht).map(j=>React.createElement("button",{type:"button",key:j,onClick:()=>W(j),className:q("rounded-full border px-2.5 py-1 font-medium transition",(A[`${t.key}Brand`]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"))===j?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},j))),React.createElement("div",{className:"flex items-center justify-between text-xs text-slate-500"},React.createElement("span",{className:"font-semibold text-slate-800"},`${Q} models`),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>U(t.key,V),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>U(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},V.map(j=>{const z=I.includes(j);return React.createElement("button",{type:"button",key:j,onClick:()=>{const ie=Array.isArray(A[t.key])?A[t.key]:[];U(t.key,z?ie.filter(dt=>dt!==j):[...ie,j])},className:q("rounded-full border px-2.5 py-1 font-medium transition",z?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},j)})))}return null},_=()=>{const t=E[s]||{must:[],also:[],optional:[],name:null,specs:null},R=t.name&&t.name(A)||`${s} item`,k=d.trim()||R,L={},D=(W,j)=>{if(j==="models")return"Model";const z=String(W).toLowerCase().trim();return z==="color"||z==="colors"||z==="colour"?"Color":W.trim()},G=(W,j,z)=>{if(z==null||z===""||Array.isArray(z)&&z.length===0)return;const ie=D(W,j);L[ie]=Array.isArray(z)?z:[String(z)]};[...t.must||[],...t.also||[],...t.optional||[]].forEach(W=>{const j=A[W.key];W.type==="checkbox"?j&&G(W.label,W.key,"Yes"):G(W.label,W.key,j)}),A.modelsBrand&&G("Phone","modelsBrand",A.modelsBrand),Object.keys(L).forEach(W=>{const j=Array.isArray(L[W])?L[W].map(z=>String(z).trim()).filter(Boolean):[];j.length?L[W]=Array.from(new Set(j)):delete L[W]});const Q=(t.specs&&t.specs(A)||[]).filter(Boolean).slice(0,6),V=Array.from(new Set((M||[]).filter(Boolean))),I={id:`owner-${Date.now()}`,name:k,sku:y.trim()||`SKU-${(Math.random()*1e6|0).toString(36)}`,category:s,price:Number(o)||0,description:l.trim(),image:V[0]||void 0,images:V.length?V:void 0,specs:Q,variants:L};return Z(I)},F=()=>{var G;const t=[],R=E[s]||{must:[]},k=Number(o);(!Number.isFinite(k)||k<=0)&&t.push("Price must be greater than 0");const L=(R.must||[]).find(Q=>Q.type==="phoneModels");if(L){const Q=A[L.key];(!Array.isArray(Q)||Q.length===0)&&t.push("Please select at least one model")}const D=(R.must||[]).find(Q=>Q.key==="model");return D&&(String((G=A[D.key])!=null?G:"").trim()||t.push("Model is required")),t},J=async()=>{const t=F();if(t.length){h(t),O(null);return}const R=_();if(R){w(!0);try{const k=await a(R),L=!!(k&&k.persisted);h([]),L?O({type:"success",message:"Product added to catalogue."}):(O({type:"warning",message:"Product saved locally. Supabase sync pending."}),n==null||n("warning","Supabase connection unavailable. Product stored locally until sync succeeds.")),x(`${s} \u2014 `),f(""),i(""),u(""),P([]),p({})}catch(k){console.error("Failed to add product:",k),O({type:"error",message:"Could not save product. Check your connection and try again."}),n==null||n("error","Could not add product. Check your connection and try again.")}finally{w(!1)}}},b=E[s]||{must:[],also:[],optional:[]};return React.createElement("section",{"aria-labelledby":"owner-title",className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8"},React.createElement("div",{className:"space-y-6 rounded-3xl border border-[var(--surface-border)] bg-white/95 p-6 sm:p-8 shadow-soft-xl"},React.createElement("div",{className:"space-y-2"},React.createElement("h2",{id:"owner-title",className:"text-2xl font-semibold text-slate-900"},"Owner \u2014 Add products"),React.createElement("p",{className:"text-sm text-slate-600"},"Only essentials. Fields shift by category. Keep data clean; the catalogue updates instantly.")),$&&React.createElement("div",{className:q("rounded-2xl border px-4 py-3 text-sm shadow-sm",$.type==="error"?"border-rose-200 bg-rose-50/80 text-rose-700":$.type==="warning"?"border-amber-200 bg-amber-50/80 text-amber-700":"border-emerald-200 bg-emerald-50/80 text-emerald-700")},$.message),S.length>0&&React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/80 px-4 py-3 text-sm text-amber-700 shadow-sm"},React.createElement("p",{className:"font-semibold"},"Please fix the following:"),React.createElement("ul",{className:"mt-1 list-disc space-y-0.5 pl-4"},S.map((t,R)=>React.createElement("li",{key:R},t)))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Essentials"),React.createElement("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2"},React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Category"),React.createElement("select",{value:s,onChange:t=>{h([]),O(null),m(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},_e.filter(t=>t!=="All").map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:o,onChange:t=>{h([]),O(null),i(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Name"),React.createElement("input",{value:d,onChange:t=>{h([]),O(null),x(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"SKU"),React.createElement("input",{value:y,onChange:t=>{h([]),O(null),f(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"md:col-span-2 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Short description"),React.createElement("textarea",{rows:3,value:l,onChange:t=>{h([]),O(null),u(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:c}),M.length>0&&React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},M.map((t,R)=>React.createElement("div",{key:R,className:"relative"},React.createElement("img",{src:t,alt:`preview ${R+1}`,className:"h-20 w-20 overflow-hidden rounded-xl border border-[var(--surface-border)] object-cover"}),React.createElement("button",{type:"button",onClick:()=>{h([]),O(null),P(k=>k.filter((L,D)=>D!==R))},className:"absolute -right-1 -top-1 rounded-full border border-[var(--surface-border)] bg-white px-1 text-xs shadow","aria-label":`Remove photo ${R+1}`},"\xD7"))))))),React.createElement("div",{className:"space-y-3"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Variants & Specs"),React.createElement("div",{className:"grid gap-3 md:grid-cols-2"},[...b.must||[],...b.also||[],...b.optional||[]].map(t=>React.createElement(N,{key:t.key,f:t})))),React.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},React.createElement("button",{type:"button",onClick:J,disabled:T,className:q("inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",T?"bg-brand/50 cursor-not-allowed opacity-70":"bg-brand hover:bg-brand-muted")},T?"Saving...":"Add Product"),React.createElement("button",{type:"button",onClick:()=>{var t;return(t=window.__setOwnerManage)==null?void 0:t.call(window,!0)},className:"inline-flex items-center justify-center rounded-full border border-[var(--surface-border)] bg-white/70 px-6 py-2 text-sm font-semibold text-slate-800 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Manage catalogue"))))}function it({label:a,options:r,value:e,onChange:n}){const s=()=>n(r),m=()=>n([]),d=x=>n(e.includes(x)?e.filter(y=>y!==x):[...e,x]);return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},a),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:s,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:m,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},r.map(x=>{const y=e.includes(x),f=/color/i.test(a)||Be[x]!==void 0;return React.createElement("button",{type:"button",key:x,onClick:()=>d(x),className:q("rounded-full border px-2 py-1 text-xs",y?"border-transparent bg-brand text-white":"border-[var(--surface-border)] bg-white text-slate-700")},f?React.createElement(React.Fragment,null,React.createElement(ue,{name:x})," ",x):x)})))}function ia({open:a,onClose:r,product:e,onSave:n,onHide:s,onDelete:m}){var E,N,_,F,J;const d=Y(null);Ie(!!a,d,r);const[x,y]=v((e==null?void 0:e.name)||""),[f,o]=v((e==null?void 0:e.sku)||""),[i,l]=v(String((E=e==null?void 0:e.price)!=null?E:0)),[u,M]=v((e==null?void 0:e.description)||""),[P,S]=v(()=>[...Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[]]),[h,$]=v(0),[O,T]=v(()=>{const b={...(e==null?void 0:e.variants)||{}};return b.Color&&!Array.isArray(b.Color)&&(b.Color=[b.Color]),b.Model&&!Array.isArray(b.Model)&&(b.Model=[b.Model]),b});B(()=>{var t;if(!a)return;y((e==null?void 0:e.name)||""),o((e==null?void 0:e.sku)||""),l(String((t=e==null?void 0:e.price)!=null?t:0)),M((e==null?void 0:e.description)||"");const b=Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[];S([...b]),$(0),T({...(e==null?void 0:e.variants)||{}})},[a,e]);const w=b=>{const t=Array.from(b.target.files||[]);if(!t.length)return;const R=t.map(k=>new Promise(L=>{const D=new FileReader;D.onload=()=>L(String(D.result||"")),D.readAsDataURL(k)}));Promise.all(R).then(k=>S(L=>[...L,...k]))},A=()=>$(b=>(b-1+P.length)%P.length),p=()=>$(b=>(b+1)%P.length),U=()=>{const b=Object.fromEntries(Object.entries(O||{}).map(([D,G])=>{const Q=Array.isArray(G)?G.map(V=>String(V).trim()).filter(Boolean):[];return[D,Array.from(new Set(Q))]}).filter(([,D])=>Array.isArray(D)&&D.length)),t=x.trim()||e.name,R=f.trim()||e.sku,k=Number(i),L=Z({...e||{},name:t,sku:R,price:Number.isFinite(k)&&k>0?k:Number(e.price)||0,description:u,images:P.length?P:void 0,image:P[0]||void 0,variants:b});n(L,e==null?void 0:e.id),r()},C=!!((_=(N=e==null?void 0:e.id)==null?void 0:N.startsWith)!=null&&_.call(N,"owner-")),c=Array.from(new Set([...O.Model||[]])),g=Array.from(new Set([...O.Color||[]]));return!a||!e?null:React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-0 sm:p-6",role:"dialog","aria-modal":"true"},React.createElement("div",{ref:d,className:"w-full sm:max-w-3xl rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none max-h-[90vh] overflow-y-auto"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{className:"text-lg font-semibold text-slate-900"},"Edit product"),React.createElement("div",{className:"flex items-center gap-2"},!C&&React.createElement("button",{onClick:()=>{s(e.id),r()},className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Hide base"),C&&React.createElement("button",{onClick:()=>{m(e.id),r()},className:"rounded-full border border-rose-300 bg-rose-50/80 px-3.5 py-1.5 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-rose-400"},"Delete"),React.createElement("button",{onClick:r,className:"rounded-full px-3.5 py-1.5 text-sm font-semibold text-slate-500 transition hover:bg-white/70 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Close"))),React.createElement("div",{className:"grid gap-4 p-4 sm:grid-cols-2"},React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-xl bg-slate-100"},React.createElement("img",{src:ye(P[h]||"",e.name),onError:b=>{b.currentTarget.src=ce(e.name)},alt:`${e.name} \u2013 photo ${h+1} of ${P.length}`,className:"h-full w-full object-cover"}),P.length>1&&React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:A,className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Previous photo"},"\u2039"),React.createElement("button",{type:"button",onClick:p,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Next photo"},"\u203A"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"text-xs text-slate-700 inline-flex items-center gap-2"},React.createElement("span",{className:"rounded-full border border-[var(--surface-border)] bg-white px-2 py-1"},"Add photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:w,className:"sr-only"}))),P.length>0&&React.createElement("div",{className:"flex gap-2 overflow-x-auto"},P.map((b,t)=>React.createElement("div",{key:t,className:q("relative h-14 w-20 flex-shrink-0 overflow-hidden rounded-md border",t===h?"border-brand":"border-[var(--surface-border)]")},React.createElement("button",{type:"button",onClick:()=>$(t),className:"absolute inset-0"},React.createElement("img",{src:ye(b,e.name),alt:"",className:"h-full w-full object-cover"})),React.createElement("button",{type:"button",onClick:()=>S(R=>R.filter((k,L)=>L!==t)),className:"absolute -right-1 -top-1 rounded-full bg-white border p-0.5 shadow","aria-label":`Remove photo ${t+1}`},"\xD7"))))),React.createElement("div",{className:"flex min-w-0 flex-col gap-3"},React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Name"),React.createElement("input",{value:x,onChange:b=>y(b.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"SKU"),React.createElement("input",{value:f,onChange:b=>o(b.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:i,onChange:b=>l(b.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Description"),React.createElement("textarea",{rows:3,value:u,onChange:b=>M(b.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("div",{className:"grid gap-3"},!!((F=e==null?void 0:e.variants)!=null&&F.Model)&&React.createElement(it,{label:"Models",options:[...we,...Ke,...He],value:c,onChange:b=>T(t=>({...t,Model:b}))}),!!((J=e==null?void 0:e.variants)!=null&&J.Color)&&React.createElement(it,{label:"Colors",options:xe,value:g,onChange:b=>T(t=>({...t,Color:b}))}),Object.entries((e==null?void 0:e.variants)||{}).filter(([b])=>b!=="Model"&&b!=="Color").map(([b,t])=>React.createElement("div",{key:b,className:"text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},b),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(O[b]||t).map(R=>React.createElement("span",{key:R,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-1 text-xs font-medium text-slate-600"},R,React.createElement("button",{type:"button",onClick:()=>T(k=>({...k,[b]:(k[b]||t).filter(L=>L!==R)})),"aria-label":`Remove ${R}`},"\xD7")))),React.createElement("div",{className:"mt-1 flex gap-2"},React.createElement("input",{type:"text",placeholder:`Add ${b} option`,className:"w-44 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-medium text-slate-700 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onKeyDown:R=>{if(R.key==="Enter"){const k=R.currentTarget.value.trim();k&&T(L=>({...L,[b]:Array.from(new Set([...L[b]||t,k]))})),R.currentTarget.value=""}}}),React.createElement("button",{type:"button",className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",onClick:R=>{const k=R.currentTarget.previousSibling;if(k&&k.value){const L=k.value.trim();T(D=>({...D,[b]:Array.from(new Set([...D[b]||t,L]))})),k.value=""}}},"Add"))))),React.createElement("div",{className:"mt-2 flex justify-end gap-3"},React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white px-4 py-2 text-sm text-slate-900 hover:bg-white/70"},"Cancel"),React.createElement("button",{onClick:U,className:"rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-muted"},"Save changes"))))))}function da({products:a,onClose:r,onEdit:e,onHide:n,onDelete:s,onSave:m}){const[d,x]=v(""),[y,f]=v(null),o=K(()=>{let i=a;if(d){const l=d.toLowerCase();i=i.filter(u=>u.name.toLowerCase().includes(l)||u.sku.toLowerCase().includes(l)||(u.description||"").toLowerCase().includes(l))}return i},[a,d]);return React.createElement("section",{"aria-labelledby":"mgr-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("div",{className:"space-y-6 rounded-3xl border border-[var(--surface-border)] bg-white/95 p-6 shadow-soft-xl sm:p-8"},React.createElement("div",{className:"sticky top-[calc(var(--header-offset,64px)+12px)] z-10 rounded-2xl border border-[var(--surface-border)] bg-white/90 px-4 py-3 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},React.createElement("h2",{id:"mgr-title",className:"text-base sm:text-lg font-semibold text-slate-900"},"Owner \u2014 Manage catalogue"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"relative flex-1 sm:w-auto"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:d,onChange:i=>x(i.target.value),placeholder:"Search\u2026",type:"search",className:"w-full rounded-full border border-[var(--surface-border)] bg-white px-3.5 py-2 text-sm font-medium text-slate-600 shadow-inner placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"}),React.createElement(Le,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),React.createElement("button",{onClick:r,className:"rounded-full border border-[var(--surface-border)] bg-white px-3.5 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-white/90 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Back")))),React.createElement("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},(o||[]).map(i=>React.createElement("article",{key:i.id,className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white transition hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full bg-slate-100"},React.createElement("img",{src:ye(Array.isArray(i.images)&&i.images[0]||i.image||"",i.name),onError:l=>{l.currentTarget.src=ce(i.name)},alt:i.name,className:"h-full w-full object-cover"})),React.createElement("div",{className:"flex flex-1 flex-col gap-3 p-4"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},i.name),React.createElement("p",{className:"mt-0.5 text-xs text-slate-500"},"SKU: ",i.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(i.specs||[]).slice(0,4).map(l=>React.createElement("span",{key:l,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 text-xs font-medium text-slate-600"},l))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"font-semibold text-slate-900"},ae(i.price)),i.minOrder&&React.createElement("span",{className:"text-xs text-slate-500"},"MOQ ",i.minOrder)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>f(i),className:"flex-1 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted"},"Edit"),i.id.startsWith("owner-")?React.createElement("button",{onClick:()=>s(i.id),className:"rounded-full border border-red-300 bg-white px-3 py-2 text-sm text-red-700 hover:bg-red-50"},"Delete"):React.createElement("button",{onClick:()=>n(i.id),className:"rounded-full border border-[var(--surface-border)] bg-white px-3.5 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white/90"},"Hide"))))))),React.createElement(ia,{open:!!y,onClose:()=>f(null),product:y,onSave:m,onHide:n,onDelete:s}))}function ma(){const a=React.useRef(0),[r,e]=v(""),[n,s]=v("All"),[m,d]=v(null),[x,y]=v(!1),[f,o]=v("dashboard"),[i,l]=v(Ae&&de),u=le?!0:de?i:!1,M=jt(),P=oe?l:()=>{};B(()=>{u||o("dashboard")},[u]);const[S,h]=v(null),$=Y(null),O=(I,W)=>{W&&(h({type:I,message:W}),$.current&&clearTimeout($.current),$.current=setTimeout(()=>h(null),4e3))};B(()=>()=>{$.current&&clearTimeout($.current)},[]);const{ownerProducts:T,setOwnerProducts:w,addProduct:A,deleteProduct:p,loading:U,connectionStatus:C}=Ut(),{orders:c,loadingOrders:g,ordersError:E,ordersMeta:N,refreshOrders:_,updateOrderStatus:F}=Dt();Tt(!!(m||x),a);const b=K(()=>{const I=new Map(It.map(j=>[j.id,j])),W=[];return T.forEach(j=>{if(j.sourceId&&I.has(j.sourceId)){if(j.hidden){I.delete(j.sourceId);return}I.delete(j.sourceId)}j.hidden||(j.sourceId?I.set(j.id,j):W.push(j))}),[...W,...Array.from(I.values())]},[T]),t=K(()=>{let I=b;return n!=="All"&&(I=I.filter(W=>W.category===n)),r&&(I=I.filter(W=>W.name.toLowerCase().includes(r.toLowerCase())||W.sku.toLowerCase().includes(r.toLowerCase())||(W.description||"").toLowerCase().includes(r.toLowerCase()))),I},[b,n,r]);B(()=>(window.__setOwnerManage=I=>{o(I?"manage":"dashboard")},()=>{window.__setOwnerManage=void 0}),[]);const R=I=>w(W=>{const j=W.findIndex(z=>z.id===I.id);if(j>=0){const z=[...W];return z[j]=I,z}return[...W,I]}),k=async(I,W)=>{var Ne,mt;const j=(mt=(Ne=I.id)==null?void 0:Ne.startsWith)==null?void 0:mt.call(Ne,"owner-"),z=Z(j?I:{...I,id:`owner-${Date.now()}`,sourceId:W}),ie=await qe(z);R(ie||z),ie?O("success","Product updated."):O("warning","Product updated locally. Supabase sync pending.")},L=async I=>{const W=Z({id:`owner-hide-${Date.now()}`,sourceId:I,hidden:!0,name:"",sku:"",category:"All",price:0,description:"",specs:[]}),j=await qe(W);R(j||W),j?O("success","Base product hidden."):O("warning","Base product hidden locally. Supabase sync pending.")},D=async I=>{const W=await p(I);return W?O("success","Product deleted."):O("error","Could not delete product. Check your connection and try again."),W},G=K(()=>React.createElement(Qt,{allProducts:b,ownerProducts:T,orders:c,loadingOrders:g,ordersMeta:N,ordersError:E,onNavigate:o,refreshOrders:_}),[b,T,c,g,N,E,_]),Q=K(()=>[{id:"dashboard",label:"Dashboard",description:"Key metrics & recents",icon:zt,element:G},{id:"add",label:"Add product",description:"Create new catalogue items",icon:Kt,element:React.createElement(ca,{addProduct:A,onNotify:O,onNavigate:o})},{id:"manage",label:"Manage catalogue",description:"Edit overrides & hide base items",icon:Ht,element:React.createElement(da,{products:b,onClose:()=>o("add"),onEdit:I=>d({__edit:!0,product:I}),onHide:I=>L(I),onDelete:I=>D(I),onSave:k})},{id:"orders",label:"Orders",description:"Track open, confirmed & shipped",icon:Yt,element:React.createElement(Vt,{orders:c,loading:g,error:E,meta:N,onRefresh:_,onStatusChange:F,onNotify:O})}],[G,b,c,g,E,N,_,F,D,L,k,o,O]),V=M.items.reduce((I,W)=>I+(Number(W.qty)||0),0);return U?React.createElement("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),React.createElement("p",{className:"text-slate-600"},"Loading products..."))):React.createElement("div",{className:"min-h-screen bg-slate-50"},React.createElement(Zt),S&&React.createElement("div",{className:q("fixed bottom-4 right-4 z-40 max-w-sm rounded-lg border px-4 py-3 text-sm shadow-lg backdrop-blur",S.type==="error"?"border-red-200 bg-red-50/90 text-red-700":S.type==="warning"?"border-amber-200 bg-amber-50/90 text-amber-800":"border-emerald-200 bg-emerald-50/90 text-emerald-700")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("span",{className:"flex-1 leading-snug"},S.message),React.createElement("button",{type:"button",onClick:()=>h(null),className:"text-xs font-medium uppercase tracking-wide text-slate-500 hover:text-slate-700"},"Dismiss"))),React.createElement(Xt,{onOpenCart:()=>{a.current=window.scrollY||0,y(!0)},search:r,setSearch:e,ownerMode:u,setOwnerMode:P,cartQty:V,connectionStatus:C,allowOwnerToggle:oe}),u?React.createElement(Jt,{views:Q,section:f,onSectionChange:o}):React.createElement(React.Fragment,null,React.createElement(ea),React.createElement(ta,{active:n,setActive:s}),React.createElement(aa,{products:t,onOpen:I=>{a.current=window.scrollY||0,d(I&&I.__edit&&I.product?I.product:I)}})),React.createElement(sa,{product:m,onClose:()=>{d(null)},onAdd:M.add}),React.createElement(oa,{open:x,onClose:()=>y(!1),cart:M}))}ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(ma))},pt=v=>{const B=document.createElement("div");B.style.cssText="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,42,0.9);z-index:9999;padding:24px;",B.innerHTML=`
          <div style="width:100%;max-width:420px;padding:32px;border-radius:16px;background:white;box-shadow:0 20px 45px rgba(15,23,42,0.35);font-family:system-ui,-apple-system,Segoe UI,sans-serif;">
            <h1 style="margin:0 0 12px;font-size:22px;font-weight:600;color:#111827;">Owner Access</h1>
            <p style="margin:0 0 16px;font-size:14px;color:#4B5563;">Sign in to manage the catalogue.</p>
            <form style="display:flex;flex-direction:column;gap:12px;">
              <input name="email" type="email" autocomplete="email" placeholder="Email" style="width:100%;border:1px solid #D1D5DB;border-radius:8px;padding:10px 12px;font-size:14px;" required />
              <input name="password" type="password" autocomplete="current-password" placeholder="Password" style="width:100%;border:1px solid #D1D5DB;border-radius:8px;padding:10px 12px;font-size:14px;" required />
              <div data-status style="min-height:18px;font-size:13px;color:#DC2626;"></div>
              <button type="submit" style="border:none;border-radius:8px;background:#4F46E5;color:white;padding:10px 12px;font-size:14px;font-weight:600;cursor:pointer;">Sign in</button>
              <button type="button" data-signout style="display:none;border:1px solid #D1D5DB;border-radius:8px;background:white;color:#111827;padding:10px 12px;font-size:14px;font-weight:600;cursor:pointer;">Sign out</button>
            </form>
            <p style="margin:16px 0 0;font-size:12px;color:#6B7280;line-height:1.4;">
              This page requires Supabase Auth + owner-only RLS. If you haven't yet, run <code>supabase-owner-rls.sql</code> in Supabase, then add your Auth user UUID to <code>public.owner_users</code>.
            </p>
          </div>
        `,document.body.appendChild(B);const Y=B.querySelector("form"),K=B.querySelector("input[name=email]"),be=B.querySelector("input[name=password]"),ke=B.querySelector("[data-status]"),fe=B.querySelector("[data-signout]");K.focus();const ee=X=>{ke.textContent=X||""},Se=X=>{const re=Y.querySelector("button[type=submit]");re.disabled=X,re.style.opacity=X?"0.7":"1",re.textContent=X?"Signing in...":"Sign in"};fe.addEventListener("click",async()=>{try{await v.auth.signOut()}catch(X){}fe.style.display="none",ee("Signed out.")}),Y.addEventListener("submit",async X=>{var re,ne,le,de;X.preventDefault(),ee(""),Se(!0);try{const oe=String(K.value||"").trim(),Ae=String(be.value||""),{data:ge,error:ve}=await v.auth.signInWithPassword({email:oe,password:Ae});if(ve)throw ve;const H=await je(v);if(H===!0){B.remove(),Ue();return}const Ce=((re=ge==null?void 0:ge.user)==null?void 0:re.id)||((de=(le=(ne=await v.auth.getUser())==null?void 0:ne.data)==null?void 0:le.user)==null?void 0:de.id);fe.style.display="block",ee(H===!1?`Signed in, but not an owner. User ID: ${Ce||"(unknown)"}`:"Signed in, but owner check failed. Ensure public.is_owner() exists and you are listed in public.owner_users.")}catch(oe){ee((oe==null?void 0:oe.message)||"Sign-in failed.")}finally{Se(!1),be.value=""}})};(async()=>{const v=ut();if(!v){const B=document.createElement("div");B.style.cssText="position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(15,23,42,0.9);z-index:9999;padding:24px;",B.innerHTML=`
            <div style="width:100%;max-width:420px;padding:32px;border-radius:16px;background:white;box-shadow:0 20px 45px rgba(15,23,42,0.35);font-family:system-ui,-apple-system,Segoe UI,sans-serif;">
              <h1 style="margin:0 0 12px;font-size:22px;font-weight:600;color:#111827;">Owner Access</h1>
              <p style="margin:0;font-size:14px;color:#4B5563;">Supabase is not configured. Ensure <code>supabase-config.js</code> is present and loads before this page script.</p>
            </div>
          `,document.body.appendChild(B);return}try{const{data:B}=await v.auth.getSession();if(B==null?void 0:B.session){const K=await je(v);if(K===!0){Ue();return}if(K===!1)try{await v.auth.signOut()}catch(be){}}}catch(B){}pt(v)})()})();})();
